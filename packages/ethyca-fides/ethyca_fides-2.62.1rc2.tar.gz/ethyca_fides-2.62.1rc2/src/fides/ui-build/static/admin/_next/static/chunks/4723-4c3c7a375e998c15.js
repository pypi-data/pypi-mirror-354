"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4723],{58754:function(e,a,t){var i=t(24246),n=t(91942),s=t(70788);a.Z=e=>{let{heading:a,breadcrumbItems:t,isSticky:r=!0,children:l,rightContent:o,style:d,...c}=e;return(0,i.jsxs)("div",{...c,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,i.jsxs)(n.jqI,{justify:"space-between",children:["string"==typeof a?(0,i.jsx)(n.lQT,{className:t||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:a}):a,o&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!t&&(0,i.jsx)(s.m,{className:l?"pb-4":void 0,items:t,"data-testid":"page-breadcrumb"}),l]})}},97181:function(e,a,t){t.d(a,{d:function(){return d}});var i=t(24246),n=t(91942),s=t(34090),r=t(27378),l=t(46238),o=t(40324);let d=e=>{let{name:a,label:t,labelProps:d,tooltip:c,isRequired:u,layout:p="inline",helperText:m,...v}=e,[g,h,{setValue:x}]=(0,s.U$)(a),y=!!(h.touched&&h.error),[f,_]=(0,r.useState)("");g.value||"tags"!==v.mode&&"multiple"!==v.mode||(g.value=[]),"tags"===v.mode&&"string"==typeof g.value&&(g.value=[g.value]);let j="tags"===v.mode?(e,a)=>e?e.value!==f||g.value.includes(f)?v.optionRender?v.optionRender(e,a):e.label:'Create "'.concat(f,'"'):void 0:v.optionRender||void 0,b=e=>{_(e),v.onSearch&&v.onSearch(e)},k=(e,a)=>{x(e),v.onChange&&v.onChange(e,a)};return"inline"===p?(0,i.jsx)(n.NIc,{isInvalid:y,isRequired:u,children:(0,i.jsxs)(n.rjZ,{templateColumns:t?"1fr 3fr":"1fr",children:[t?(0,i.jsx)(o.__,{htmlFor:v.id||a,...d,children:t}):null,(0,i.jsxs)(n.jqI,{align:"center",children:[(0,i.jsxs)(n.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,i.jsx)(n.WPr,{...g,id:v.id||a,"data-testid":"controlled-select-".concat(g.name),...v,optionRender:j,onSearch:"tags"===v.mode?b:void 0,onChange:k,value:g.value||void 0,status:y?"error":void 0}),m&&(0,i.jsx)(n.Q6r,{children:m}),(0,i.jsx)(o.Bc,{isInvalid:y,message:h.error,fieldName:g.name})]}),(0,i.jsx)(l.b,{label:c})]})]})}):(0,i.jsx)(n.NIc,{isInvalid:y,isRequired:u,children:(0,i.jsxs)(n.gCW,{alignItems:"start",children:[(0,i.jsxs)(n.jqI,{align:"center",children:[t?(0,i.jsx)(o.__,{htmlFor:v.id||a,fontSize:"xs",my:0,mr:1,...d,children:t}):null,(0,i.jsx)(l.b,{label:c})]}),(0,i.jsx)(n.WPr,{...g,id:v.id||a,"data-testid":"controlled-select-".concat(g.name),...v,optionRender:j,onSearch:"tags"===v.mode?b:void 0,onChange:k,value:g.value||void 0,status:y?"error":void 0}),m&&(0,i.jsx)(n.Q6r,{style:{marginTop:0},children:m}),(0,i.jsx)(o.Bc,{isInvalid:y,message:h.error,fieldName:g.name})]})})}},70788:function(e,a,t){t.d(a,{m:function(){return d}});var i=t(24246),n=t(91942),s=t(79894),r=t.n(s),l=t(27378);let{Text:o}=n.AntTypography,d=e=>{let{items:a,...t}=e,s=(0,l.useMemo)(()=>null==a?void 0:a.map((e,t)=>{let s=t===a.length-1,l={...e},d=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,i.jsx)(o,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,children:l.title})),d)?l.title=(0,i.jsx)(n.wpx,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,i.jsx)(r(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[a]);return(0,i.jsx)(n.zrq,{items:s,...t})}},31435:function(e,a,t){t.d(a,{Z:function(){return I}});var i=t(24246),n=t(91942),s=t(34090),r=t(27378),l=t(55484),o=t(16134),d=t(25980),c=t(40324),u=t(33335),p=t(32885),m=t(1315),v=t(57865),g=t(72774),h=t(36345),x=t(812),y=t(8133),f=t(46628);let _={name:"",consent_use:"",data_use:"",data_categories:["user"],cookieNames:[],cookies:[]},j=[{label:"Analytics",value:"analytics",description:"Provides analytics for activities such as system and advertising performance reporting, insights and fraud detection."},{label:"Essential",value:"essential",description:"Operates the service or product, including legal obligations, support and basic system operations."},{label:"Functional",value:"functional",description:"Used for specific, necessary, and legitimate purposes."},{label:"Marketing",value:"marketing",description:"Enables marketing, promotion, advertising and sales activities for the product, service, application or system."}],b=e=>j.some(a=>a.value===e.split(".")[0]);var k=t(28079),C=t(69525),N=t(97181);let w=e=>{let{index:a,disabled:t}=e;(0,k.fd)();let r=(0,o.C)(k.oW),{values:l}=(0,s.u6)(),d=r.filter(e=>e.value.split(".")[0]===l.privacy_declarations[a].consent_use);return(0,i.jsxs)(n.gCW,{width:"100%",borderRadius:"4px",border:"1px solid",borderColor:"gray.200",spacing:4,p:4,children:[(0,i.jsx)(N.d,{label:"Consent category",tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",name:"privacy_declarations.".concat(a,".consent_use"),options:j,layout:"stacked",isRequired:!0,disabled:t}),(0,i.jsx)(N.d,{allowClear:!0,label:"Detailed consent category (optional)",tooltip:"Select a more specific consent category",name:"privacy_declarations.".concat(a,".data_use"),options:d,layout:"stacked",disabled:!l.privacy_declarations[a].consent_use||t}),(0,i.jsx)(N.d,{mode:"tags",label:"Cookie names",name:"privacy_declarations.".concat(a,".cookieNames"),options:[],layout:"stacked",disabled:t,className:"w-full"})]})};var R=e=>{var a,t;let{showSuggestions:l,isCreate:d,disabled:c}=e,{values:u,setFieldValue:m}=(0,s.u6)(),{vendor_id:v}=u,{isLoading:g}=(0,p.Wp)({vendor_id:v},{skip:!l||null==v}),h=(0,o.C)((0,p.cL)(v||""));(0,r.useEffect)(()=>{l&&u.vendor_id&&(null==h?void 0:h.length)?m("privacy_declarations",h.filter(e=>b(e.data_use)).map(e=>(0,C.U)(e)).map(e=>{var a,t,i;return{name:null!==(t=e.name)&&void 0!==t?t:"",consent_use:e.data_use.split(".")[0],data_use:e.data_use,data_categories:e.data_categories,cookieNames:(null===(a=e.cookies)||void 0===a?void 0:a.map(e=>e.name))||[],cookies:null!==(i=e.cookies)&&void 0!==i?i:[]}})):d&&m("privacy_declarations",[_])},[l,d,u.vendor_id,h,m]);let x=(null===(a=u.privacy_declarations[u.privacy_declarations.length-1])||void 0===a?void 0:a.data_use)===_.data_use&&(null===(t=u.privacy_declarations[u.privacy_declarations.length-1])||void 0===t?void 0:t.consent_use)===_.consent_use;return g?(0,i.jsx)(n.$jN,{size:"sm",alignSelf:"center"}):(0,i.jsx)(s.F2,{name:"privacy_declarations",render:e=>(0,i.jsxs)(i.Fragment,{children:[u.privacy_declarations.map((e,a)=>(0,i.jsx)(w,{index:a,disabled:c},e.data_use||a)),(0,i.jsx)(n.wpx,{onClick:()=>e.push(_),size:"small",type:"text",disabled:c||x,"data-testid":"add-data-use-btn",children:"Add data use +"})]})})};let q={name:"",vendor_id:void 0,privacy_declarations:[_]};var I=e=>{let{buttonLabel:a,onButtonClick:t,buttonProps:j}=e,b=(0,n.pmc)(),{isOpen:k,onOpen:C,onClose:N}=(0,n.qY0)(),w=(0,o.T)(),[I]=(0,m.in)(),S=(0,r.useMemo)(()=>l.Ry().shape({name:l.Z_().required().label("Vendor name").test("is-unique","",async(e,a)=>{let{data:t}=await I({page:1,size:10,search:e});return!((null==t?void 0:t.items)||[]).some(a=>a.name===e)||a.createError({message:'You already have a vendor called "'.concat(e,'". Please specify a unique name for this vendor.')})})}),[I]),{tcf:F,dictionaryService:W}=(0,d.hz)(),{isLoading:z}=(0,p.Rd)(void 0,{skip:!W}),V=(0,o.C)(p.o),E=(0,o.C)(v.gU),[Q]=(0,m.f7)(),T=(0,o.C)(v.bN),Z=()=>{N(),w((0,v.b3)("initial")),w((0,v.gQ)(!1))},L=(0,r.useRef)(null),A=L.current?L.current.values.vendor_id:void 0,B=(0,o.C)((0,p.$e)(A||"")),M=async(e,a)=>{let t=e.privacy_declarations.filter(e=>e.consent_use!==_.consent_use).flatMap(e=>{let a=e.cookieNames.map(a=>{let t=e.cookies.find(e=>e.name===a);return null!=t?t:{name:a,path:"/"}}),{cookieNames:t,consent_use:i,...n}=e;return"marketing"!==e.consent_use||e.data_use?{...n,data_use:e.data_use?e.data_use:e.consent_use,cookies:a}:["marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"].map(e=>({...n,data_use:e,cookies:a}))}),i={...B,...e,fides_key:(0,u.E)(e.name),system_type:"",privacy_declarations:t},n=await Q(i);if((0,x.D4)(n)){b((0,f.Vo)((0,x.e$)(n.error)));return}b((0,f.t5)("Vendor successfully created!")),a.resetForm(),Z()},P=e=>{if(W){if(!e){w((0,v.b3)("hiding")),w((0,v.gQ)(!1));return}w((0,v.b3)("showing")),F&&(0,x.cj)(e)===x.c6.GVL?w((0,v.gQ)(!0)):w((0,v.gQ)(!1))}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.wpx,{onClick:()=>{t?t():C()},"data-testid":"add-vendor-btn",...j,children:a}),(0,i.jsx)(s.J9,{initialValues:q,enableReinitialize:!0,onSubmit:M,validationSchema:S,innerRef:L,children:e=>{let{dirty:a,isValid:t,resetForm:r}=e;return(0,i.jsx)(y.Z,{isOpen:k,onClose:Z,title:"Add a vendor",children:(0,i.jsxs)(n.xuv,{"data-testid":"add-vendor-modal-content",my:4,children:[E?(0,i.jsx)(g.Z,{}):null,(0,i.jsx)(s.l0,{children:(0,i.jsxs)(n.gCW,{alignItems:"start",spacing:6,children:[W?(0,i.jsx)(h.Z,{label:"Vendor name",options:V,isLoading:z,onVendorSelected:P,isCreate:!0,lockedForGVL:E}):(0,i.jsx)(c.j0,{id:"name",name:"name",isRequired:!0,label:"Vendor name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. “Email Data Warehouse”",variant:"stacked"}),(0,i.jsx)(R,{showSuggestions:"showing"===T,isCreate:!0,disabled:E}),(0,i.jsxs)("div",{className:"flex w-full justify-between",children:[(0,i.jsx)(n.wpx,{onClick:()=>{Z(),r()},children:"Cancel"}),(0,i.jsx)(n.wpx,{type:"primary",htmlType:"submit",disabled:z||!a||!t,loading:z,"data-testid":"save-btn",children:"Save vendor"})]})]})})]})})}})]})}}}]);