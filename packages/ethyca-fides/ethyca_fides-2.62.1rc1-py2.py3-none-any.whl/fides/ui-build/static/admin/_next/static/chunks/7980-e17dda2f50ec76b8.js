"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7980],{58754:function(e,t,i){var l=i(24246),n=i(91942),r=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:a=!0,children:s,rightContent:o,style:d,...c}=e;return(0,l.jsxs)("div",{...c,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,l.jsxs)(n.jqI,{justify:"space-between",children:["string"==typeof t?(0,l.jsx)(n.lQT,{className:i||s?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,l.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!i&&(0,l.jsx)(r.m,{className:s?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),s]})}},94799:function(e,t,i){i.d(t,{k:function(){return r}});var l=i(76649);let n=e=>(0,l.Ln)({id:"string"},e),r=e=>(null!=e?e:[]).filter(n)},30320:function(e,t,i){i.d(t,{m:function(){return o}});var l=i(27378),n=i(25980),r=i(14047),a=i(32885),s=i(94799);let o=e=>{let{resourceFidesKey:t,resourceType:i}=e,{errorAlert:o}=(0,r.V)(),{plus:d}=(0,n.hz)(),c=(0,l.useMemo)(()=>null!=t?t:"",[]),u=(0,a.YU)(!0,{skip:!d}),p=(0,a.VN)(i,{skip:!d}),{data:m,isLoading:x,error:h,isError:v}=(0,a.PV)(null!=t?t:"",{skip:""!==c&&!(d&&c)}),[f]=(0,a._D)(),g=u.isLoading||p.isLoading||x,j=(0,l.useMemo)(()=>new Map((0,s.k)(u.data).map(e=>{var t;return[e.id,{...e,options:(null!==(t=e.allowed_values)&&void 0!==t?t:[]).map(e=>({value:e,label:e}))}]})),[u.data]),_=(0,l.useMemo)(()=>{var e;return null===(e=p.data)||void 0===e?void 0:e.filter(e=>e.active)},[p.data]),C=(0,l.useMemo)(()=>new Map((0,s.k)(_).map(e=>[e.id,e])),[_]),b=(0,l.useMemo)(()=>v&&(null==h?void 0:h.status)===404?new Map:new Map((0,s.k)(m).map(e=>[e.custom_field_definition_id,e])),[m,v,h]),T=(0,l.useMemo)(()=>{let e=[...C.keys()];return e.sort(),e},[C]),y=(0,l.useMemo)(()=>{let e={};return _&&b&&_.forEach(t=>{let i=b.get(t.id||"");i&&(t.allow_list_id&&"string[]"===t.field_type?e[i.custom_field_definition_id]=i.value:e[i.custom_field_definition_id]=i.value.toString())}),e},[_,b]),S=(0,l.useCallback)(async e=>{if(!d)return;let l="fides_key"in e&&""!==e.fides_key?e.fides_key:t;if(!l)return;let{customFieldValues:n}=e;if(!n||0===Object.keys(n).length)return;let r=[],a=[];T.forEach(e=>{let t=b.get(e),i=n[e];void 0===i||""===i||Array.isArray(i)&&0===i.length?(null==t?void 0:t.id)&&a.push(t.id):r.push({custom_field_definition_id:e,resource_id:l,id:null==t?void 0:t.id,value:i})});try{await f({resource_type:i,resource_id:l,upsert:r,delete:a})}catch(e){o("One or more custom fields have failed to save, please try again."),console.error(e)}},[d,b,o,t,T,f,i]);return{customFieldValues:y,definitionIdToCustomField:b,idToAllowListWithOptions:j,idToCustomFieldDefinition:C,isEnabled:d,isLoading:g,sortedCustomFieldDefinitionIds:T,upsertCustomFields:S}}},95346:function(e,t,i){i.d(t,{uc:function(){return f},Hn:function(){return o},Uv:function(){return a},C7:function(){return d},mZ:function(){return v.m}});var l,n,r,a,s=i(7448);(l=r||(r={}))[l.CREATE_CUSTOM_FIELDS=0]="CREATE_CUSTOM_FIELDS",l[l.CREATE_CUSTOM_LISTS=1]="CREATE_CUSTOM_LISTS",l[l.CHOOSE_FROM_LIBRARY=2]="CHOOSE_FROM_LIBRARY",s.AL.STRING,s.AL.STRING_,(n=a||(a={})).SINGLE_SELECT="singleSelect",n.MULTIPLE_SELECT="multipleSelect",n.OPEN_TEXT="openText";let o=[{label:"Single select",value:"singleSelect"},{label:"Multiple select",value:"multipleSelect"},{label:"Open Text",value:"openText"}],d=[{label:"taxonomy:".concat(s.P6.DATA_CATEGORY),value:s.P6.DATA_CATEGORY},{label:"taxonomy:".concat(s.P6.DATA_SUBJECT),value:s.P6.DATA_SUBJECT},{label:"taxonomy:".concat(s.P6.DATA_USE),value:s.P6.DATA_USE},{label:"".concat(s.P6.SYSTEM,":information"),value:s.P6.SYSTEM},{label:"system:data use",value:s.P6.PRIVACY_DECLARATION}];var c=i(24246),u=i(91942),p=i(34090),m=i(30234),x=i(97181),h=i(40324),v=i(30320);let f=e=>{let{resourceFidesKey:t,resourceType:i}=e,{idToAllowListWithOptions:l,idToCustomFieldDefinition:n,isEnabled:r,isLoading:a,sortedCustomFieldDefinitionIds:o}=(0,v.m)({resourceFidesKey:t,resourceType:i});return r&&0!==o.length?(0,c.jsx)(m.Z,{heading:"Custom fields",children:(0,c.jsx)(u.kCb,{flexDir:"column","data-testid":"custom-fields-list",children:(0,c.jsx)(u.kCb,{flexDir:"column",gap:"24px",children:a?(0,c.jsx)(u.M5Y,{children:(0,c.jsx)(u.$jN,{})}):o.length>0&&(0,c.jsx)(u.kCb,{flexDirection:"column",gap:"12px",paddingBottom:"24px",children:o.map(e=>{let t=n.get(e);if(!t)return null;let i="customFieldValues.".concat(t.id);if(!t.allow_list_id&&t.field_type===s.AL.STRING)return(0,c.jsx)(p.gN,{name:i,children:e=>{let{field:i}=e;return(0,c.jsx)(h.j0,{...i,label:t.name,tooltip:t.description,variant:"stacked"})}},e);let r=l.get(t.allow_list_id);if(!r)return null;let{options:a}=r;return(0,c.jsx)(x.d,{name:i,allowClear:!0,mode:t.field_type!==s.AL.STRING?"multiple":void 0,label:t.name,options:a,tooltip:t.description,layout:"stacked",className:"w-full"},e)})})})})}):null};i(94799)},97181:function(e,t,i){i.d(t,{d:function(){return d}});var l=i(24246),n=i(91942),r=i(34090),a=i(27378),s=i(46238),o=i(40324);let d=e=>{let{name:t,label:i,labelProps:d,tooltip:c,isRequired:u,layout:p="inline",helperText:m,...x}=e,[h,v,{setValue:f}]=(0,r.U$)(t),g=!!(v.touched&&v.error),[j,_]=(0,a.useState)("");h.value||"tags"!==x.mode&&"multiple"!==x.mode||(h.value=[]),"tags"===x.mode&&"string"==typeof h.value&&(h.value=[h.value]);let C="tags"===x.mode?(e,t)=>e?e.value!==j||h.value.includes(j)?x.optionRender?x.optionRender(e,t):e.label:'Create "'.concat(j,'"'):void 0:x.optionRender||void 0,b=e=>{_(e),x.onSearch&&x.onSearch(e)},T=(e,t)=>{f(e),x.onChange&&x.onChange(e,t)};return"inline"===p?(0,l.jsx)(n.NIc,{isInvalid:g,isRequired:u,children:(0,l.jsxs)(n.rjZ,{templateColumns:i?"1fr 3fr":"1fr",children:[i?(0,l.jsx)(o.__,{htmlFor:x.id||t,...d,children:i}):null,(0,l.jsxs)(n.jqI,{align:"center",children:[(0,l.jsxs)(n.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,l.jsx)(n.WPr,{...h,id:x.id||t,"data-testid":"controlled-select-".concat(h.name),...x,optionRender:C,onSearch:"tags"===x.mode?b:void 0,onChange:T,value:h.value||void 0,status:g?"error":void 0}),m&&(0,l.jsx)(n.Q6r,{children:m}),(0,l.jsx)(o.Bc,{isInvalid:g,message:v.error,fieldName:h.name})]}),(0,l.jsx)(s.b,{label:c})]})]})}):(0,l.jsx)(n.NIc,{isInvalid:g,isRequired:u,children:(0,l.jsxs)(n.gCW,{alignItems:"start",children:[(0,l.jsxs)(n.jqI,{align:"center",children:[i?(0,l.jsx)(o.__,{htmlFor:x.id||t,fontSize:"xs",my:0,mr:1,...d,children:i}):null,(0,l.jsx)(s.b,{label:c})]}),(0,l.jsx)(n.WPr,{...h,id:x.id||t,"data-testid":"controlled-select-".concat(h.name),...x,optionRender:C,onSearch:"tags"===x.mode?b:void 0,onChange:T,value:h.value||void 0,status:g?"error":void 0}),m&&(0,l.jsx)(n.Q6r,{style:{marginTop:0},children:m}),(0,l.jsx)(o.Bc,{isInvalid:g,message:v.error,fieldName:h.name})]})})}},14047:function(e,t,i){i.d(t,{H:function(){return r},V:function(){return l.V}});var l=i(84306),n=i(812);let r=()=>{let{errorAlert:e}=(0,l.V)();return{handleError:t=>{let i="An unexpected error occurred. Please try again.";(0,n.Ot)(t)?i=t.data.detail:(0,n.tB)(t)&&(i=t.data.detail[0].msg),e(i)}}}},84306:function(e,t,i){i.d(t,{V:function(){return r}});var l=i(24246),n=i(91942);let r=()=>{let e=(0,n.pmc)();return{errorAlert:(t,i,r)=>{let a={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,l.jsxs)(n.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,l.jsx)(n.zMQ,{}),(0,l.jsxs)(n.xuv,{children:[i&&(0,l.jsx)(n.CdC,{children:i}),(0,l.jsx)(n.XaZ,{children:t})]}),(0,l.jsx)(n.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,a):e(a)},successAlert:(t,i,r)=>{let a={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,l.jsxs)(n.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,l.jsx)(n.zMQ,{}),(0,l.jsxs)(n.xuv,{children:[i&&(0,l.jsx)(n.CdC,{children:i}),(0,l.jsx)(n.XaZ,{children:t})]}),(0,l.jsx)(n.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,a):e(a)}}}},70788:function(e,t,i){i.d(t,{m:function(){return d}});var l=i(24246),n=i(91942),r=i(79894),a=i.n(r),s=i(27378);let{Text:o}=n.AntTypography,d=e=>{let{items:t,...i}=e,r=(0,s.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let r=i===t.length-1,s={...e},d=s.onClick&&!s.href;return("string"==typeof s.title&&(s.title=(0,l.jsx)(o,{style:{color:"inherit",maxWidth:r?void 0:400},ellipsis:!r,children:s.title})),d)?s.title=(0,l.jsx)(n.wpx,{type:"text",size:"small",icon:s.icon,onClick:s.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:s.title}):(s.icon&&(s.title=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,l.jsx)(a(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href)),s}),[t]);return(0,l.jsx)(n.zrq,{items:r,...i})}},30234:function(e,t,i){var l=i(24246),n=i(91942);t.Z=e=>{let{heading:t,HeadingButton:i,children:r}=e;return(0,l.jsx)(n.Kqy,{spacing:4,children:(0,l.jsxs)(n.xuv,{maxWidth:"720px",border:"1px",borderColor:"gray.200",borderRadius:6,overflow:"visible",mt:6,children:[(0,l.jsxs)(n.xuv,{backgroundColor:"gray.50",px:6,py:4,display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px",borderColor:"gray.200",borderTopRadius:6,children:[(0,l.jsx)(n.X6q,{as:"h3",size:"xs",children:t}),i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.LZC,{}),(0,l.jsx)(i,{})]}):null]}),(0,l.jsx)(n.Kqy,{spacing:4,px:6,py:6,children:r})]})})}}}]);