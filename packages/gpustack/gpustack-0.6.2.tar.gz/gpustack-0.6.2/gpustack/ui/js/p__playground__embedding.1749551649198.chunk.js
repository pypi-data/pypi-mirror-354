"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3856],{8445:function(e,t,n){var r=n(26068),i=n.n(r),a=n(48305),l=n.n(a),o=n(67825),s=n.n(o),c=n(43943),u=n(76808),d=n(32699),f=n(50959),p=n(62605),m=n(11527),h=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],x=function(e){var t=e.children,n=e.maxWidth,r=void 0===n?"100%":n,a=e.minWidth,o=e.ghost,x=void 0!==o&&o,g=e.title,v=e.showTitle,b=void 0!==v&&v,y=e.tooltipProps,j=s()(e,h),C=(0,f.useRef)(null),w=(0,f.useState)(!1),S=l()(w,2),N=S[0],Z=S[1],k=(0,f.useRef)(null),M=(0,f.useCallback)((function(){if(C.current){var e=C.current,t=e.scrollWidth,n=e.clientWidth;Z(t>n)}}),[C.current]);(0,f.useEffect)((function(){var e,t,n=C.current;if(n)return null===(e=k.current)||void 0===e||e.disconnect(),k.current=new ResizeObserver((function(){M()})),null===(t=k.current)||void 0===t||t.observe(n),M(),function(){var e;null===(e=k.current)||void 0===e||e.disconnect(),k.current=null}}),[M]),(0,f.useEffect)((function(){var e=(0,d.throttle)(M,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[M]),(0,f.useEffect)((function(){M()}),[t,M]);var z=(0,f.useMemo)((function(){return i()({maxWidth:r,minWidth:a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},j.style)}),[r,j.style]);return(0,m.jsx)(p.$R,{toolTipProps:i()(i()({},y),{},{destroyTooltipOnHide:!1}),title:!(!N&&!b)&&(g||t),children:x?(0,m.jsx)("div",{ref:C,style:z,"data-overflow":N,children:t}):(0,m.jsx)(u.Z,i()(i()({},j),{},{ref:C,style:i()(i()({},z),{},{paddingInline:j.closable?"8px 22px":8,borderRadius:12}),closeIcon:!!j.closable&&(0,m.jsx)(c.Z,{style:{position:"absolute",right:8,top:6}}),children:t}))})};t.Z=f.memo(x)},13636:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(32699),i=n(50959),a=n(16222),l=n(13916),o=n(25620),s=n(953),c=n(4853),u=n(22241),d=n(99182),f=n(2177),p=n(19090),m=n(8725),h=n(62493),x=n(56031),g=n(7119),v=n(56262),b=n(83616),y=n(19175);x.D([c.N,u.N,d.N,f.N,p.N,m.N,h.N,a.N,l.N,o.N,s.N,v.T,b.z,y.N]);var j=g,C=n(11527),w=(0,i.forwardRef)((function(e,t){var n=e.options,a=e.width,l=e.height,o=(0,i.useRef)(null),s=(0,i.useRef)(),c=(0,i.useRef)(!1),u=(0,i.useRef)();(0,i.useImperativeHandle)(t,(function(){return{chart:s.current}}));var d=(0,i.useCallback)((function(){var e;o.current&&(null===(e=s.current)||void 0===e||e.clear(),s.current=j.init(o.current))}),[]),f=(0,i.useCallback)((function(){var e;null===(e=s.current)||void 0===e||e.resize()}),[]),p=(0,i.useCallback)((function(e){var t,n;null===(t=s.current)||void 0===t||t.clear(),null===(n=s.current)||void 0===n||n.setOption(e,{notMerge:!0,lazyUpdate:!0})}),[n]);return(0,i.useEffect)((function(){return o.current&&d(),function(){var e;null===(e=s.current)||void 0===e||e.dispose()}}),[d]),(0,i.useEffect)((function(){c.current=!1,f(),p(n),c.current=!0}),[n]),(0,i.useEffect)((function(){var e=(0,r.throttle)((function(){var e;c.current&&(null===(e=s.current)||void 0===e||e.resize())}),100);return o.current&&(u.current=new ResizeObserver(e),u.current.observe(o.current)),function(){var e;o.current&&(null===(e=u.current)||void 0===e||e.unobserve(o.current))}}),[]),(0,C.jsx)("div",{className:"chart-wrapper",style:{width:a,height:l},children:(0,C.jsx)("div",{ref:o,style:{width:a,height:l}})})})),S=w},29220:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(73341),i=n(98847),a=n(32699),l=n(50959),o=function(e){return"number"!=typeof e||isNaN(e)?e:e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e},s={left:0,right:20,bottom:20,containLabel:!0};function c(){var e=(0,r.Z)(),t=e.userSettings,n=e.isDarkTheme,c=(0,i.Z.useToken)().token,u=(0,l.useMemo)((function(){return{titleColor:c.colorText,splitLineColor:c.colorBorder,tickLineColor:c.colorSplit,axislabelColor:c.colorTextTertiary,gaugeBgColor:c.colorFillSecondary,gaugeSplitLineColor:n?"rgba(255,255,255,.3)":"rgba(255, 255, 255, 1)",gaugeSplitLineColor2:n?"rgba(255,255,255,.5)":"rgba(255, 255, 255, 1)",colorBgContainerHover:n?"#424242":"#fff"}}),[t.theme,n]),d={trigger:"axis",backgroundColor:u.colorBgContainerHover,borderColor:"transparent",formatter:function(e,t){var n='<span class="tooltip-x-name">'.concat(e[0].axisValue,"</span>");return e.forEach((function(e){var r=(0,a.isFunction)(t)?null==t?void 0:t(e.data.value):e.data.value;n+='<span class="tooltip-item">\n     <span class="tooltip-item-name">\n       <span style="display:inline-block;margin-right:5px;border-radius:8px;width:8px;height:8px;background-color:'.concat(e.color,';"></span>\n       <span class="tooltip-title">').concat(e.seriesName,'</span>:\n     </span>\n      <span class="tooltip-value">').concat(r,"</span>\n      </span>")})),'<div class="tooltip-wrapper">'.concat(n,"</div>")}},f={itemWidth:8,itemHeight:8,textStyle:{color:u.axislabelColor}},p={type:"category",axisTick:{show:!0,lineStyle:{color:u.tickLineColor}},axisLabel:{color:u.axislabelColor,fontSize:12},axisLine:{show:!1}},m={nameTextStyle:{padding:[0,0,0,-20]},splitLine:{show:!0,lineStyle:{type:"dashed",color:u.splitLineColor}},axisLabel:{color:u.axislabelColor,fontSize:12,formatter:o},axisTick:{show:!1},type:"value"},h={show:!0,left:"center",textStyle:{fontSize:12,color:u.titleColor},text:""},x={type:"gauge",radius:"88%",center:["50%","65%"],startAngle:190,endAngle:-10,min:0,max:100,splitNumber:5,progress:{show:!0,roundCap:!1,width:12},pointer:{length:"80%",width:4,itemStyle:{color:"auto"}},axisLine:{roundCap:!1,lineStyle:{width:12,color:[[.5,"rgba(84, 204, 152, 80%)"],[.8,"rgba(250, 173, 20, 80%)"],[1,"rgba(255, 77, 79, 80%)"]]}},axisTick:{distance:-11,length:6,splitNumber:5,lineStyle:{width:1.5,color:u.gaugeSplitLineColor}},splitLine:{distance:-5,length:5,lineStyle:{width:1.5,color:u.gaugeSplitLineColor2}},axisLabel:{distance:14,color:u.axislabelColor,fontSize:12},detail:{lineHeight:40,height:40,offsetCenter:[5,30],valueAnimation:!1,fontSize:20,color:u.titleColor,formatter:function(e){return"{value|"+e+"}{unit|%}"},rich:{value:{fontSize:16,fontWeight:"500",color:u.titleColor},unit:{fontSize:14,color:u.titleColor,fontWeight:"500",padding:[0,0,0,2]}}}};return{tooltip:d,grid:s,legend:f,xAxis:p,yAxis:m,title:h,chartColorMap:u,barItemConfig:{type:"bar",barMaxWidth:20,barMinWidth:8,barGap:"30%",barCategoryGap:"50%"},lineItemConfig:{type:"line",smooth:!0,showSymbol:!1,itemStyle:{},lineStyle:{width:1.5,opacity:.7}},gaugeItemConfig:x,isDark:n}}},30396:function(e,t,n){var r=n(23010),i=(n(50959),n(11527));t.Z=function(e){var t=e.height,n=e.title;return(0,i.jsxs)("div",{style:{width:"100%",height:t||"100%"},className:"flex-center  flex-column ",children:[n&&(0,i.jsx)("h3",{className:"justify-center font-size-12",style:{padding:"4px 0",marginBottom:0},children:n}),(0,i.jsx)("div",{className:"flex-center justify-center flex-column",style:{height:"100%"},children:(0,i.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE})})]})}},62605:function(e,t,n){n.d(t,{$R:function(){return v}});var r,i=n(67825),a=n.n(i),l=n(26068),o=n.n(l),s=n(53649),c=n.n(s),u=n(38780),d=n(23333),f=n(50959),p=n(97884),m=n(11527),h=["overlayInnerStyle"],x=p.ZP.div(r||(r=c()(["\n  max-height: ",";\n  overflow-y: auto;\n  width: 100%;\n"])),(function(e){var t=e.$maxHeight;return"number"==typeof t?"".concat(t,"px"):t})),g=function(e){var t=e.children,n=e.maxHeight,r=e.scrollbars,i=e.oppositeTheme,a=e.style,l=f.useRef(null),s=(0,u.Z)({options:{scrollbars:r,oppositeTheme:i}}).initialize;return f.useEffect((function(){l.current&&s(l.current)}),[]),(0,m.jsx)(x,{ref:l,"data-overlayscrollbars-initialize":!0,className:"overlay-scroller-wrapper",$maxHeight:n||200,hidden:!1,style:o()({paddingInlineStart:8,paddingInlineEnd:8},a),children:t})},v=function(e){var t=e.children,n=e.maxHeight,r=e.title,i=e.toolTipProps,l=e.scrollbars,s=e.oppositeTheme,c=i||{},u=c.overlayInnerStyle,f=a()(c,h);return(0,m.jsx)(d.Z,o()(o()({overlayInnerStyle:o()({paddingInline:0},u),title:r&&(0,m.jsx)(g,{scrollbars:o()(o()({},l),{},{theme:"os-theme-light"}),maxHeight:n,oppositeTheme:s,children:r})},f),{},{children:t}))};t.ZP=g},4286:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});var r=n(90228),i=n.n(r),a=n(87999),l=n.n(a),o=n(48305),s=n.n(o),c=n(49280),u=n(82344),d=n(57989),f=n(67581),p=n(38551),m=n(54235),h=n(85885),x=n(82187),g=n.n(x),v=n(32699),b=n.n(v),y=n(50959),j=n(94299),C=n(91082),w=n(15558),S=n.n(w),N=n(26068),Z=n.n(N),k=n(58573),M=n(13636),z=n(29220),R=n(30396),L=n(11527),T=function(e){var t=(0,z.Z)(),n=t.grid,r=t.title,i=t.isDark,a=t.chartColorMap,l=e.seriesData,o=e.xAxisData,c=e.height,u=e.width,d=e.showEmpty,f=e.title,p=(0,y.useRef)(null),m=(0,y.useMemo)((function(){var e=i?{split:a.splitLineColor,axis:a.axislabelColor,label:a.axislabelColor}:{split:"#F2F2F2",axis:"#dcdcdc",label:"#dcdcdc"};return{animation:!1,grid:Z()(Z()({},n),{},{right:10,top:10,bottom:2,left:2,containLabel:!0,borderRadius:4}),xAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:15,splitLine:{lineStyle:{color:e.split}},axisLine:{show:!0,lineStyle:{color:e.axis}},axisTick:{show:!1},axisLabel:{show:!0,color:e.label},boundaryGap:[.05,.05]},yAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:10,boundaryGap:[.05,.05],splitLine:{lineStyle:{color:e.split}},axisLine:{show:!0,lineStyle:{color:e.axis}},axisTick:{show:!1},axisLabel:{show:!0,color:e.label}},symbol:"roundRect",label:{show:!0,shadowColor:"none",textBorderColor:"none",formatter:function(e){return e.name}},series:[]}}),[i]),h=(0,y.useCallback)((function(e,t){for(var n,r=[],i=null===(n=p.current.chart)||void 0===n?void 0:n.convertToPixel("grid",t.value),a=s()(i,2),l=a[0],o=a[1],c=e.map((function(e){var t;return Z()(Z()({},e),{},{value:null===(t=p.current.chart)||void 0===t?void 0:t.convertToPixel("grid",e.value)})})),u=0;u<c.length;u++)if(t.name!==c[u].name){var d=s()(c[u].value,2),f=d[0],m=d[1];Math.sqrt(Math.pow(b().round(f-l,2),2)+Math.pow(b().round(m-o,2),2))<=16&&r.push(Z()({},c[u]))}else r.push(Z()({},c[u]));return r}),[]),x=(0,y.useCallback)((function(e){if(!e.length||e.length<2)return null;return function(e){var t;return'<span class="tooltip-item-name">\n               <span style="display:flex;justify-content:center;align-items: center;color:#fff;\n               margin-right:0;border-radius:4px;width:14px;\n               height:14px;background-color:'.concat(null==e||null===(t=e.itemStyle)||void 0===t?void 0:t.color,';"\n               >').concat(e.name,"</span>\n             </span>")}}),[]),g=(0,y.useMemo)((function(){var e=l.map((function(e,t){return Z()(Z()({},e),{},{itemStyle:{color:"#5470c6"},symbolSize:16})}));return Z()(Z()({},m),{},{tooltip:{trigger:"item",borderWidth:0,backgroundColor:a.colorBgContainerHover,borderColor:"transparent",formatter:function(t,n){var r=h(e,t.data),i="",a=x(r);return r.forEach((function(e){i+='\n            <span class="tooltip-item" style="justify-content: flex-start;">\n             '.concat(a?a(e):"",'\n             <span class="tooltip-value">').concat(e.text,"</span>\n            </span>")})),'<div class="tooltip-wrapper">'.concat(i,"</div>")}},title:Z()(Z()({},r),{},{text:f}),series:{type:"scatter",labelLayout:{hideOverlap:!0},data:e}})}),[l,o,f,m,h]);return(0,L.jsx)(L.Fragment,{children:!l.length&&d?(0,L.jsx)(R.Z,{height:c,title:f}):(0,L.jsx)(M.Z,{ref:p,height:c,options:g,width:u||"100%"})})},I=(0,y.memo)(T),P=n(43585),A=n(90343),E=n(38780),_=n(59995),H=n(34155),O=n(19019),D=n(51076),G=n(77353),W=n(66668),F=n(68476),B=n(23333),K=n(83603),V=n(96938),U=n(54876),Y=n(47946),$=n(98227),J=(n(99951),n(2139)),q=n(1731),X=n(26174),Q=n(24662),ee=(n(29031),n(32314),n(39616)),te=n(80912),ne=n(8445),re=n(25906),ie=n(69070),ae=function(e){var t=e.textListCount,n=e.fileList,r=e.ghost,i=e.showIcon,a=void 0===i||i,l=e.onDelete,o=(0,p.useIntl)();return(0,L.jsx)("div",{className:"file-list",children:n.map((function(e,n){return(0,L.jsxs)("div",{className:g()("file-item",{ghost:r}),children:[(0,L.jsxs)("span",{className:"title",children:[(0,L.jsxs)("span",{className:"m-r-5",children:[n+1+t,"."]}),a&&(0,L.jsx)(re.Z,{className:"m-r-5"}),(0,L.jsxs)(ne.Z,{ghost:!0,children:[" ",e.name]})]}),l&&(0,L.jsx)(B.Z,{title:o.formatMessage({id:"common.button.delete"}),children:(0,L.jsx)(h.ZP,{danger:!0,size:"small",type:"text",className:"delete-btn",icon:(0,L.jsx)(ie.Z,{}),onClick:function(){return l(e.uid)}})})]},e.uid)}))})},le=y.memo(ae),oe=n(63057),se=n(91860),ce=(0,y.forwardRef)((function(e,t){var n=e.modelList,r=(0,y.useRef)(0),a=(0,p.useIntl)(),o=(0,_.Z)(),u=(0,y.useState)(!1),d=s()(u,2),f=d[0],m=d[1],x=(0,y.useState)(!1),v=s()(x,2),j=v[0],w=v[1],N=(0,y.useState)(null),M=s()(N,2),z=M[0],R=M[1],T=(0,y.useState)(!1),ne=s()(T,2),re=ne[0],ie=ne[1],ae=(0,y.useRef)(""),ce=(0,y.useRef)(null),ue=(0,y.useRef)(null),de=(0,y.useRef)(0),fe=(0,y.useRef)(null),pe=(0,y.useState)([]),me=s()(pe,2),he=me[0],xe=me[1],ge=(0,y.useState)("chart"),ve=s()(ge,2),be=ve[0],ye=ve[1],je=(0,y.useState)(180),Ce=s()(je,2),we=Ce[0],Se=Ce[1],Ne=(0,y.useState)({code:"",copyValue:""}),Ze=s()(Ne,2),ke=Ze[0],Me=Ze[1],ze=(0,y.useState)(!1),Re=s()(ze,2),Le=Re[0],Te=Re[1],Ie=(0,y.useRef)(!0),Pe=(0,y.useRef)(null),Ae=(0,y.useState)([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),Ee=s()(Ae,2),_e=Ee[0],He=Ee[1],Oe=(0,y.useState)([]),De=s()(Oe,2),Ge=De[0],We=De[1],Fe=(0,y.useRef)(null),Be=(0,E.Z)(),Ke=Be.initialize,Ve=Be.updateScrollerPosition,Ue=(0,Q.X)({modelList:n,isChat:!0},{defaultValues:{},defaultParamsConfig:[],metaKeys:X.m4}),Ye=Ue.handleOnValuesChange,$e=Ue.formRef,Je=Ue.paramsConfig,qe=Ue.initialValues,Xe=Ue.parameters,Qe=Ue.paramsRef,et=Ue.modelMeta,tt=Ue.formFields;(0,y.useImperativeHandle)(t,(function(){return{viewCode:function(){m(!0)},setCollapse:function(){ie(!re)}}}));var nt=(0,y.useMemo)((function(){return function(e){var t=e.api,n=e.parameters,r=window.location.origin,i=t.replace(C.Mo,C.ZG),a="\ncurl ".concat(r).concat(i,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n').concat((0,ee.Yy)(n,!1)).trim(),l='\nfrom openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(r,"/").concat(C.ZG,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.embeddings.create(\n').concat((0,ee.G4)(Z()({},n)),")\n\nprint(response.data[0].embedding)").trim(),o=(0,ee.GT)(Z()({},n));return{curlCode:a,pythonCode:l,nodeJsCode:'\nconst OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(r,"/").concat(C.ZG,'"\n});\n\nasync function main() {\n  const params = ').concat(o,"; \n  const response = await openai.embeddings.create(params);\n  console.log(response.data[0].embedding);\n}\nmain();").trim()}}({api:C.d8,parameters:Z()(Z()({},b().pick(Xe,["model"].concat(S()(b().split(tt,","))))),{},{input:[].concat(S()(_e.map((function(e){return e.text})).filter((function(e){return e}))),S()(he.map((function(e){return e.text})).filter((function(e){return e}))))})})}),[Xe,tt,_e,he]),rt=(0,y.useMemo)((function(){return[].concat(S()(_e),S()(he)).length<2}),[_e,he]),it=(0,y.useCallback)((function(e){try{var t=e.map((function(e){return e.embedding})),n=new $._(t).predict(t,{nComponents:2}).to2DArray(),r=[].concat(S()(_e.map((function(e){return e.text})).filter((function(e){return e}))),S()(he.map((function(e){return e.text})).filter((function(e){return e})))),i=n.map((function(e,t){return{value:e,name:t+1,text:r[t]}}));We(i);var a=e.map((function(e,t){var n=b().cloneDeep(e);return n.embedding=n.embedding.slice(0,5),n.embedding.push(null),n}));Me({code:JSON.stringify(a,null,2).replace(/null/g,"..."),copyValue:JSON.stringify(e,null,2)})}catch(e){}}),[_e,he]),at=function(){var e=l()(i()().mark((function e(t){var n,a,l,s,c,u,d,f;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(n=$e.current)||void 0===n?void 0:n.form.validateFields();case 3:if(Xe.model){e.next=5;break}return e.abrupt("return");case 5:if(s=_e.filter((function(e){return e.text})),c=he.filter((function(e){return e.text})),!((u=[].concat(S()(s.map((function(e){return e.text}))),S()(c.map((function(e){return e.text}))))).length<2)){e.next=11;break}return Te(!0),e.abrupt("return");case 11:return He(s),xe(c),Te(!1),w(!0),r.current=r.current+1,R(null),null===(a=fe.current)||void 0===a||null===(l=a.cancel)||void 0===l||l.call(a),fe.current=o(),ae.current=(null==t?void 0:t.content)||"",e.next=22,(0,C.xO)({model:Xe.model,encoding_format:"float",input:u},{token:fe.current.token});case 22:d=e.sent,R(d.usage),f=d.data||[],it(f),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),R({error:!0,errorMessage:(0,q.Yo)(e.t0.response)});case 31:return e.prev=31,w(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[0,28,31,34]])})));return function(t){return e.apply(this,arguments)}}(),lt=(0,y.useCallback)((function(e){Pe.current=e}),[]),ot=(0,y.useCallback)((function(e,t){if(Ie.current){var n=e.clipboardData.getData("text");if(n){_e[t].text;var r,i,a=n.split("\n").map((function(e){var t;return{text:null==e?void 0:e.trim(),uid:null===(t=ue.current)||void 0===t?void 0:t.setMessageId(),name:""}}));a[0].text="".concat((null===(r=Pe.current)||void 0===r?void 0:r.beforeText)||"").concat(a[0].text).concat((null===(i=Pe.current)||void 0===i?void 0:i.afterText)||"");var l=[].concat(S()(_e.slice(0,t)),S()(a),S()(_e.slice(t+1))).filter((function(e){return e.text})).map((function(e,t){var n;return Z()(Z()({},e),{},{uid:null===(n=ue.current)||void 0===n?void 0:n.setMessageId()})}));He(l)}}}),[_e]),st=(0,y.useMemo)((function(){return null!=et&&et.n_ctx&&null!=et&&et.n_slot?(0,L.jsx)(F.Z.Item,{children:(0,L.jsx)(A.Z,{disabled:!0,label:"Max Tokens",value:b().divide(null==et?void 0:et.n_ctx,null==et?void 0:et.n_slot)})}):[]}),[et]),ct=(0,y.useMemo)((function(){return[{key:"chart",label:"Chart",children:(0,L.jsx)(I,{seriesData:Ge,height:we,width:"100%",xAxisData:[]})},{key:"json",label:"JSON",children:(0,L.jsx)("div",{style:{backgroundColor:"var(--ant-color-bg-container)"},children:(0,L.jsx)(P.Z,{height:we-32,code:ke.code,copyValue:ke.copyValue,lang:"json",copyable:!0,style:{marginBottom:0}})})}]}),[we,Ge,ke]),ut=(0,y.useCallback)((function(e,t){e.model&&(We([]),R(null)),Ye(e,t)}),[]);return(0,y.useEffect)((function(){ce.current&&Ke(ce.current)}),[Ke]),(0,y.useEffect)((function(){_e.length+he.length>de.current&&Ve(),de.current=_e.length+he.length}),[_e.length,he.length]),(0,L.jsxs)("div",{className:"ground-left-wrapper rerank",children:[(0,L.jsxs)("div",{className:"ground-left",children:[(0,L.jsx)("div",{className:"center",ref:ce,style:{height:"auto",maxHeight:"100%"},children:(0,L.jsxs)("div",{className:"documents",children:[(0,L.jsxs)("div",{className:"flex-between m-b-8 doc-header",children:[(0,L.jsx)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-0",children:(0,L.jsx)("div",{className:"flex gap-20",children:(0,L.jsx)("span",{children:a.formatMessage({id:"playground.embedding.documents"})})})}),(0,L.jsxs)("div",{className:"flex-center gap-10",children:[(0,L.jsx)(B.Z,{title:a.formatMessage({id:"playground.input.multiplePaste.tips"}),children:(0,L.jsxs)(K.Z,{defaultChecked:Ie.current,onChange:function(e){Ie.current=e.target.checked},children:[a.formatMessage({id:"playground.input.multiplePaste"}),(0,L.jsx)(H.Z,{className:"m-l-4"})]})}),(0,L.jsxs)(h.ZP,{size:"middle",onClick:function(){var e;null===(e=ue.current)||void 0===e||e.handleAdd()},children:[(0,L.jsx)(O.Z,{}),a.formatMessage({id:"playground.embedding.addtext"})]}),(0,L.jsx)(h.ZP,{icon:(0,L.jsx)(D.Z,{}),size:"middle",disabled:j,onClick:function(){He([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),xe([]),We([]),R(null),Te(!1),Me({code:"",copyValue:""})},children:a.formatMessage({id:"common.button.clear"})}),j?(0,L.jsx)(B.Z,{title:a.formatMessage({id:"common.button.stop"}),children:(0,L.jsx)(h.ZP,{style:{width:60},size:"middle",type:"primary",onClick:function(){var e,t;null===(e=fe.current)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e),w(!1)},icon:(0,L.jsx)(c.Z,{type:"icon-stop1",className:"font-size-12"})})}):(0,L.jsx)(B.Z,{title:(0,L.jsx)("span",{children:a.formatMessage({id:"common.button.submit"})}),children:(0,L.jsx)(h.ZP,{size:"middle",type:"primary",disabled:rt,onClick:function(){at()},icon:(0,L.jsx)(G.Z,{rotate:0,className:"font-size-14"}),style:{width:60}})})]})]}),(0,L.jsxs)("div",{className:"docs-wrapper",children:[(0,L.jsx)(oe.Z,{ref:ue,textList:_e,onChange:function(e){He(e)},onSelect:lt,onPaste:ot}),(0,L.jsx)("div",{style:{marginTop:8},children:(0,L.jsx)(le,{fileList:he,textListCount:_e.length||0,onDelete:function(e){xe((function(t){return t.filter((function(t){return t.uid!==e}))}))}})}),Le&&(0,L.jsx)(k.Z,{type:"danger",message:a.formatMessage({id:"playground.documents.verify.embedding"})})]})]})}),(0,L.jsxs)("div",{className:"ground-left-footer",style:{width:"100%",padding:"0 32px 16px"},children:[(0,L.jsxs)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-16",children:[(0,L.jsxs)("div",{className:"flex gap-20",children:[(0,L.jsxs)("span",{className:"flex-center",children:[a.formatMessage({id:"playground.embedding.output"}),(0,L.jsx)(B.Z,{title:(0,L.jsxs)("span",{className:"flex-column",children:[(0,L.jsxs)("span",{children:["1.",a.formatMessage({id:"playground.embedding.pcatips1"})]}),(0,L.jsxs)("span",{children:["2."," ",a.formatMessage({id:"playground.embedding.pcatips2"})]})]}),children:(0,L.jsx)(H.Z,{className:"m-l-4"})})]}),(0,L.jsx)(k.Z,{type:"danger",message:null==z?void 0:z.errorMessage})]}),(0,L.jsx)(V.Z,{onChange:function(e){ye(e)},value:be,options:[{label:a.formatMessage({id:"playground.embedding.chart"}),value:"chart"},{label:"JSON",value:"json"}]})]}),(0,L.jsxs)("div",{className:"embed-chart",children:[j&&(0,L.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,L.jsx)(U.Z,{spinning:!0})}),(0,L.jsx)(J.e,{ref:Fe,enable:{top:!0},defaultSize:{height:180},handleComponent:{top:(0,L.jsx)(B.Z,{title:a.formatMessage({id:"playground.embedding.handler.tips"}),children:(0,L.jsx)(h.ZP,{size:"small",className:"drag-handler",color:"default",variant:"filled",icon:(0,L.jsx)(W.Z,{rotate:90,style:{fontSize:"var(--font-size-14)"}})})})},maxHeight:400,minHeight:180,onResize:function(){var e,t=null===(e=Fe.current)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.height;t&&Se(t)},onResizeStop:function(e,t,n,r){r.height+we<=400&&r.height+we>=180&&Se(r.height+we)},children:(0,L.jsx)("div",{style:{border:"1px solid var(--ant-color-border)",borderRadius:"var(--border-radius-base)",width:"100%",overflow:"hidden"},className:"scatter",children:(0,L.jsx)(Y.Z,{defaultActiveKey:be,activeKey:be,centered:!0,renderTabBar:function(){return(0,L.jsx)(L.Fragment,{})},items:ct})})})]})]})]}),(0,L.jsx)("div",{className:g()("params-wrapper",{collapsed:re}),ref:Qe,children:(0,L.jsx)("div",{className:"box",children:(0,L.jsx)(te.Z,{ref:$e,onValuesChange:ut,paramsConfig:Je,initialValues:qe,modelList:n,extra:st})})}),(0,L.jsx)(se.Z,{open:f,viewCodeContent:nt,onCancel:function(){m(!1)},title:a.formatMessage({id:"playground.viewcode"})})]})})),ue=ce,de=(n(64232),function(){var e=(0,p.useIntl)(),t=(0,y.useRef)(null),n=(0,y.useRef)(null),r=(0,y.useState)([]),a=s()(r,2),o=a[0],x=a[1],v=(0,y.useState)(!1),w=s()(v,2),S=w[0],N=w[1],Z=(0,y.useCallback)((function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.viewCode)||void 0===t||t.call(e)}),[n.current]),k=(0,y.useCallback)((function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.setCollapse)||void 0===t||t.call(e)}),[n.current]);(0,y.useEffect)((function(){var e=function(){var e=l()(i()().mark((function e(){var t,n,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={categories:d.Us.embedding,with_meta:!0},e.next=4,(0,C.nb)(t);case 4:return n=e.sent,r=b().map(n.data||[],(function(e){return{value:e.id,label:e.id,meta:e.meta}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var t=l()(i()().mark((function t(){var n,r,a;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e()]);case 3:n=t.sent,r=s()(n,1),a=r[0],x(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),N(!0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()}),[]);return(0,j.y1)(u.ZP.RIGHT.join(","),(function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),{preventDefault:!0}),(0,L.jsx)(f._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.playground.embedding"}),style:{paddingInline:"var(--layout-content-header-inlinepadding)"},breadcrumb:{}},extra:(0,L.jsxs)(m.Z,{children:[(0,L.jsx)(h.ZP,{size:"middle",onClick:Z,icon:(0,L.jsx)(c.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,L.jsx)(h.ZP,{size:"middle",onClick:k,icon:(0,L.jsx)(c.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:g()("playground-container chat"),children:(0,L.jsx)("div",{className:"play-ground",children:(0,L.jsx)("div",{className:"chat",children:(0,L.jsx)(ue,{ref:n,modelList:o,loaded:S})})})})})}}]);