"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2695],{55825:function(e,n,t){var a=t(26068),r=t.n(a),i=t(48305),o=t.n(i),l=t(67825),s=t.n(l),c=t(58258),u=t(38551),d=t(68476),p=t(84682),f=t(32699),v=t(50959),g=t(11267),h=t(24447),m=t(11527),x=["label","placeholder","children","required","description","options","allowNull","isInFormItems"];n.Z=function(e){var n=e.label,t=(e.placeholder,e.children),a=e.required,i=e.description,l=e.options,b=e.allowNull,w=e.isInFormItems,k=void 0===w||w,y=s()(e,x),j=(0,u.useIntl)(),A=(0,v.useState)(!1),C=o()(A,2),z=C[0],Z=C[1],F=(0,v.useRef)(null),N=((0,v.useRef)(null),"");if(k){var S,P,q=null===d.Z||void 0===d.Z||null===(S=d.Z.Item)||void 0===S||null===(P=S.useStatus)||void 0===P?void 0:P.call(S);N=(null==q?void 0:q.status)||""}var L=(0,v.useMemo)((function(){return null!=l&&l.length?(0,f.cloneDeep)(l).map((function(e){return e.locale&&(e.label=j.formatMessage({id:e.label})),e})):[]}),[l,j]);(0,v.useEffect)((function(){((0,c.JL)(e.value)||b&&null===e.value)&&Z(!0)}),[e.value,b]);return(0,m.jsx)(h.Z,{children:(0,m.jsx)(g.Z,{className:"seal-select-wrapper",status:N,label:n,isFocus:z,required:a,description:i,disabled:e.disabled,onClick:function(){var n,t;e.disabled||z||(null===(n=F.current)||void 0===n||null===(t=n.focus)||void 0===t||t.call(n),Z(!0))},children:(0,m.jsx)(p.default,r()(r()({},y),{},{ref:F,options:t?null:L,onFocus:function(n){var t;Z(!0),null===(t=e.onFocus)||void 0===t||t.call(e,n)},onBlur:function(n){var t;b&&null===e.value?Z(!0):e.value||Z(!1),null===(t=e.onBlur)||void 0===t||t.call(e,n)},onChange:function(n,t){var a;(0,c.JL)(n)||b&&null===n?Z(!0):Z(!1),null===(a=e.onChange)||void 0===a||a.call(e,n,t)},notFoundContent:null,children:t}))})})}},24447:function(e,n,t){var a,r=t(53649),i=t.n(r),o=t(97884),l=t(81186),s=o.ZP.div(a||(a=i()(["\n  .seal-select-wrapper {\n    border: none;\n    box-shadow: none;\n\n    &.dropdown-visible {\n      .__wrapper__ {\n        .ant-select-selector {\n          border-bottom: none !important;\n          border-radius: ","px ","px 0 0;\n          transition: all 0.2s ease;\n\n          &::before {\n            content: '';\n            position: absolute;\n            height: 1px;\n            margin-inline: 1px;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-color: var(--ant-color-split);\n          }\n        }\n\n        .ant-select-dropdown {\n          box-shadow: none;\n          border-width: var(--ant-line-width);\n          border-style: var(--ant-line-type);\n          border-color: var(--ant-input-active-border-color);\n          border-top: none;\n        }\n\n        &:hover {\n          .ant-select-dropdown {\n            border-color: var(--ant-input-active-border-color);\n          }\n        }\n\n        &:focus-within {\n          border-color: var(--ant-input-active-border-color) !important;\n          outline: 0;\n          background-color: var(--ant-input-active-bg);\n        }\n      }\n    }\n\n    &:focus-within {\n      border: none;\n      box-shadow: none;\n    }\n    .__wrapper__ {\n      padding-block: 0;\n\n      .label {\n        left: ","px !important;\n        top: 11px;\n\n        &.isfoucs-has-value {\n          top: 11px;\n          transition: all 0.2s var(--seal-transition-func);\n        }\n\n        &.blur-no-value {\n          top: 21px;\n          transition: all 0.2s var(--seal-transition-func);\n        }\n\n        &.has-prefix {\n          top: 11px !important;\n        }\n      }\n      &.no-label {\n        padding-block: 0;\n\n        .ant-select-arrow {\n          top: 50%;\n        }\n\n        .ant-select-selector {\n          padding-block-start: 0 !important;\n        }\n\n        .ant-select .ant-select-selection-search {\n          top: 10px !important;\n        }\n      }\n    }\n    .ant-select-selection-overflow-item > span {\n      display: flex;\n      align-items: center;\n    }\n    .ant-select {\n      display: flex;\n      align-items: center;\n      height: 54px;\n\n      .ant-select-selection-search {\n        top: 20px !important;\n        inset-inline-start: ","px;\n      }\n      &.ant-select-multiple.ant-cascader .ant-select-selection-search {\n        top: 0 !important;\n      }\n    }\n\n    .ant-select-selector {\n      flex: 1;\n      padding-inline: ","px !important;\n      border-width: var(--ant-line-width);\n      border-style: var(--ant-line-type);\n      border-color: var(--ant-color-border);\n      border-radius: ","px;\n      height: 54px !important;\n      padding-block: 20px 0 !important;\n      box-shadow: none !important;\n\n      &:focus-within {\n        border-color: var(--ant-input-active-border-color) !important;\n        outline: 0;\n        background-color: var(--ant-input-active-bg);\n      }\n    }\n\n    .ant-select-multiple.ant-select-lg {\n      .ant-select-selection-search {\n        margin-inline-start: 0 !important;\n        left: 0 !important;\n      }\n    }\n\n    .ant-select-selection-item {\n      height: ","px !important;\n      padding-block: 5px !important;\n      line-height: 22px !important;\n      padding-inline-end: 0 !important;\n    }\n\n    .ant-select-auto-complete .ant-select-selector {\n      padding-inline: 0 !important;\n      flex: 1;\n    }\n\n    .ant-select-arrow {\n      top: 32px;\n    }\n\n    .ant-select-outlined.ant-select-disabled:not(.ant-select-customize-input)\n      .ant-select-selector {\n      background-color: transparent;\n    }\n\n    .ant-select-selection-search-input {\n      height: ","px !important;\n    }\n\n    &.validate-status-error {\n      .ant-select-selector {\n        border-width: var(--ant-line-width) !important;\n        border-style: var(--ant-line-type) !important;\n        border-color: var(--ant-color-error) !important;\n\n        &:hover {\n          border-color: var(--ant-color-error-border-hover) !important;\n        }\n\n        &:focus-within {\n          border-color: var(--ant-color-error) !important;\n        }\n      }\n\n      &.dropdown-visible {\n        .ant-select-dropdown {\n          border-color: var(--ant-color-error) !important;\n        }\n      }\n    }\n  }\n"])),l.HG,l.HG,l.xZ+1,l.xZ,l.xZ,l.HG,l.n1,l.n1);n.Z=s},37963:function(e,n){n.Z={xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1600}},56339:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ie}});var a,r,i,o,l=t(90228),s=t.n(l),c=t(26068),u=t.n(c),d=t(87999),p=t.n(d),f=t(15558),v=t.n(f),g=t(48305),h=t.n(g),m=t(53649),x=t.n(m),b=t(47820),w=t(62201),k=t(38551),y=t(85885),j=t(50959),A=t(97884),C=t(11527),z=A.ZP.div(a||(a=x()(["\n  display: flex;\n  justify-content: center;\n  margin-block: 16px;\n  opacity: 1;\n  transition: opacity 0.3s;\n  &.loading {\n    opacity: 0;\n    transition: opacity 0.3s ease-in-out;\n  }\n"]))),Z=function(e){var n=e.show,t=e.loading,a=e.loadMore,r=(0,k.useIntl)();return(0,C.jsx)(C.Fragment,{children:n?(0,C.jsx)(z,{className:t?"loading":"",children:(0,C.jsx)(y.ZP,{onClick:a,size:"middle",type:"text",icon:(0,C.jsx)(w.Z,{rotate:90}),children:r.formatMessage({id:"common.button.more"})})}):null})},F=t(62722),N=t(20369),S=t(32246),P=t(4881),q=t(56838),L=t(67581),E=t(40174),B=t(54235),I=t(8267),M=t(84682),V=t(99205),O=t(79416),R=t(32699),U=t.n(R),H=t(54713),D=t(37963),G=t(54876),Q=t(81745),X=t(7922),Y=t(49606),_=t(34682),W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAApBJREFUeF7tmzFPwkAUx+8ANZHBKImDcVAxTMbNwQ8gLn4QP4DOyOwHkNVP4KATLDiocXciIs4kqAtGsXD6ag6hQnvvpNDzXhNSEtrr/X/v/95dr5QzyzduuX5GAMgBjDEhxNHXLmcRjDJjLM85L3MQX6w4uYeGYNVGxwoG6VSMraU4y2YSeX5259Suas6KFco9IjeXYpf85LolbIm8N8jLc7EXfnD+JmyMvtRMAMgBlAJUA6gI0ihgMQHtYRCmkzuZuIsOvsNWqrTdfbHiGINUC0A2k+iKH6QUQJgCAQ0gSLwEAtPrws1H5J2AAqAqXqo2wQkoAMd7M+iIHl68o88Z5wnKAKDQ7W9PofsGaRDlu01lAFj7S1LWA4h6HVB2gG4KWF8D/g0AyGlsHYi6/UGTcgrIogYjgZz6+g0JJojXAqDiBFPEawOQEGAP6+vgCBjr5bOFKI/7XteiUwA9E4r4CQSAVoUNXBVeSMYYfOaTP0/3n5vfS5v3ddxijFEpAKLTi3FXvN9WrbeVQRgDYH0x4YrHbCogjACgI74XlB+IyAP4q/ggEJEGMErx3bXKeps9NTvuBzUTlIUH8hAqbm8jmLxUPTYM8YPcEOgAv8oLEAAGdugJghC2eHl96L8vABC/taq2DqhScYOEw++Ya6q0F3TMUAC6UQAQOhOSSYgfWgN0xXtpY1wx7sjLvv5ywKjE98KQtWJQ4VSd3QVZWff3PgBhiNft2LjO6wKwUXxfDdjdwD/2GleUwryO6wAY6oLusMLsxCTb5oVbR2DvsibZ4VFfm5dqwu4/SREAcgClANWAUVdWk9qDUcC294Xc+Ly2xOPsND+l1+ZMsmsYfSUHhEHVpDbJASZFK4y+Wu+AT2tYeGuEzy19AAAAAElFTkSuQmCC",K=t(8445),T=t(49280),J=t(1404),$=t(8964),ee=t(76808),ne=function(e){var n=e.gap,t=void 0===n?0:n,a=e.dataList,r=e.renderTag,i=(0,j.useRef)(null),o=(0,j.useState)({start:0,end:a.length}),l=h()(o,2),s=l[0],c=l[1],u=(0,j.useRef)(null),d=(0,j.useRef)(null),p=(0,j.useRef)(0),f=(0,j.useRef)([]),v=function(){var e,n,r,o=(null===(e=u.current)||void 0===e?void 0:e.offsetWidth)||0,l=null===(n=i.current)||void 0===n?void 0:n.childNodes,v=f.current;if(!v.length&&null!=l&&l.length&&(v=U().map(l,(function(e,n){return n===l.length-1?null==e?void 0:e.offsetWidth:(null==e?void 0:e.offsetWidth)+t})),f.current=v),0!==o&&v.length){var g;if(null!==(r=d.current)&&void 0!==r&&r.offsetWidth)p.current=(null===(g=d.current)||void 0===g?void 0:g.offsetWidth)+t;for(var h=0,m=a.length,x=0;x<v.length;x++){var b=v[x];if(h+p.current>=o){m=x-1<0?0:x-1;break}if((h+=b)>=o){m=x;break}}0===s.start&&s.end===m||c({start:0,end:m})}},g=function(e){var n;null===(n=e.domEvent)||void 0===n||n.stopPropagation()};(0,j.useEffect)((function(){i.current&&v()}),[a,t]);var m=U().throttle((function(){v()}),200);return(0,C.jsx)(_.Z,{onResize:m,children:(0,C.jsxs)("div",{className:"tags-wrapper",ref:u,children:[(0,C.jsx)(_.Z,{onResize:m,children:(0,C.jsx)("div",{className:"tags-content",ref:i,style:{gap:t},children:U().map(U().slice(a,s.start,s.end),(function(e,n){return(0,C.jsx)("span",{children:null==r?void 0:r(e)},n)}))})}),s.end<a.length&&(0,C.jsx)($.Z,{trigger:["hover"],overlayClassName:"tags-wrapper-dropdown",menu:{items:U().map(U().slice(a,s.end),(function(e,n){return{label:null==r?void 0:r(e),key:n,onClick:g}}))},children:(0,C.jsx)(ee.Z,{className:"more",style:{marginInline:s.end<1?0:"".concat(t,"px 0")},ref:d,children:(0,C.jsx)(J.Z,{rotate:90})})})]})})},te=j.memo(ne),ae=t(87443),re=t(87497),ie=t(82187),oe=t.n(ie),le=t(57989),se=function(e){var n,t,a=(0,k.useIntl)(),r=e.onClick,i=e.activeId,o=e.data,l=(0,j.useCallback)((function(){r(o)}),[o,r]);return(0,C.jsxs)("div",{onClick:l,className:oe()("catalog-item",{active:i===o.id}),children:[(0,C.jsxs)("div",{className:"content",children:[(0,C.jsxs)("div",{className:"title",children:[(0,C.jsx)("div",{className:"img",children:(0,C.jsx)("img",{src:o.icon||W,alt:"",onError:function(e){e.target.src=W}})}),(0,C.jsx)(K.Z,{ghost:!0,style:{flex:1},children:o.name})]}),(0,C.jsx)(re.Z.Paragraph,{className:"desc",ellipsis:{rows:2,tooltip:(0,C.jsx)("div",{className:"custome-scrollbar",style:{display:"flex",justifyContent:"flex-start",maxHeight:300,maxWidth:300,overflow:"auto"},children:o.description})},children:o.description})]}),(0,C.jsxs)("div",{className:"item-footer",children:[(0,C.jsxs)("div",{className:"update-time",children:[(0,C.jsxs)("span",{className:"flex-center",title:a.formatMessage({id:"models.catalog.release.date"}),children:[(0,C.jsx)(T.Z,{type:"icon-new_release_outlined",className:"m-r-5",style:{color:"var(--ant-color-text-secondary)"}}),o.release_date]}),(0,C.jsx)("span",{className:"flex-center",children:U().map(o.licenses,(function(e,n){return(0,C.jsxs)("span",{className:"flex-center m-r-8",children:[(0,C.jsx)(T.Z,{type:"icon-justice1",className:"m-r-5"}),(0,C.jsx)("span",{children:e})]},e)}))})]}),(0,C.jsxs)("div",{className:"tags",children:[o.categories.map((function(e,n){var t;return(0,C.jsx)(ae.Z,{className:"tag-item",color:"blue",opacity:.7,children:(null===(t=U().find(le._3,{value:e}))||void 0===t?void 0:t.label)||e},e)})),(null===(n=o.capabilities)||void 0===n?void 0:n.length)>0&&o.capabilities.map((function(e,n){return(0,C.jsx)(ae.Z,{className:"tag-item",color:"purple",opacity:.7,children:U().map(U().split(e,"/"),(function(e){return U().split(e,"_").join(" ")})).reverse().join(" ")},e)})),(null===(t=o.sizes)||void 0===t?void 0:t.length)>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"dot"}),(0,C.jsx)("div",{className:"box",children:(0,C.jsx)(te,{gap:8,dataList:o.sizes,renderTag:function(e){return(0,C.jsxs)(ae.Z,{className:"tag-item",opacity:.7,style:{marginRight:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"2px 6px",borderRadius:4,fontSize:12,height:22},children:[e,"B"]},e)}})})]})]})]})]})},ce=j.memo(se),ue=t(45770),de=function(e){return(0,C.jsx)(Q.Z,{gutter:[16,16],children:Array(6).fill(1).map((function(n,t){return(0,C.jsx)(X.Z,{span:e.span,children:(0,C.jsx)(ue.Z,{avatar:{size:32},paragraph:{rows:2},style:{border:"1px solid var(--ant-color-border)",borderRadius:"var(--border-radius-base)",padding:"16px 16px"}})},t)}))})},pe=j.memo(de),fe=A.ZP.div(r||(r=x()(["\n  width: 100%;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  top: 0;\n  left: 0;\n  height: 400px;\n  right: 0;\n"]))),ve=function(e){var n=e.span,t=e.loading,a=e.isFirst;return(0,C.jsx)("div",{children:t&&(0,C.jsx)(fe,{children:(0,C.jsx)(G.Z,{spinning:t,style:{width:"100%"},wrapperClassName:"skelton-wrapper",children:a&&(0,C.jsx)(pe,{span:n})})})})},ge=function(e){var n=e.dataList,t=e.loading,a=e.activeId,r=e.isFirst,i=e.onDeploy,o=j.useState(8),l=h()(o,2),s=l[0],c=l[1],u=(0,j.useCallback)(U().throttle((function(e){var n;c((n=e.width)<D.Z.md?24:n<D.Z.lg?12:8)}),100),[]);return(0,C.jsxs)("div",{className:"relative",style:{width:"100%"},children:[(0,C.jsx)(_.Z,{onResize:u,children:(0,C.jsxs)("div",{children:[(0,C.jsx)(Q.Z,{gutter:[16,16],children:n.map((function(e,n){return(0,C.jsx)(X.Z,{span:s,children:(0,C.jsx)(ce,{onClick:i,activeId:a,data:e})},e.id)}))}),(0,C.jsx)(ve,{span:s,loading:t,isFirst:r})]})}),(0,C.jsx)(Y.Z.BackTop,{visibilityHeight:1e3})]})},he=j.memo(ge),me=t(67768),xe=t(33330),be=t(43943),we=t(97536),ke=t(50209),ye=t(67303),je=t(2377),Ae=t(18752),Ce=t(90957),ze=A.ZP.div(i||(i=x()(["\n  display: flex;\n  flex: 1;\n  height: 100%;\n  maxwidth: 100%;\n"]))),Ze=[{label:"llama-box",value:le.sk.llamaBox},{label:"vLLM",value:le.sk.vllm},{label:"Ascend Mindie",value:le.sk.ascendMindie},{label:"vox-box",value:le.sk.voxBox}],Fe={F16:"FP16",f16:"FP16",F32:"FP32",f32:"FP32"},Ne=["Q4_K_M"],Se=["FP16","F16"],Pe=["F16","FP16"],qe=["Q8_0"],Le=function(e){var n=e||{},t=n.title,a=n.open,r=n.onOk,i=n.onCancel,o=n.source,l=n.action,c=n.current,d=n.width,f=void 0===d?600:d,v=(0,ye.Eg)(),g=v.setWarningStatus,m=v.handleDoEvalute,x=v.generateGPUIds,b=v.cancelEvaluate,w=v.submitAnyway,A=v.handleOnValuesChange,z=v.warningStatus,Z=(0,k.useIntl)(),F=(0,ye.W7)().getGPUList,N=(0,j.useRef)({}),S=(0,j.useState)([]),P=h()(S,2),q=P[0],L=P[1],E=(0,j.useState)(!1),B=h()(E,2),I=B[0],M=B[1],V=(0,j.useState)([]),O=h()(V,2),R=O[0],D=O[1],G=(0,j.useState)([]),Q=h()(G,2),X=Q[0],Y=Q[1],_=(0,j.useState)([]),W=h()(_,2),K=W[0],T=W[1],J=(0,j.useState)([]),$=h()(J,2),ee=$[0],ne=$[1],te=(0,j.useRef)({}),ae=(0,j.useRef)(null),re=(0,j.useRef)({}),ie=(0,j.useRef)([]),oe=(0,j.useRef)(!1),se=function(){var e=p()(s()().mark((function e(){var n,t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.current=!0,null===(n=N.current)||void 0===n||null===(t=n.submit)||void 0===t||t.call(n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e,n=null===(e=N.current)||void 0===e?void 0:e.getFieldsValue();return U().pick(n,["worker_selector","gpu_selector","env"])},ue=function(e){var n=x(e);return u()(u()(u()({},U().omit(re.current,["name"])),e),n)},de=function(e){return e.category===le.Us.embedding||e.category===le.Us.reranker?Se.includes(U().toUpper(e.quantOption)):e.backend===le.sk.llamaBox&&(0,ye.lR)(q)?oe.current?Pe.includes(U().toUpper(e.quantOption)):qe.includes(U().toUpper(e.quantOption)):Ne.includes(U().toUpper(e.quantOption))},pe=function(e){var n=U().find(ie.current,(function(n){return e.size&&e.quantization?n.size===e.size&&n.backend===e.backend&&n.quantization===e.quantization:e.size?n.size===e.size&&n.backend===e.backend:e.quantization?n.quantization===e.quantization&&n.backend===e.backend:n.backend===e.backend}));return re.current=n,u()(u()({},U().omit(n,["name"])),{},{categories:U().get(c,"categories.0",null)})},fe=function(e){var n;re.current=e,null===(n=N.current)||void 0===n||n.setFieldsValue(u()(u()({},U().omit(e,["name"])),{},{categories:U().get(c,"categories.0",null)}))},ve=function(e){var n=U().groupBy(U().filter(ie.current,(function(n){return n.backend===e.backend})),"size"),t=U().keys(n).map((function(e){return{label:"".concat(e,"B"),value:U().toNumber(e)}})).filter((function(e){return e.value})),a=U().sortBy(t,"value");return T(a),a},ge=function(e){var n=U().filter(ie.current,(function(n){return n.size===e.size&&n.backend===e.backend})),t=U().map(n,(function(e){var n;return{label:null!==(n=Fe[e.quantization])&&void 0!==n?n:U().toUpper(e.quantization),value:e.quantization}})),a=U().uniqBy(t,"value");return ne(a),a},he=function(){var e=U().groupBy(ie.current,"backend"),n=U().filter(Ze,(function(n){return e[n.value]}));return Y(n),n},Le=function(){var e=p()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ee=function(){var e,n=null===(e=N.current)||void 0===e?void 0:e.getFieldsValue(),t=ue(n);Le(t)},Be=function(e){var n,t;return(null===(n=U().find(e,(function(e){return e.value===N.current.getFieldValue("quantization")})))||void 0===n?void 0:n.value)||(null===(t=U().find(e,(function(e){return de({category:U().get(c,"categories.0",""),quantOption:e.value,backend:N.current.getFieldValue("backend")})})))||void 0===t?void 0:t.value)||U().get(e,"0.value","")},Ie=function(){var n=p()(s()().mark((function n(t,a){var r;return s()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=u()(u()({},U().omit(re.current,["name"])),a),null==A||A({changedValues:t,allValues:r,source:e.source});case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),Me=function(){var e=p()(s()().mark((function e(){var n,t,a,r,i,o,l,u;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null===(n=ae.current)||void 0===n||null===(t=n.cancel)||void 0===t||t.call(n),ae.current=(0,xe.$i)(),e.next=5,(0,H.qX)({id:c.id},{token:ae.current.token});case 5:a=e.sent,r=U().groupBy(a.items,"source"),te.current=r,ie.current=a.items,i=U().filter(le.YB,(function(e){return r[e.value]})),o=U().sortBy(a.items,"size"),oe.current=U().some(a.items,(function(e){return Pe.includes(U().toUpper(e.quantization))})),l=U().find(o,(function(e){return de({category:U().get(c,"categories.0",""),quantOption:e.quantization,backend:e.backend})}))||U().get(a.items,"0",{}),re.current=l,D(i),he(),ve({backend:l.backend}),ge({size:l.size,backend:l.backend}),fe(l),N.current.setFieldValue("name",U().toLower(c.name).replace(/\s/g,"-")||""),l.backend===le.sk.llamaBox?M(!0):M(!1),u=ue(l),Le(u),e.next=27;break;case 25:e.prev=25,e.t0=e.catch(0);case 27:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=p()(s()().mark((function e(n){var t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u()(u()({},U().omit(re.current,["name"])),n),r(t);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Oe=(0,j.useCallback)((function(){var e,n;null==i||i(),null===(e=ae.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)}),[i]),Re=(0,j.useMemo)((function(){return z.show&&"success"!==z.type}),[z.show,z.type]);return(0,j.useEffect)((function(){return a&&Me(),function(){var e,n;null===(e=ae.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),b(),g({show:!1,title:"",message:[]})}}),[a,c]),(0,j.useEffect)((function(){F().then((function(e){L(e)}))}),[]),(0,C.jsx)(we.Z,{title:(0,C.jsxs)("div",{className:"flex-between flex-center",children:[(0,C.jsx)("span",{style:{color:"var(--ant-color-text)",fontWeight:"var(--font-weight-medium)",fontSize:"var(--font-size-middle)"},children:t}),(0,C.jsx)(y.ZP,{type:"text",size:"small",onClick:Oe,children:(0,C.jsx)(be.Z,{})})]}),open:a,onClose:Oe,destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,styles:{body:{height:"calc(100vh - 57px)",padding:"16px 0",overflowX:"hidden"},content:{borderRadius:"6px 0 0 6px"}},width:f,footer:!1,children:(0,C.jsx)(ke.q3.Provider,{value:{isGGUF:I,byBuiltIn:!0,sizeOptions:K,quantizationOptions:ee,onSizeChange:function(e){var n=ge({backend:N.current.getFieldValue("backend"),size:e}),t=Be(n),a=pe({backend:N.current.getFieldValue("backend"),size:e,quantization:t});N.current.setFieldsValue(u()(u()({},a),ce())),Ee()},onQuantizationChange:function(e){var n=pe({backend:N.current.getFieldValue("backend"),size:N.current.getFieldValue("size"),quantization:e});N.current.setFieldsValue(u()(u()({},n),ce())),Ee()},onValuesChange:Ie},children:(0,C.jsx)(ze,{children:(0,C.jsx)(je.Z,{paddingBottom:z.show?Array.isArray(z.message)?150:125:50,footer:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ae.Z,{showClose:!0,onClose:function(){g({show:!1,message:""})},warningStatus:z,contentStyle:{paddingInline:0}}),(0,C.jsx)(me.Z,{onCancel:Oe,onOk:function(){var e,n;null===(e=N.current)||void 0===e||null===(n=e.submit)||void 0===n||n.call(e)},showOkBtn:!Re,extra:Re&&(0,C.jsx)(y.ZP,{type:"primary",onClick:se,children:Z.formatMessage({id:"models.form.submit.anyway"})}),style:{padding:"16px 24px",display:"flex",justifyContent:"flex-end"}})]}),children:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Ce.Z,{fields:[],source:o,action:l,selectedModel:{},onOk:Ve,ref:N,isGGUF:I,sourceDisable:!1,backendOptions:X,sourceList:R,gpuOptions:q,onBackendChange:function(e){e===le.sk.llamaBox?M(!0):M(!1);var n,t,a=ve({backend:e}),r=(n=a,(null===(t=U().find(n,(function(e){return e.value===N.current.getFieldValue("size")})))||void 0===t?void 0:t.value)||U().get(n,"0.value",0)),i=ge({size:r,backend:e}),o=Be(i),l=pe({backend:e,size:r,quantization:o});N.current.setFieldsValue(u()({},l)),Ee()},onSourceChange:function(e){var n=U().get(te.current,"".concat(e,".0"),{});fe(n),ve({backend:n.backend}),ge({size:n.size,backend:n.backend}),fe(n),Ee()},onValuesChange:Ie})})})})})})},Ee=(0,j.memo)(Le),Be=A.ZP.div(o||(o=x()(["\n  display: none;\n  margin-block: 32px 16px;\n"]))),Ie=function(){var e=(0,k.useIntl)(),n=(0,S.Z)(),t=n.saveScrollHeight,a=n.restoreScrollHeight,r=(0,k.useNavigate)(),i=j.useState(-1),o=h()(i,2),l=(o[0],o[1]),c=j.useState(!0),d=h()(c,2),f=d[0],g=d[1],m=(0,j.useState)({dataList:[],loading:!1,total:0,totalPage:0}),x=h()(m,2),w=x[0],A=x[1],z=(0,j.useState)({page:1,perPage:24,search:"",categories:""}),R=h()(z,2),D=R[0],G=R[1],Q=(0,j.useState)({show:!1,width:600,current:{},source:le.bI.huggingface_value}),X=h()(Q,2),Y=X[0],_=X[1],W=(0,O.KO)(b.m),K=h()(W,2),T=(K[0],K[1]),J=j.useRef([]),$=v()(le._3.filter((function(e){return e.value}))),ee=((0,j.useCallback)((function(e){var n=e.search,t=e.categories;return J.current.filter((function(e){return n&&t?U().toLower(e.name).includes(n)&&e.categories.includes(t):n?U().toLower(e.name).includes(U().toLower(n)):!t||e.categories.includes(t)}))}),[J.current]),(0,j.useCallback)(function(){var e=p()(s()().mark((function e(n){var t,a,r,i;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u()(u()({},D),n),!(w.loading||t.page>w.totalPage&&w.totalPage>0)){e.next=3;break}return e.abrupt("return");case 3:return A((function(e){return e.loading=!0,u()({},e)})),e.prev=4,a=u()({},U().pickBy(t,(function(e){return!!e}))),e.next=8,(0,H.vx)(a);case 8:r=e.sent,i=1===t.page?r.items:U().concat(w.dataList,r.items),A({dataList:i,loading:!1,total:r.pagination.total,totalPage:r.pagination.totalPage}),G(u()(u()({},D),n)),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(4),J.current=[],A({dataList:[],loading:!1,total:w.total,totalPage:w.totalPage}),G(u()(u()({},D),n));case 20:return e.prev=20,g(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,14,20,23]])})));return function(n){return e.apply(this,arguments)}}(),[D,J.current])),ne=(0,j.useCallback)((function(e){t(),l(e.id),_({show:!0,source:le.bI.huggingface_value,current:e,width:600})}),[]),te=(0,j.useCallback)(function(){var n=p()(s()().mark((function n(t){var a;return s()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,H.NY)({data:u()({},U().omit(t,["size","quantization"]))});case 3:a=n.sent,(0,P.jz)(P.Kh,!1),_(u()(u()({},Y),{},{show:!1})),E.ZP.success(e.formatMessage({id:"common.message.success"})),T([a.id]),r("/models/list"),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}(),[Y]),ae=(0,j.useCallback)((function(e,n){G(u()(u()({},D),{},{page:e,perPage:n||10}))}),[D]),re=U().debounce((function(e){ee(u()(u()({},D),{},{page:1,search:e.target.value}))}),200);return(0,j.useEffect)((function(){ee()}),[]),(0,j.useEffect)((function(){var e=function(){var e=p()(s()().mark((function e(){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.documentElement||document.body,n.scrollTop+n.clientHeight>=n.scrollHeight-20&&ee(u()(u()({},D),{},{page:D.page+1}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[ee]),(0,C.jsxs)(L._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.modelCatalog"}),style:{paddingInline:"var(--layout-content-header-inlinepadding)"},breadcrumb:{}},extra:[],children:[(0,C.jsx)(F.Z,{marginBottom:22,left:(0,C.jsxs)(B.Z,{children:[(0,C.jsx)(I.Z,{placeholder:e.formatMessage({id:"common.filter.name"}),style:{width:230},size:"large",allowClear:!0,onClear:function(){return re({target:{value:""}})},onChange:re}),(0,C.jsx)(M.default,{allowClear:!0,showSearch:!1,placeholder:e.formatMessage({id:"models.filter.category"}),style:{width:180},size:"large",maxTagCount:1,onChange:function(e){ee(u()(u()({},D),{},{page:1,categories:e}))},options:$}),(0,C.jsx)(y.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},icon:(0,C.jsx)(q.Z,{}),onClick:function(e){ee(u()(u()({},D),{},{page:1}))}})]})}),(0,C.jsx)(he,{dataList:w.dataList,loading:w.loading,onDeploy:ne,activeId:-1,isFirst:f}),(0,C.jsx)(Z,{show:D.page<w.totalPage,loading:w.loading,loadMore:function(){ee(u()(u()({},D),{},{page:D.page+1}))}}),(0,C.jsx)(Be,{children:(0,C.jsx)(V.Z,{hideOnSinglePage:100===D.perPage,align:"end",defaultCurrent:1,total:w.total,pageSize:D.perPage,showSizeChanger:!0,onChange:ae})}),(0,C.jsx)(Ee,{open:Y.show,action:N.Kd.CREATE,title:e.formatMessage({id:"models.button.deploy"}),source:Y.source,width:Y.width,current:Y.current,onCancel:function(){_(u()(u()({},Y),{},{show:!1})),a(),l(-1)},onOk:te})]})}}}]);