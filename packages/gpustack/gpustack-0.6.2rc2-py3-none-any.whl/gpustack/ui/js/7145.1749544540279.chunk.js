"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7145],{58573:function(e,n,t){var a=t(26068),r=t.n(a),o=t(78093),l=t(87497),i=t(50959),u=t(11527),s=function(e){var n=e.message,t=e.type,a=e.rows,i=void 0===a?1:a,s=e.ellipsis,c=e.style;return(0,u.jsx)(u.Fragment,{children:n?(0,u.jsxs)(l.Z.Paragraph,{type:t,ellipsis:void 0!==s?s:{rows:i,tooltip:n},style:r()({textAlign:"center",padding:"2px 5px",borderRadius:"var(--border-radius-base)",margin:0,backgroundColor:"var(--ant-color-error-bg)"},c),children:[(0,u.jsx)(o.Z,{className:"m-r-8"}),n]}):null})};n.Z=i.memo(s)},59995:function(e,n,t){t.d(n,{U:function(){return l},Z:function(){return o}});var a=t(9532),r=t(50959);function o(){return a.Z.CancelToken.source}function l(){var e=a.Z.CancelToken.source,n=(0,r.useRef)(null);return(0,r.useEffect)((function(){return function(){n.current&&n.current.cancel()}}),[]),{updateCancelToken:function(){n.current&&n.current.cancel(),n.current=e()},cancelRequest:function(){n.current&&n.current.cancel()},getCanceltToken:function(){return n.current.token},source:e}}},63057:function(e,n,t){t.d(n,{Z:function(){return z}});var a=t(26068),r=t.n(a),o=t(90228),l=t.n(o),i=t(48305),u=t.n(i),s=t(335),c=t.n(s),d=t(87999),f=t.n(d),m=t(15558),p=t.n(m),h=t(43943),v=t(38551),g=t(8267),x=t(23333),y=t(85885),C=t(82187),_=t.n(C),b=t(50959),k=t(11527),w=function(e){var n=e.value,t=e.onChange,a=e.onSelect,o=e.style,l=e.label,i=e.placeholder,s=e.height,c=void 0===s?46:s,d=(0,v.useIntl)(),f=b.useRef(null),m=(0,b.useState)({minRows:1,maxRows:1,focus:!1}),p=u()(m,2),C=p[0],w=p[1],j=function(){w({minRows:3,maxRows:3,focus:!0}),setTimeout((function(){var e,n;null===(e=f.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e,{cursor:"end"})}),50)};return(0,k.jsxs)("div",{className:_()("row-textarea",{focus:C.focus}),style:r()({},o),children:[(0,k.jsxs)("div",{style:{display:C.focus?"block":"none"},className:"textarea-wrapper",children:[l&&(0,k.jsx)("span",{className:"textarea-label",children:l}),(0,k.jsx)(g.Z.TextArea,{className:"custome-scrollbar",ref:f,placeholder:i,style:{borderRadius:"0",border:"none"},value:n,autoSize:{minRows:C.minRows,maxRows:C.maxRows},onFocus:j,onBlur:function(e){w({minRows:2,maxRows:2,focus:!1})},allowClear:!1,onChange:function(e){null==t||t(e)},onSelect:function(e){e.stopPropagation();var t=e.target.selectionStart,r=e.target.selectionEnd,o=n.substring(0,t),l=n.substring(r,n.length);null==a||a({start:t,end:r,beforeText:o,afterText:l})},onPaste:function(n){var t;null===(t=e.onPaste)||void 0===t||t.call(e,n)}})]}),!C.focus&&(0,k.jsxs)("div",{className:"content-wrap",onClick:j,children:[(0,k.jsxs)("div",{className:"content",style:{height:c},children:[l&&(0,k.jsx)("span",{className:"title",children:l}),n||(0,k.jsx)("span",{style:{color:"var(--ant-color-text-tertiary)"},children:i})]}),n&&(0,k.jsx)(x.Z,{title:d.formatMessage({id:"common.button.clear"}),children:(0,k.jsx)(y.ZP,{className:"clear-btn",type:"text",icon:(0,k.jsx)(h.Z,{}),size:"small",onClick:function(){null==t||t({target:{value:""}})}})})]})]})},j=b.memo(w),S=t(69070),I=t(32699),R=t.n(I),P=(0,b.forwardRef)((function(e,n){var t=e.textList,a=e.showLabel,o=void 0===a||a,i=e.sortIndex,s=void 0===i?[]:i,d=e.sortable,m=e.height,h=e.onSort,g=e.onChange,C=e.extra,_=e.onPaste,w=e.onSelect,I=(0,v.useIntl)(),P=(0,b.useRef)(0),z=(0,b.useRef)(null),M=(0,b.useRef)([]),Z=function(){var e;M.current=Array.from((null===(e=z.current)||void 0===e?void 0:e.children)||[])},N=(0,b.useCallback)((function(e,n){var t=e.getBoundingClientRect(),a=n.getBoundingClientRect();return{x:a.left-t.left,y:a.top-t.top}}),[]),O=(0,b.useCallback)((function(e,n){var t=z.current;if(t){var a=Array.from(t.children);n>=a.length?t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e):t.insertBefore(e,a[n])}}),[]),F=function(e,n,t){if(n===t||n<0||t<0||n>=e.length||t>e.length)return e;var a=e.splice(n,1)[0];return e.splice(t>n?t-1:t,0,a),e},V=(0,b.useCallback)((function(){if(d&&(Z(),z.current)){var e=p()(t),n=s.map((function(e,n){var t=M.current[e],a=M.current[n];if(!t||!a)return null;var r=N(t,a);return{element:t,offset:{x:r.x,y:r.y},fromIndex:e,toIndex:n}})),a=function(){var t=f()(l()().mark((function t(){var a,r,o;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=c()(n.entries()),t.prev=1,o=l()().mark((function n(){var t,a,o,i,s,c;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=u()(r.value,2),t[0],a=t[1]){n.next=3;break}return n.abrupt("return",1);case 3:return o=a.element,i=a.offset,s=a.fromIndex,c=a.toIndex,n.next=7,new Promise((function(n){o.style.opacity=.5,o.style.transform="translate(".concat(i.x,"px, ").concat(i.y,"px)"),o.style.transition="transform 0.8s,opacity 0.8s",o.addEventListener("transitionend",(function(){O(o,c),F(e,s,c),Z(),o.style.opacity=1,o.style.transform="",n(null)}),{once:!0})}));case 7:case"end":return n.stop()}}),n)})),a.s();case 4:if((r=a.n()).done){t.next=10;break}return t.delegateYield(o(),"t0",6);case 6:if(!t.t0){t.next=8;break}return t.abrupt("continue",8);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t1=t.catch(1),a.e(t.t1);case 15:return t.prev=15,a.f(),t.finish(15);case 18:null==h||h(e);case 19:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(){return t.apply(this,arguments)}}();a()}}),[d,s,t,h,Z,N]),T=function(){return P.current=P.current+1,P.current},L=function(){T();var e=p()(t);e.push({text:"",uid:P.current,name:"Text ".concat(e.length+1)}),null==g||g(e)},U=function(e){var n=p()(t),a=n.findIndex((function(n){return n.uid===e.uid}));n.splice(a,1),null==g||g(n)},H=function(e,n){var a=p()(t),r=a.findIndex((function(e){return e.uid===n.uid}));a[r].text=e,null==g||g(a)},B=R().debounce(V,100);return(0,b.useEffect)((function(){null!=s&&s.length&&B()}),[s]),(0,b.useImperativeHandle)(n,(function(){return{handleAdd:L,handleDelete:U,handleTextChange:H,setMessageId:T}})),(0,k.jsx)("div",{className:"input-list",ref:z,children:t.map((function(e,n){return(0,k.jsxs)("div",{className:"input-item","data-uid":e.uid,children:[(0,k.jsx)("div",{className:"input-wrap",children:(0,k.jsx)(j,{height:m,label:o?"".concat(n+1):null,value:e.text,placeholder:I.formatMessage({id:"playground.embedding.inputyourtext"}),onChange:function(n){return H(n.target.value,e)},onPaste:function(e){return null==_?void 0:_(e,n)},onSelect:function(e){return null==w?void 0:w(r()(r()({},e),{},{index:n}))}})}),(0,k.jsx)("span",{className:"btn-group",children:(0,k.jsx)(x.Z,{title:I.formatMessage({id:"common.button.delete"}),children:(0,k.jsx)(y.ZP,{danger:!0,size:"small",type:"text",icon:(0,k.jsx)(S.Z,{}),onClick:function(){return U(e)}})})}),null==C?void 0:C(e)]},e.uid)}))})})),z=b.memo(P)},91860:function(e,n,t){var a=t(48305),r=t.n(a),o=t(76932),l=t(43585),i=t(90515),u=t(38551),s=t(1956),c=t(85885),d=t(50959),f=t(11527),m="bash",p="python",h="javascript",v=[{label:"Curl",value:m},{label:"Python",value:p},{label:"Nodejs",value:h}],g=function(e){var n=e||{},t=n.title,a=n.open,g=n.onCancel,x=n.viewCodeContent,y=(0,u.useIntl)(),C=(0,d.useState)(m),_=r()(C,2),b=_[0],k=_[1],w=(0,d.useMemo)((function(){return b===m?null==x?void 0:x.curlCode:b===h?null==x?void 0:x.nodeJsCode:b===p?null==x?void 0:x.pythonCode:""}),[b,x]);return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(s.Z,{title:t,open:a,centered:!0,onCancel:function(){k(m),g()},destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,footer:null,children:[(0,f.jsx)("div",{style:{marginBottom:"10px"},children:y.formatMessage({id:"playground.viewcode.info"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)(o.Z,{copyText:w,langOptions:v,defaultValue:m,showHeader:!0,onChangeLang:function(e){k(e)},styles:{wrapper:{backgroundColor:"var(--color-editor-dark)"}},children:(0,f.jsx)(l.Z,{height:380,theme:"dark",code:w,lang:b,copyable:!1})}),(0,f.jsxs)("div",{style:{marginTop:10,display:"flex",alignItems:"baseline"},children:[(0,f.jsx)(i.Z,{className:"m-r-8"}),(0,f.jsx)("span",{children:y.formatMessage({id:"playground.viewcode.tips"},{here:(0,f.jsx)(c.ZP,{type:"link",size:"small",href:"#/api-keys",target:"_blank",style:{paddingInline:2},children:(0,f.jsxs)("span",{children:[" ",y.formatMessage({id:"playground.viewcode.here"})]})})})})]})]})]})})};n.Z=d.memo(g)},26174:function(e,n,t){t.d(n,{Bx:function(){return l},Cb:function(){return s},Ho:function(){return i},Um:function(){return r},m3:function(){return u},m4:function(){return a},zv:function(){return o}});var a={seed:"seed",stop:"stop",temperature:"temperature",top_p:"top_p",n_ctx:"n_ctx",n_slot:"n_slot",max_model_len:"max_model_len",frequency_penalty:"frequency_penalty",presence_penalty:"presence_penalty",max_total_tokens:"max_total_tokens"},r=["temperature","top_p","frequency_penalty","presence_penalty"],o=["sample_method","sampling_steps","schedule_method","cfg_scale","guidance","negative_prompt","seed","strength"],l={seed:null,stop:null,temperature:1,top_p:1,max_tokens:null,frequency_penalty:null,presence_penalty:null},i={seed:null,sample_method:"euler_a",cfg_scale:4.5,guidance:3.5,sampling_steps:10,negative_prompt:null,strength:null,schedule_method:"discrete",preview:"preview_faster"},u={style:null},s={n:1,size:"512x512",width:512,height:512}},24662:function(e,n,t){t.d(n,{M:function(){return x},X:function(){return g}});var a=t(15558),r=t.n(a),o=t(26068),l=t.n(o),i=t(48305),u=t.n(i),s=t(38780),c=t(39121),d=t(38551),f=t(68476),m=t(32699),p=t.n(m),h=t(50959),v=t(26174),g=function(e,n){var t=e.modelList,a=e.model,r=e.isChat,o=n.metaKeys,i=void 0===o?{}:o,c=n.defaultValues,f=void 0===c?{}:c,m=n.defaultParamsConfig,g=void 0===m?[]:m,x=(0,h.useRef)(null),y=(0,d.useSearchParams)(),C=u()(y,1)[0],_=(0,h.useState)({}),b=u()(_,2),k=b[0],w=b[1],j=(0,h.useState)(l()(l()({},f),{},{model:""})),S=u()(j,2),I=S[0],R=S[1],P=(0,h.useState)({model:""}),z=u()(P,2),M=z[0],Z=z[1],N=(0,h.useState)(g),O=u()(N,2),F=O[0],V=O[1],T=(0,h.useRef)(null),L=(0,s.Z)().initialize,U=(0,h.useMemo)((function(){var e;return r?C.get("model")||a||(null==t||null===(e=t[0])||void 0===e?void 0:e.value):a}),[a,t,r]),H=function(e){var n=new Set(v.Um),t=e||{},a=p().pick(t,p().keys(i)),r=Object.entries(i).reduce((function(e,t){var r=u()(t,2),o=r[0],l=r[1],i=a[o];return p().hasIn(a,o)&&(e[l]=n.has(o)?p().round(i,2):i),e}),{}),o=function(e){var n=e||{},t=n.max_model_len,a=n.n_ctx,r=n.n_slot,o=n.max_total_tokens,l=0;return a&&r?l=p().divide(a,r):t?l=t:o&&(l=o),{max_tokens:l||16384,defaultFormValue:l?p().divide(l,2):1024}}(r);return{form:p().merge({},f,l()(l()({},p().omit(r,["n_ctx","n_slot","max_model_len","max_total_tokens"])),{},{seed:-1===r.seed?null:r.seed,max_tokens:o.defaultFormValue})),meta:l()(l()({},r),{},{max_tokens:o.max_tokens})}},B=(0,h.useMemo)((function(){var e=null==F?void 0:F.map((function(e){return e.name}));return null==e?void 0:e.join(",")}),[F]),E=(0,h.useCallback)((function(e){if(e){var n=t.find((function(n){return n.value===e})),a=H(null==n?void 0:n.meta),r=a.form,o=a.meta;w(o),R(l()(l()({},r),{},{model:e})),Z(l()(l()({},r),{},{model:e}));var i=g.map((function(e){return l()(l()({},e),{},{attrs:"max_tokens"===e.name?l()(l()({},e.attrs),{},{max:o.max_tokens}):l()({},e.attrs)})}));V(i)}}),[t,g]),A=(0,h.useCallback)((function(e,n){e.model?E(e.model):(Z(n),R(n))}),[E]);return(0,h.useEffect)((function(){U&&t.length&&E(U)}),[U,t.length]),(0,h.useEffect)((function(){T.current&&L(T.current)}),[L]),{extractLLMMeta:H,handleOnModelChange:E,handleOnValuesChange:A,setModelMeta:w,setInitialValues:R,setParams:Z,setParamsConfig:V,formRef:x,paramsConfig:F,initialValues:I,parameters:M,modelMeta:k,paramsRef:T,formFields:B}},x=function(e,n){var t,a=e.modelList,o="edit"===n.type?c.GF:c.GF.filter((function(e){return"strength"!==e.name})),i=(0,h.useRef)(null),s=(0,d.useSearchParams)(),m=u()(s,1)[0],g=(0,h.useState)({}),x=u()(g,2),y=x[0],C=x[1],_=(0,h.useState)(!1),b=u()(_,2),k=b[0],w=b[1],j=h.useState([]),S=u()(j,2),I=S[0],R=S[1],P=h.useState([].concat(r()(c.pL),r()(c.yU))),z=u()(P,2),M=z[0],Z=z[1],N=(0,h.useState)(l()(l()(l()({},v.Cb),v.Ho),{},{model:""})),O=u()(N,2),F=O[0],V=O[1],T=(0,h.useState)([].concat(r()(c.pL),r()(c.yU),r()(o))),L=u()(T,2),U=L[0],H=L[1],B=(0,h.useState)(l()(l()(l()({},v.Cb),v.Ho),{},{model:""})),E=u()(B,2),A=E[0],D=E[1],q=(0,h.useMemo)((function(){var e;return m.get("model")||(null==a||null===(e=a[0])||void 0===e?void 0:e.value)||""}),[a]),G=h.useRef(l()(l()(l()({},v.Cb),v.m3),v.Ho)),J=f.Z.useWatch("random_seed",null===(t=i.current)||void 0===t?void 0:t.form),Q=(0,h.useMemo)((function(){return["random_seed"]}),[J]),Y=function(e,n){if(n.length){var t=c.yU.map((function(e){return l()(l()({},e),{},{options:n})}));return[].concat(r()(c.pL),r()(t))}var a=e.meta||{},o=a.max_height,i=a.max_width,u=p().cloneDeep(c.Ci).map((function(e){var n="height"===e.name?o:i;return l()(l()({},e),{},{attrs:l()(l()({},e.attrs),{},{max:n||e.attrs.max})})}));return[].concat(r()(c.pL),r()(u))},K=function(e){var n=function(e){var n=e||{},t=n.max_height,a=n.max_width;if(!t||!a)return c.od;var r=c.od.filter((function(e){return e.width<=a&&e.height<=t||"custom"===e.value}));return r.find((function(e){return e.width===a&&e.height===t}))||r.push({width:a,height:t,label:"".concat(a,"x").concat(t),value:"".concat(a,"x").concat(t)}),r}(e);return{form:p().merge({},l()(l()({},v.Cb),v.Ho),l()(l()({},p().pick(e,v.zv)),{},{seed:-1===(null==e?void 0:e.seed)?null:null==e?void 0:e.seed,size:n.length?"".concat((null==e?void 0:e.default_width)||512,"x").concat((null==e?void 0:e.default_height)||512):"custom",width:(null==e?void 0:e.default_width)||512,height:(null==e?void 0:e.default_height)||512})),meta:e,sizeOptions:n}},W=function(e){return"custom"===e.size?[].concat(r()(M),r()(c.Ci),r()(e.isOpenaiCompatible?c.QU:o)):[].concat(r()(M),r()(e.isOpenaiCompatible?c.QU:o))},X=function(e){p().merge(G.current,e)},$=(0,h.useMemo)((function(){var e=null==U?void 0:U.map((function(e){return e.name}));return null==e?void 0:e.join(",")}),[U]),ee=(0,h.useCallback)((function(e){if(e){var n=a.find((function(n){return n.value===e})),t=K(null==n?void 0:n.meta),i=t.form,u=t.sizeOptions,s=Y(n,u);H(k?s:[].concat(r()(s),r()(o))),Z(s),R(u),C((null==n?void 0:n.meta)||{}),V(l()(l()({},i),{},{model:e})),D(l()(l()({},i),{},{model:e})),X(i)}}),[a,k]),ne=(0,h.useCallback)((function(e,n){var t;e.model?ee(e.model):e.size&&"custom"===e.size?(H([].concat(r()(M),r()(c.Ci),r()(k?c.QU:o))),D(l()(l()({},n),{},{width:y.default_width||512,height:y.default_height||512})),null===(t=i.current)||void 0===t||null===(t=t.form)||void 0===t||t.setFieldsValue({width:y.default_width||512,height:y.default_height||512}),X(e)):e.size&&"custom"===A.size?(H([].concat(r()(M),r()(k?c.QU:o))),D(n),X(e)):(D(n),X(e))}),[ee,A.size,M,k]);return(0,h.useEffect)((function(){q&&a.length&&ee(q)}),[q,a.length]),{extractIMGMeta:K,generateImageParamsConfig:Y,setImageSizeOptions:R,setBasicParamsConfig:Z,updateCacheFormData:X,handleOnValuesChange:ne,handleToggleParamsStyle:function(){var e,n={};n=k?p().pick(G.current,p().keys(l()(l()({},v.Cb),v.Ho))):p().pick(G.current,p().keys(l()(l()({},v.Cb),v.m3)));var t=W({size:n.size,isOpenaiCompatible:!k});null===(e=i.current)||void 0===e||null===(e=e.form)||void 0===e||e.setFieldsValue(l()(l()({},n),{},{model:A.model})),H(t),D(l()(l()({},n),{},{model:A.model})),w(!k),X(l()(l()({},n),{},{model:A}))},setParams:D,setInitialValues:V,updateParamsConfig:W,setParamsConfig:H,form:i,modelMeta:y,formFields:$,watchFields:Q,paramsConfig:U,initialValues:F,parameters:A,isOpenaiCompatible:k,cacheFormData:G,basicParamsConfig:M,imageSizeOptions:I,openaiCompatibleFieldsDefaultValus:v.m3,advancedFieldsDefaultValus:v.Ho,ImageAdvancedParamsConfig:o,imgInitialValues:v.Cb,ImageCountConfig:c.pL,ImageSizeConfig:c.yU,ImageCustomSizeConfig:c.Ci,ImageconstExtraConfig:c.QU}}},39616:function(e,n,t){t.d(n,{G4:function(){return c},GT:function(){return d},Yy:function(){return s}});var a=t(26068),r=t.n(a),o=t(31759),l=t.n(o),i=t(32699),u=t.n(i),s=function(e,n){return n?u().keys(e).reduce((function(n,t){var a=e[t],r="object"===l()(a)?JSON.stringify(a,null,2):"".concat(a);return n+"-F ".concat(t,'="').concat(r,'" \\\n')}),""):"-d '".concat(JSON.stringify(e,null,2),"'")},c=function(e){return u().keys(e).reduce((function(n,t){if(null===e[t]||void 0===e[t])return n;var a="object"===l()(e[t])?JSON.stringify(e[t],null,2):'"'.concat(e[t],'"');return n+"  ".concat(t,"=").concat(a,",\n")}),"")},d=function(e){return JSON.stringify(r()({},e),null,4)}},32314:function(){}}]);