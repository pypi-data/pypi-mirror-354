# =============================================================================
# ON1Builder â€“ Common Settings Configuration
# =============================================================================
# Global defaults and API configurations. Use environment variables for 
# sensitive data like API keys.
# =============================================================================

# Global Application Settings
global:
  log_level: "INFO"
  prometheus_port: 9090
  monitor_interval: 5
  tx_confirmation_blocks: 2
  max_retries: 3
  gas_price_multiplier: 1.1
  debug: false
  metrics_enabled: true
  monitoring_enabled: true
  notifications_enabled: true
  
# API Configuration (use environment variables for keys)
api:
  # External API Keys (set these in environment variables)
  infura_project_id: "${INFURA_PROJECT_ID}"
  alchemy_api_key: "${ALCHEMY_API_KEY}"  
  etherscan_api_key: "${ETHERSCAN_API_KEY}"
  coinmarketcap_api_key: "${COINMARKETCAP_API_KEY}"
  coingecko_api_key: "${COINGECKO_API_KEY}"
  
  # API Rate Limits
  rate_limits:
    infura: 100  # requests per second
    alchemy: 200
    etherscan: 5
    coinmarketcap: 10
    coingecko: 20

# Monitoring Settings
monitoring:
  mempool_polling_interval: 1.0
  block_polling_interval: 12.0
  price_update_interval: 60.0
  health_check_interval: 30.0
  metrics_retention_hours: 24

# Safety and Risk Management
safety:
  max_gas_price_gwei: 100
  slippage_tolerance: 0.005  # 0.5%
  circuit_breaker_enabled: true
  max_tx_value_eth: 10.0
  min_profit: 0.01  # Minimum profit threshold (ETH)
  min_balance: 0.1  # Minimum wallet balance (ETH)
  
# Database Settings
database:
  url: "${DATABASE_URL:-sqlite:///./on1builder.db}"
  pool_size: 10
  max_overflow: 20
  echo: false  # Set to true for SQL debug logging

# Notification Settings  
notifications:
  enabled: true
  slack_webhook: "${SLACK_WEBHOOK_URL}"
  discord_webhook: "${DISCORD_WEBHOOK_URL}"
  email_smtp_server: "${EMAIL_SMTP_SERVER}"
  email_username: "${EMAIL_USERNAME}"
  email_password: "${EMAIL_PASSWORD}"

# Transaction Settings
transactions:
  retry_count: 3
  retry_delay: 2.0
  max_gas_price: 50000000000  # 50 gwei
  gas_limit_buffer: 1.2  # 20% buffer on gas estimates
  
# Connection Settings
connections:
  retry_count: 3
  retry_delay: 1.0
  web3_max_retries: 3
mempool_retry_delay: 0.5
mempool_max_retries: 5
mempool_max_parallel_tasks: 10

# Safety Settings
safetynet_cache_ttl: 300  # 5 minutes
safetynet_gas_price_ttl: 60  # 1 minute

# System Settings
memory_check_interval: 30  # seconds
market_cache_ttl: 60  # seconds

# Database Settings
database:
  url: "sqlite+aiosqlite:///on1builder.db"
  echo: false
  pool_size: 5
  max_overflow: 10

# API Settings (keys should be set via environment variables)
api:
  # External API configuration
  # Set these via environment variables:
  # COINGECKO_API_KEY, ETHERSCAN_API_KEY, etc.
  rate_limits:
    coingecko: 100  # requests per minute
    etherscan: 200  # requests per minute
    coinmarketcap: 333  # requests per minute

# Notification Settings
notifications:
  enabled: true
  channels:
    - "console"
    # - "discord"  # Configure via environment variables
    # - "telegram"  # Configure via environment variables

# Strategy Settings
strategies:
  enabled: true
  validation_on_startup: true
  weights_file: "src/on1builder/resources/ml_models/strategy_weights.json"
