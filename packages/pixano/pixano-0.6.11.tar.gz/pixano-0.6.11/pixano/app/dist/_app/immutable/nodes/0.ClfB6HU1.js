import{s as y,I as F,O,H as ee,J as te,K as ne,L as le,d as b,w as D,i as L,b as C,A as je,c as H,e as j,g as V,h as R,j as A,k as X,n as ce,z as Ke,E as Ue,o as _e,q as vt,m as kt,f as se,t as oe,a as me,Q as Lt,F as Vt,B as Ge,C as ye,a8 as At}from"../chunks/DCD4EaBV.js";import{S as Z,i as J,d as w,t as g,a as d,m as I,e as T,b as S,g as Y,c as x}from"../chunks/D7AglyOH.js";import{D as Ht,g as re,a as ae,e as pe,l as Rt,W as Ze,c as we,m as Ft,n as Pe,o as jt,p as Ae,d as He,q as Je,r as Qe,t as Kt}from"../chunks/Dq7w9KKs.js";import{c as ue}from"../chunks/DPkO8WLB.js";import{k as Ut,p as Xe,S as wt,a as Ot,c as zt,b as Bt,d as qt,C as Wt}from"../chunks/BmvKZyjH.js";import{T as q,C as It,P as Tt}from"../chunks/Dyt55gby.js";import{p as Gt}from"../chunks/B9u33kEZ.js";import{f as St,T as K,a as yt,b as Ye,c as xe,e as Zt,s as ge,d as Dt,k as Et,g as Se,t as Re,n as Fe,p as Ne,h as Nt,i as Mt,j as Jt,l as ke,o as De,q as Ee,m as et}from"../chunks/Clou9sU4.js";import{I as ie,L as Qt,a as Xt}from"../chunks/C4TYOqPF.js";import{g as Le}from"../chunks/Ld4anDBO.js";import{p as Me}from"../chunks/DSSDOBGY.js";const Yt=!1,xt=!1,es=Object.freeze(Object.defineProperty({__proto__:null,prerender:Yt,ssr:xt},Symbol.toStringTag,{value:"Module"}));async function tt(o,e=void 0){const l=[];let n="";e&&e!==""&&(n=`&where=${e}`);for(let s=0;;s+=1e3)try{const r=await fetch(`/items/${o}/?limit=1000&skip=${s}${n}`);if(r.ok){const i=await r.json();if(l.push(...i.map(a=>a.id)),i&&i.length<1e3)break}else{r.status!=404&&console.log("api.getDatasetItemsIds -",r.status,r.statusText,await r.text());break}}catch(r){console.log("api.getDatasetItemsIds -",r)}return l}async function en(){let o,e;try{const l=await fetch("/datasets/info");l.ok?(o=await l.json(),e=o.map(t=>new Ht(t))):(e=[],console.log("api.getDatasetsInfo -",l.status,l.statusText,await l.text()))}catch(l){e=[],console.log("api.getDatasetsInfo -",l)}return e}async function tn(){let o;try{const e=await fetch("/models");e.ok?o=await e.json():(o=[],console.log("api.getModels -",e.status,e.statusText))}catch(e){o=[],console.log("api.getModels -",e)}return o}function nn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function ln(o){let e,l;const t=[{name:"arrow-left-circle"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[nn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function sn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M16 12H8"}],["path",{d:"m12 8-4 4 4 4"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class on extends Z{constructor(e){super(),J(this,e,sn,ln,y,{})}}function rn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function an(o){let e,l;const t=[{name:"arrow-left"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[rn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function fn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class cn extends Z{constructor(e){super(),J(this,e,fn,an,y,{})}}function un(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function mn(o){let e,l;const t=[{name:"arrow-right"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[un]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function $n(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class dn extends Z{constructor(e){super(),J(this,e,$n,mn,y,{})}}function gn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function _n(o){let e,l;const t=[{name:"database"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[gn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function pn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class hn extends Z{constructor(e){super(),J(this,e,pn,_n,y,{})}}function bn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function vn(o){let e,l;const t=[{name:"home"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[bn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function kn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["polyline",{points:"9 22 9 12 15 12 15 22"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class Ct extends Z{constructor(e){super(),J(this,e,kn,vn,y,{})}}function wn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function In(o){let e,l;const t=[{name:"minus-circle"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[wn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Tn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class Sn extends Z{constructor(e){super(),J(this,e,Tn,In,y,{})}}function Dn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function En(o){let e,l;const t=[{name:"mouse-pointer"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Dn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Nn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}],["path",{d:"m13 13 6 6"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class Mn extends Z{constructor(e){super(),J(this,e,Nn,En,y,{})}}function Cn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Pn(o){let e,l;const t=[{name:"plus-circle"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Cn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ln(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class Vn extends Z{constructor(e){super(),J(this,e,Ln,Pn,y,{})}}function An(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Hn(o){let e,l;const t=[{name:"replace-all"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[An]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Rn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M14 4c0-1.1.9-2 2-2"}],["path",{d:"M20 2c1.1 0 2 .9 2 2"}],["path",{d:"M22 8c0 1.1-.9 2-2 2"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2"}],["path",{d:"m3 7 3 3 3-3"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2"}],["path",{d:"M14 14c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2"}],["path",{d:"M20 14c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class Fn extends Z{constructor(e){super(),J(this,e,Rn,Hn,y,{})}}function jn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Kn(o){let e,l;const t=[{name:"wand-2"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[jn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Un(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class On extends Z{constructor(e){super(),J(this,e,Un,Kn,y,{})}}function zn(o){let e;const l=o[2].default,t=ee(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Bn(o){let e,l;const t=[{name:"x"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[zn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=F(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,[r]){const i=r&3?re(t,[t[0],r&2&&ae(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function qn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return o.$$set=r=>{l(1,e=F(F({},e),O(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=O(e),[s,e,t,n]}class Pt extends Z{constructor(e){super(),J(this,e,qn,Bn,y,{})}}const Wn=""+new URL("../assets/favicon.OuiISzV3.ico",import.meta.url).href;function Gn(o){let e,l;return e=new Fn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function nt(o){let e,l,t,n;return e=new q({props:{tooltipContent:"Validate association (Enter)",selected:!1,$$slots:{default:[yn]},$$scope:{ctx:o}}}),e.$on("click",o[2]),t=new q({props:{tooltipContent:"Abort association (Escape)",selected:!1,$$slots:{default:[Zn]},$$scope:{ctx:o}}}),t.$on("click",o[3]),{c(){S(e.$$.fragment),l=A(),S(t.$$.fragment)},l(s){T(e.$$.fragment,s),l=V(s),T(t.$$.fragment,s)},m(s,r){I(e,s,r),L(s,l,r),I(t,s,r),n=!0},p(s,r){const i={};r&256&&(i.$$scope={dirty:r,ctx:s}),e.$set(i);const a={};r&256&&(a.$$scope={dirty:r,ctx:s}),t.$set(a)},i(s){n||(d(e.$$.fragment,s),d(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&b(l),w(e,s),w(t,s)}}}function yn(o){let e,l;return e=new It({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Zn(o){let e,l;return e=new Pt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Jn(o){var $,c;let e,l,t,n,s,r,i;l=new q({props:{tooltipContent:St.name,selected:(($=o[1])==null?void 0:$.type)===K.Fusion,$$slots:{default:[Gn]},$$scope:{ctx:o}}}),l.$on("click",o[6]);let a=((c=o[1])==null?void 0:c.type)===K.Fusion&&nt(o);return{c(){e=R("div"),S(l.$$.fragment),t=A(),a&&a.c(),this.h()},l(m){e=H(m,"DIV",{class:!0});var u=j(e);T(l.$$.fragment,u),t=V(u),a&&a.l(u),u.forEach(b),this.h()},h(){var m;D(e,"class",n=ue("flex items-center gap-4",{"bg-slate-200 rounded-sm":((m=o[1])==null?void 0:m.type)===K.Fusion}))},m(m,u){L(m,e,u),I(l,e,null),C(e,t),a&&a.m(e,null),s=!0,r||(i=je(window,"keydown",o[4]),r=!0)},p(m,[u]){var E,_,f;const k={};u&2&&(k.selected=((E=m[1])==null?void 0:E.type)===K.Fusion),u&256&&(k.$$scope={dirty:u,ctx:m}),l.$set(k),((_=m[1])==null?void 0:_.type)===K.Fusion?a?(a.p(m,u),u&2&&d(a,1)):(a=nt(m),a.c(),d(a,1),a.m(e,null)):a&&(Y(),g(a,1,1,()=>{a=null}),x()),(!s||u&2&&n!==(n=ue("flex items-center gap-4",{"bg-slate-200 rounded-sm":((f=m[1])==null?void 0:f.type)===K.Fusion})))&&D(e,"class",n)},i(m){s||(d(l.$$.fragment,m),d(a),s=!0)},o(m){g(l.$$.fragment,m),g(a),s=!1},d(m){m&&b(e),w(l),a&&a.d(),r=!1,i()}}}function Qn(o,e,l){let t,n;X(o,ge,m=>l(1,t=m)),X(o,Dt,m=>l(7,n=m));let{selectTool:s}=e,{clearFusionHighlighting:r}=e;const i=()=>{let m=[];if(n.to_fuse.length>1){const[u,...k]=n.to_fuse;k.forEach(E=>{E.ui.childs&&(m=[...m,...E.ui.childs])}),yt.update(E=>E.map(_=>{if(m.includes(_)){if(_.ui.top_entities&&_.ui.top_entities.length>0&&_.data.entity_ref.id!==_.ui.top_entities[0].id)return console.error("ERROR: Sub entities currently not managed for fusion.",_),_;_.data.entity_ref={id:u.id,name:u.table_info.name},_.ui.top_entities=[u];const f={change_type:"update",object:_};Ye.update(p=>xe(p,f))}return _})),Zt.update(E=>{const _=E.filter(f=>!k.includes(f));return _.length>0&&_.map(f=>(f.id===u.id&&(f.ui.childs=f.ui.childs?[...f.ui.childs,...m]:m),f)),_}),k.forEach(E=>{const _={change_type:"delete",object:E};Ye.update(f=>xe(f,_))})}r()},a=()=>{r()};function $(m){if((t==null?void 0:t.type)!==K.Fusion)return;const u=document.activeElement;if(!(u instanceof HTMLInputElement||u instanceof HTMLTextAreaElement||(u==null?void 0:u.getAttribute("contenteditable"))==="true"))switch(m.key){case"Escape":a();break;case"Enter":i();break}}const c=()=>s(St);return o.$$set=m=>{"selectTool"in m&&l(0,s=m.selectTool),"clearFusionHighlighting"in m&&l(5,r=m.clearFusionHighlighting)},[s,t,i,a,$,r,c]}class Xn extends Z{constructor(e){super(),J(this,e,Qn,Jn,y,{selectTool:0,clearFusionHighlighting:5})}}function lt(o,e,l){const t=o.slice();return t[7]=e[l],t}function st(o,e,l){const t=o.slice();return t[10]=e[l],t}function Yn(o){let e,l;return{c(){e=R("img"),this.h()},l(t){e=H(t,"IMG",{src:!0,alt:!0}),this.h()},h(){Ke(e.src,l=Ut)||D(e,"src",l),D(e,"alt","keypoints icon")},m(t,n){L(t,e,n)},p:ce,d(t){t&&b(e)}}}function ot(o){let e,l,t=pe(Re),n=[];for(let r=0;r<t.length;r+=1)n[r]=at(lt(o,t,r));const s=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=_e()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=_e()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);L(r,e,i),l=!0},p(r,i){if(i&28){t=pe(Re);let a;for(a=0;a<t.length;a+=1){const $=lt(r,t,a);n[a]?(n[a].p($,i),d(n[a],1)):(n[a]=at($),n[a].c(),d(n[a],1),n[a].m(e.parentNode,e))}for(Y(),a=t.length;a<n.length;a+=1)s(a);x()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)d(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)g(n[i]);l=!1},d(r){r&&b(e),Ue(n,r)}}}function rt(o){let e,l,t;return{c(){e=R("div"),l=R("div"),this.h()},l(n){e=H(n,"DIV",{});var s=j(e);l=H(s,"DIV",{class:!0,style:!0}),j(l).forEach(b),s.forEach(b),this.h()},h(){D(l,"class","w-1 h-1 bg-primary rounded-full absolute"),D(l,"style",t=`top: ${o[10].y*100}%; left: ${o[10].x*100}%; background: ${o[3](o[10],o[7].template_id===o[2])}`)},m(n,s){L(n,e,s),C(e,l)},p(n,s){s&4&&t!==(t=`top: ${n[10].y*100}%; left: ${n[10].x*100}%; background: ${n[3](n[10],n[7].template_id===n[2])}`)&&D(l,"style",t)},d(n){n&&b(e)}}}function xn(o){let e,l=pe(o[7].vertices),t=[];for(let n=0;n<l.length;n+=1)t[n]=rt(st(o,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=A()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=V(n)},m(n,s){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(n,s);L(n,e,s)},p(n,s){if(s&12){l=pe(n[7].vertices);let r;for(r=0;r<l.length;r+=1){const i=st(n,l,r);t[r]?t[r].p(i,s):(t[r]=rt(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(n){n&&b(e),Ue(t,n)}}}function at(o){let e,l;function t(){return o[6](o[7])}return e=new q({props:{tooltipContent:o[7].template_id,selected:o[2]===o[7].template_id,$$slots:{default:[xn]},$$scope:{ctx:o}}}),e.$on("click",t),{c(){S(e.$$.fragment)},l(n){T(e.$$.fragment,n)},m(n,s){I(e,n,s),l=!0},p(n,s){o=n;const r={};s&4&&(r.selected=o[2]===o[7].template_id),s&8196&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(n){l||(d(e.$$.fragment,n),l=!0)},o(n){g(e.$$.fragment,n),l=!1},d(n){w(e,n)}}}function el(o){var i;let e,l,t,n,s;l=new q({props:{tooltipContent:Et.name,$$slots:{default:[Yn]},$$scope:{ctx:o}}}),l.$on("click",o[5]);let r=((i=o[1])==null?void 0:i.type)===K.Keypoint&&ot(o);return{c(){e=R("div"),S(l.$$.fragment),t=A(),r&&r.c(),this.h()},l(a){e=H(a,"DIV",{class:!0});var $=j(e);T(l.$$.fragment,$),t=V($),r&&r.l($),$.forEach(b),this.h()},h(){var a;D(e,"class",n=ue("flex items-center gap-4",{"bg-slate-200 rounded-sm":((a=o[1])==null?void 0:a.type)===K.Keypoint}))},m(a,$){L(a,e,$),I(l,e,null),C(e,t),r&&r.m(e,null),s=!0},p(a,[$]){var m,u;const c={};$&8192&&(c.$$scope={dirty:$,ctx:a}),l.$set(c),((m=a[1])==null?void 0:m.type)===K.Keypoint?r?(r.p(a,$),$&2&&d(r,1)):(r=ot(a),r.c(),d(r,1),r.m(e,null)):r&&(Y(),g(r,1,1,()=>{r=null}),x()),(!s||$&2&&n!==(n=ue("flex items-center gap-4",{"bg-slate-200 rounded-sm":((u=a[1])==null?void 0:u.type)===K.Keypoint})))&&D(e,"class",n)},i(a){s||(d(l.$$.fragment,a),d(r),s=!0)},o(a){g(l.$$.fragment,a),g(r),s=!1},d(a){a&&b(e),w(l),r&&r.d()}}}function tl(o,e,l){let t,n;X(o,ge,c=>l(1,t=c)),X(o,Se,c=>l(2,n=c));let{selectTool:s}=e;const r=(c,m)=>{var u;if((u=c.features)!=null&&u.color)return c.features.color;if(m)return"white"},i=c=>{Se.set(c),Fe.set({status:"none"})};ge.subscribe(c=>{(c==null?void 0:c.type)!==K.Keypoint?Se.set(null):Se.set(Re[0].template_id)});const a=()=>s(Et),$=c=>i(c.template_id);return o.$$set=c=>{"selectTool"in c&&l(0,s=c.selectTool)},[s,t,n,r,i,a,$]}class nl extends Z{constructor(e){super(),J(this,e,tl,el,y,{selectTool:0})}}function ll(o){let e,l;return e=new Mn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sl(o){let e,l;return e=new wt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ol(o){let e,l;return{c(){e=R("img"),this.h()},l(t){e=H(t,"IMG",{src:!0,alt:!0}),this.h()},h(){Ke(e.src,l=Ot)||D(e,"src",l),D(e,"alt","polygon icon")},m(t,n){L(t,e,n)},p:ce,d(t){t&&b(e)}}}function it(o){let e,l;return e=new Xn({props:{selectTool:o[8],clearFusionHighlighting:o[7]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p:ce,i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function rl(o){let e,l;return e=new On({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ft(o){var k,E,_;let e,l,t,n,s,r,i,a,$,c,m;e=new q({props:{tooltipContent:o[2].name,selected:((k=o[1])==null?void 0:k.type)===K.PointSelection&&!!o[1].label,$$slots:{default:[al]},$$scope:{ctx:o}}}),e.$on("click",o[16]),t=new q({props:{tooltipContent:o[3].name,selected:((E=o[1])==null?void 0:E.type)===K.PointSelection&&!o[1].label,$$slots:{default:[il]},$$scope:{ctx:o}}}),t.$on("click",o[17]),s=new q({props:{tooltipContent:o[4].name,selected:((_=o[1])==null?void 0:_.type)===K.Rectangle&&o[1].isSmart,$$slots:{default:[fl]},$$scope:{ctx:o}}}),s.$on("click",o[18]);let u=o[0]&&o[6].mustValidate&&ct(o);return c=new q({props:{tooltipContent:"Smart segmentation model settings",$$slots:{default:[ml]},$$scope:{ctx:o}}}),c.$on("click",o[20]),{c(){S(e.$$.fragment),l=A(),S(t.$$.fragment),n=A(),S(s.$$.fragment),r=A(),u&&u.c(),i=A(),a=R("div"),$=A(),S(c.$$.fragment),this.h()},l(f){T(e.$$.fragment,f),l=V(f),T(t.$$.fragment,f),n=V(f),T(s.$$.fragment,f),r=V(f),u&&u.l(f),i=V(f),a=H(f,"DIV",{class:!0}),j(a).forEach(b),$=V(f),T(c.$$.fragment,f),this.h()},h(){D(a,"class","w-1 -m-3.5 h-full bg-primary-light")},m(f,p){I(e,f,p),L(f,l,p),I(t,f,p),L(f,n,p),I(s,f,p),L(f,r,p),u&&u.m(f,p),L(f,i,p),L(f,a,p),L(f,$,p),I(c,f,p),m=!0},p(f,p){var M,P,h;const v={};p&4&&(v.tooltipContent=f[2].name),p&2&&(v.selected=((M=f[1])==null?void 0:M.type)===K.PointSelection&&!!f[1].label),p&16777216&&(v.$$scope={dirty:p,ctx:f}),e.$set(v);const N={};p&8&&(N.tooltipContent=f[3].name),p&2&&(N.selected=((P=f[1])==null?void 0:P.type)===K.PointSelection&&!f[1].label),p&16777216&&(N.$$scope={dirty:p,ctx:f}),t.$set(N);const U={};p&16&&(U.tooltipContent=f[4].name),p&2&&(U.selected=((h=f[1])==null?void 0:h.type)===K.Rectangle&&f[1].isSmart),p&16777216&&(U.$$scope={dirty:p,ctx:f}),s.$set(U),f[0]&&f[6].mustValidate?u?(u.p(f,p),p&65&&d(u,1)):(u=ct(f),u.c(),d(u,1),u.m(i.parentNode,i)):u&&(Y(),g(u,1,1,()=>{u=null}),x());const z={};p&16777216&&(z.$$scope={dirty:p,ctx:f}),c.$set(z)},i(f){m||(d(e.$$.fragment,f),d(t.$$.fragment,f),d(s.$$.fragment,f),d(u),d(c.$$.fragment,f),m=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(s.$$.fragment,f),g(u),g(c.$$.fragment,f),m=!1},d(f){f&&(b(l),b(n),b(r),b(i),b(a),b($)),w(e,f),w(t,f),w(s,f),u&&u.d(f),w(c,f)}}}function al(o){let e,l;return e=new Vn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function il(o){let e,l;return e=new Sn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function fl(o){let e,l;return e=new wt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ct(o){let e,l,t,n;return e=new q({props:{tooltipContent:"Track",selected:!1,$$slots:{default:[cl]},$$scope:{ctx:o}}}),e.$on("click",o[19]),t=new q({props:{tooltipContent:"Abort tracking (Escape)",selected:!1,$$slots:{default:[ul]},$$scope:{ctx:o}}}),t.$on("click",o[10]),{c(){S(e.$$.fragment),l=A(),S(t.$$.fragment)},l(s){T(e.$$.fragment,s),l=V(s),T(t.$$.fragment,s)},m(s,r){I(e,s,r),L(s,l,r),I(t,s,r),n=!0},p(s,r){const i={};r&16777216&&(i.$$scope={dirty:r,ctx:s}),e.$set(i);const a={};r&16777216&&(a.$$scope={dirty:r,ctx:s}),t.$set(a)},i(s){n||(d(e.$$.fragment,s),d(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&b(l),w(e,s),w(t,s)}}}function cl(o){let e,l;return e=new It({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ul(o){let e,l;return e=new Pt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ml(o){let e,l;return e=new Bt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $l(o){var N,U,z;let e,l,t,n,s,r,i,a,$,c,m,u,k,E,_,f;t=new q({props:{tooltipContent:Ne.name,selected:((N=o[1])==null?void 0:N.type)===K.Pan,$$slots:{default:[ll]},$$scope:{ctx:o}}}),t.$on("click",o[13]),s=new q({props:{tooltipContent:Nt.name,selected:((U=o[1])==null?void 0:U.type)===K.Rectangle&&!o[1].isSmart,$$slots:{default:[sl]},$$scope:{ctx:o}}}),s.$on("click",o[14]),i=new q({props:{tooltipContent:Mt.name,selected:((z=o[1])==null?void 0:z.type)===K.Polygon,$$slots:{default:[ol]},$$scope:{ctx:o}}}),i.$on("click",o[15]),$=new nl({props:{selectTool:o[8]}});let p=o[0]&&it(o);k=new q({props:{tooltipContent:"Use a smart segmentation model",$$slots:{default:[rl]},$$scope:{ctx:o}}}),k.$on("click",o[9]);let v=o[5]&&ft(o);return{c(){e=R("div"),l=R("div"),S(t.$$.fragment),n=A(),S(s.$$.fragment),r=A(),S(i.$$.fragment),a=A(),S($.$$.fragment),c=A(),p&&p.c(),m=A(),u=R("div"),S(k.$$.fragment),E=A(),v&&v.c(),this.h()},l(M){e=H(M,"DIV",{class:!0});var P=j(e);l=H(P,"DIV",{class:!0});var h=j(l);T(t.$$.fragment,h),n=V(h),T(s.$$.fragment,h),r=V(h),T(i.$$.fragment,h),a=V(h),T($.$$.fragment,h),c=V(h),p&&p.l(h),h.forEach(b),m=V(P),u=H(P,"DIV",{class:!0});var B=j(u);T(k.$$.fragment,B),E=V(B),v&&v.l(B),B.forEach(b),P.forEach(b),this.h()},h(){D(l,"class","flex items-center gap-4"),D(u,"class",_=ue("flex items-center gap-4",{"bg-slate-200 rounded-sm":o[5]})),D(e,"class","flex gap-4 z-10")},m(M,P){L(M,e,P),C(e,l),I(t,l,null),C(l,n),I(s,l,null),C(l,r),I(i,l,null),C(l,a),I($,l,null),C(l,c),p&&p.m(l,null),C(e,m),C(e,u),I(k,u,null),C(u,E),v&&v.m(u,null),f=!0},p(M,[P]){var $e,he,be;const h={};P&2&&(h.selected=(($e=M[1])==null?void 0:$e.type)===K.Pan),P&16777216&&(h.$$scope={dirty:P,ctx:M}),t.$set(h);const B={};P&2&&(B.selected=((he=M[1])==null?void 0:he.type)===K.Rectangle&&!M[1].isSmart),P&16777216&&(B.$$scope={dirty:P,ctx:M}),s.$set(B);const W={};P&2&&(W.selected=((be=M[1])==null?void 0:be.type)===K.Polygon),P&16777216&&(W.$$scope={dirty:P,ctx:M}),i.$set(W),M[0]?p?(p.p(M,P),P&1&&d(p,1)):(p=it(M),p.c(),d(p,1),p.m(l,null)):p&&(Y(),g(p,1,1,()=>{p=null}),x());const fe={};P&16777216&&(fe.$$scope={dirty:P,ctx:M}),k.$set(fe),M[5]?v?(v.p(M,P),P&32&&d(v,1)):(v=ft(M),v.c(),d(v,1),v.m(u,null)):v&&(Y(),g(v,1,1,()=>{v=null}),x()),(!f||P&32&&_!==(_=ue("flex items-center gap-4",{"bg-slate-200 rounded-sm":M[5]})))&&D(u,"class",_)},i(M){f||(d(t.$$.fragment,M),d(s.$$.fragment,M),d(i.$$.fragment,M),d($.$$.fragment,M),d(p),d(k.$$.fragment,M),d(v),f=!0)},o(M){g(t.$$.fragment,M),g(s.$$.fragment,M),g(i.$$.fragment,M),g($.$$.fragment,M),g(p),g(k.$$.fragment,M),g(v),f=!1},d(M){M&&b(e),w(t),w(s),w(i),w($),p&&p.d(),w(k),v&&v.d()}}}function dl(o,e,l){let t,n,s,r,i,a;X(o,ge,h=>l(1,n=h)),X(o,qt,h=>l(21,s=h)),X(o,Rt,h=>l(22,r=h)),X(o,et,h=>l(23,i=h)),X(o,Xe,h=>l(6,a=h));let{isVideo:$=!1}=e,c=null;const m=()=>{zt(),Dt.set({to_fuse:[],forbids:[]})},u=h=>{h!==n&&(m(),ge.set(h))},k=()=>{t?u(Ne):(u(ke),(r&&(i.selectedModelName===""||i.selectedTableName==="")||!r&&s.filter(h=>h.selected).length>0)&&_())},E=()=>{Fe.set({status:"none",shouldReset:!0})},_=()=>{et.update(h=>({...h,currentModalOpen:"selectModel"}))};Jt.subscribe(h=>{h&&(l(2,ke.postProcessor=h,ke),l(3,De.postProcessor=h,De),l(4,Ee.postProcessor=h,Ee))}),vt(()=>{n===void 0&&ge.set(Ne),m()});const f=()=>u(Ne),p=()=>u(Nt),v=()=>u(Mt),N=()=>u(ke),U=()=>u(De),z=()=>u(Ee),M=()=>Xe.set({...a,validated:!0}),P=()=>_();return o.$$set=h=>{"isVideo"in h&&l(0,$=h.isVideo)},o.$$.update=()=>{o.$$.dirty&2&&l(5,t=n&&n.isSmart),o.$$.dirty&4098&&((!(c!=null&&c.isSmart)||!(n!=null&&n.isSmart))&&Fe.set({status:"none"}),l(12,c=n))},[$,n,ke,De,Ee,t,a,m,u,k,E,_,c,f,p,v,N,U,z,M,P]}class gl extends Z{constructor(e){super(),J(this,e,dl,$l,y,{isVideo:0})}}function ut(o){let e,l,t,n;const s=[pl,_l],r=[];function i(a,$){return a[1]?0:1}return e=i(o),l=r[e]=s[e](o),{c(){l.c(),t=_e()},l(a){l.l(a),t=_e()},m(a,$){r[e].m(a,$),L(a,t,$),n=!0},p(a,$){let c=e;e=i(a),e===c?r[e].p(a,$):(Y(),g(r[c],1,1,()=>{r[c]=null}),x(),l=r[e],l?l.p(a,$):(l=r[e]=s[e](a),l.c()),d(l,1),l.m(t.parentNode,t))},i(a){n||(d(l),n=!0)},o(a){g(l),n=!1},d(a){a&&b(t),r[e].d(a)}}}function _l(o){let e,l,t,n,s,r,i,a,$,c,m,u,k=o[6]()+"",E,_,f,p;return l=new q({props:{tooltipContent:"Back to Home",$$slots:{default:[hl]},$$scope:{ctx:o}}}),l.$on("click",o[9]),n=new q({props:{tooltipContent:"Back to dataset",$$slots:{default:[bl]},$$scope:{ctx:o}}}),n.$on("click",function(){kt(o[3])&&o[3].apply(this,arguments)}),a=new q({props:{tooltipContent:"Previous item (shift + left arrow)",$$slots:{default:[vl]},$$scope:{ctx:o}}}),a.$on("click",o[10]),c=new q({props:{tooltipContent:"Next item (shift + right arrow)",$$slots:{default:[kl]},$$scope:{ctx:o}}}),c.$on("click",o[11]),f=new gl({props:{isVideo:o[7].workspace==Ze.VIDEO}}),{c(){e=R("div"),S(l.$$.fragment),t=A(),S(n.$$.fragment),s=A(),r=oe(o[0]),i=A(),S(a.$$.fragment),$=A(),S(c.$$.fragment),m=A(),u=R("span"),E=oe(k),_=A(),S(f.$$.fragment),this.h()},l(v){e=H(v,"DIV",{class:!0});var N=j(e);T(l.$$.fragment,N),t=V(N),T(n.$$.fragment,N),s=V(N),r=se(N,o[0]),i=V(N),T(a.$$.fragment,N),$=V(N),T(c.$$.fragment,N),m=V(N),u=H(N,"SPAN",{});var U=j(u);E=se(U,k),U.forEach(b),N.forEach(b),_=V(v),T(f.$$.fragment,v),this.h()},h(){D(e,"class","flex items-center gap-4")},m(v,N){L(v,e,N),I(l,e,null),C(e,t),I(n,e,null),C(e,s),C(e,r),C(e,i),I(a,e,null),C(e,$),I(c,e,null),C(e,m),C(e,u),C(u,E),L(v,_,N),I(f,v,N),p=!0},p(v,N){o=v;const U={};N&4096&&(U.$$scope={dirty:N,ctx:o}),l.$set(U);const z={};N&4096&&(z.$$scope={dirty:N,ctx:o}),n.$set(z),(!p||N&1)&&me(r,o[0]);const M={};N&4096&&(M.$$scope={dirty:N,ctx:o}),a.$set(M);const P={};N&4096&&(P.$$scope={dirty:N,ctx:o}),c.$set(P),(!p||N&64)&&k!==(k=o[6]()+"")&&me(E,k);const h={};N&128&&(h.isVideo=o[7].workspace==Ze.VIDEO),f.$set(h)},i(v){p||(d(l.$$.fragment,v),d(n.$$.fragment,v),d(a.$$.fragment,v),d(c.$$.fragment,v),d(f.$$.fragment,v),p=!0)},o(v){g(l.$$.fragment,v),g(n.$$.fragment,v),g(a.$$.fragment,v),g(c.$$.fragment,v),g(f.$$.fragment,v),p=!1},d(v){v&&(b(e),b(_)),w(l),w(n),w(a),w(c),w(f,v)}}}function pl(o){let e,l;return e=new Qt({props:{class:"animate-spin"}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p:ce,i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function hl(o){let e,l;return e=new Ct({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function bl(o){let e,l;return e=new on({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function vl(o){let e,l;return e=new cn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function kl(o){let e,l;return e=new dn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function wl(o){let e;return{c(){e=oe("Save")},l(l){e=se(l,"Save")},m(l,t){L(l,e,t)},d(l){l&&b(e)}}}function Il(o){let e,l,t,n,s,r=o[0]&&ut(o);return l=new Tt({props:{$$slots:{default:[wl]},$$scope:{ctx:o}}}),l.$on("click",function(){kt(o[4])&&o[4].apply(this,arguments)}),{c(){r&&r.c(),e=A(),S(l.$$.fragment)},l(i){r&&r.l(i),e=V(i),T(l.$$.fragment,i)},m(i,a){r&&r.m(i,a),L(i,e,a),I(l,i,a),t=!0,n||(s=je(window,"keyup",o[8]),n=!0)},p(i,[a]){o=i,o[0]?r?(r.p(o,a),a&1&&d(r,1)):(r=ut(o),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(Y(),g(r,1,1,()=>{r=null}),x());const $={};a&4096&&($.$$scope={dirty:a,ctx:o}),l.$set($)},i(i){t||(d(r),d(l.$$.fragment,i),t=!0)},o(i){g(r),g(l.$$.fragment,i),t=!1},d(i){i&&b(e),r&&r.d(i),w(l,i),n=!1,s()}}}function Tl(o,e,l){let t;X(o,we,_=>l(7,t=_));let{currentItemId:n}=e,{isLoading:s}=e,{goToNeighborItem:r}=e,{handleReturnToPreviousPage:i}=e,{handleSave:a}=e,{navigateTo:$}=e,{getDatasetItemDisplayCount:c}=e;const m=async _=>{var p;const f=document.activeElement;if(f instanceof HTMLInputElement||f instanceof HTMLTextAreaElement||(f==null?void 0:f.getAttribute("contenteditable"))==="true"||((p=_.target)==null?void 0:p.tagName)==="INPUT"){_.preventDefault(),_.stopPropagation();return}return _.shiftKey&&_.key==="ArrowLeft"?await r("previous"):_.shiftKey&&_.key==="ArrowRight"&&await r("next"),_.key},u=()=>$("/"),k=()=>r("previous"),E=()=>r("next");return o.$$set=_=>{"currentItemId"in _&&l(0,n=_.currentItemId),"isLoading"in _&&l(1,s=_.isLoading),"goToNeighborItem"in _&&l(2,r=_.goToNeighborItem),"handleReturnToPreviousPage"in _&&l(3,i=_.handleReturnToPreviousPage),"handleSave"in _&&l(4,a=_.handleSave),"navigateTo"in _&&l(5,$=_.navigateTo),"getDatasetItemDisplayCount"in _&&l(6,c=_.getDatasetItemDisplayCount)},[n,s,r,i,a,$,c,t,m,u,k,E]}class Sl extends Z{constructor(e){super(),J(this,e,Tl,Il,y,{currentItemId:0,isLoading:1,goToNeighborItem:2,handleReturnToPreviousPage:3,handleSave:4,navigateTo:5,getDatasetItemDisplayCount:6})}}const Dl=(o,e,l)=>{const t=o.findIndex(n=>n===l);if(t!==-1){const n=e==="previous"?t-1:t+1;return n===-1?o[o.length-1]:n===o.length?o[0]:o[n]}},El=(o,e)=>{const l=o.findIndex(t=>t===e);return Math.floor(l/Ft)+1},mt=[{name:"Dashboard",Icon:Ct},{name:"Dataset",Icon:hn}];function $t(o,e,l){const t=o.slice();return t[21]=e[l].name,t[22]=e[l].Icon,t}function Nl(o){let e,l,t,n=o[4]&&dt(o),s=pe(mt),r=[];for(let a=0;a<s.length;a+=1)r[a]=gt($t(o,s,a));const i=a=>g(r[a],1,1,()=>{r[a]=null});return{c(){n&&n.c(),e=A(),l=R("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){n&&n.l(a),e=V(a),l=H(a,"DIV",{class:!0});var $=j(l);for(let c=0;c<r.length;c+=1)r[c].l($);$.forEach(b),this.h()},h(){D(l,"class","flex gap-4")},m(a,$){n&&n.m(a,$),L(a,e,$),L(a,l,$);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(l,null);t=!0},p(a,$){if(a[4]?n?(n.p(a,$),$&16&&d(n,1)):(n=dt(a),n.c(),d(n,1),n.m(e.parentNode,e)):n&&(Y(),g(n,1,1,()=>{n=null}),x()),$&8209){s=pe(mt);let c;for(c=0;c<s.length;c+=1){const m=$t(a,s,c);r[c]?(r[c].p(m,$),d(r[c],1)):(r[c]=gt(m),r[c].c(),d(r[c],1),r[c].m(l,null))}for(Y(),c=s.length;c<r.length;c+=1)i(c);x()}},i(a){if(!t){d(n);for(let $=0;$<s.length;$+=1)d(r[$]);t=!0}},o(a){g(n),r=r.filter(Boolean);for(let $=0;$<r.length;$+=1)g(r[$]);t=!1},d(a){a&&(b(e),b(l)),n&&n.d(a),Ue(r,a)}}}function Ml(o){let e,l;return e=new Sl({props:{currentItemId:o[1],isLoading:o[2],handleSave:o[9],goToNeighborItem:o[8],handleReturnToPreviousPage:o[12],navigateTo:o[13],getDatasetItemDisplayCount:o[7]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.currentItemId=t[1]),n&4&&(s.isLoading=t[2]),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function dt(o){let e,l,t,n,s,r=o[4].name+"",i,a;return n=new q({props:{tooltipContent:"Back to Home",$$slots:{default:[Cl]},$$scope:{ctx:o}}}),n.$on("click",o[16]),{c(){e=R("div"),l=R("div"),t=R("div"),S(n.$$.fragment),s=A(),i=oe(r),this.h()},l($){e=H($,"DIV",{class:!0});var c=j(e);l=H(c,"DIV",{class:!0});var m=j(l);t=H(m,"DIV",{class:!0});var u=j(t);T(n.$$.fragment,u),u.forEach(b),s=V(m),i=se(m,r),m.forEach(b),c.forEach(b),this.h()},h(){D(t,"class","h-10 w-10"),D(l,"class","flex gap-4 items-center font-light"),D(e,"class","h-10 flex items-center font-semibold text-2xl")},m($,c){L($,e,c),C(e,l),C(l,t),I(n,t,null),C(l,s),C(l,i),a=!0},p($,c){const m={};c&33554432&&(m.$$scope={dirty:c,ctx:$}),n.$set(m),(!a||c&16)&&r!==(r=$[4].name+"")&&me(i,r)},i($){a||(d(n.$$.fragment,$),a=!0)},o($){g(n.$$.fragment,$),a=!1},d($){$&&b(e),w(n)}}}function Cl(o){let e,l;return{c(){e=R("img"),this.h()},l(t){e=H(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ke(e.src,l=Gt)||D(e,"src",l),D(e,"alt","Logo Pixano"),D(e,"class","w-8 h-8 mx-2")},m(t,n){L(t,e,n)},p:ce,d(t){t&&b(e)}}}function Pl(o){let e,l,t,n,s;return e=new o[22]({props:{strokeWidth:1}}),{c(){S(e.$$.fragment),l=A(),t=oe(o[21]),n=A()},l(r){T(e.$$.fragment,r),l=V(r),t=se(r,o[21]),n=V(r)},m(r,i){I(e,r,i),L(r,l,i),L(r,t,i),L(r,n,i),s=!0},p:ce,i(r){s||(d(e.$$.fragment,r),s=!0)},o(r){g(e.$$.fragment,r),s=!1},d(r){r&&(b(l),b(t),b(n)),w(e,r)}}}function gt(o){var n;let e,l;function t(){return o[17](o[21])}return e=new Tt({props:{isSelected:(n=o[0])==null?void 0:n.includes(`/${o[21]}`.toLowerCase()),$$slots:{default:[Pl]},$$scope:{ctx:o}}}),e.$on("click",t),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,r){I(e,s,r),l=!0},p(s,r){var a;o=s;const i={};r&1&&(i.isSelected=(a=o[0])==null?void 0:a.includes(`/${o[21]}`.toLowerCase())),r&33554432&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function _t(o){let e,l;return e=new Wt({props:{message:"You have unsaved changes",confirm:"Save and continue",alternativeAction:"Continue without saving"}}),e.$on("confirm",o[10]),e.$on("alternative",o[11]),e.$on("cancel",o[18]),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p:ce,i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ll(o){let e,l,t,n,s,r,i,a;const $=[Ml,Nl],c=[];function m(k,E){return k[5].route.id===k[6]?0:1}l=m(o),t=c[l]=$[l](o);let u=o[3]!=="none"&&_t(o);return{c(){e=R("header"),t.c(),n=A(),u&&u.c(),s=_e(),this.h()},l(k){e=H(k,"HEADER",{class:!0});var E=j(e);t.l(E),E.forEach(b),n=V(k),u&&u.l(k),s=_e(),this.h()},h(){D(e,"class","w-full fixed z-40 font-Montserrat h-20 p-5 flex justify-between items-center shrink-0 bg-white border-b border-slate-200 shadow-sm text-slate-800")},m(k,E){L(k,e,E),c[l].m(e,null),L(k,n,E),u&&u.m(k,E),L(k,s,E),r=!0,i||(a=Lt(o[14].call(null,e)),i=!0)},p(k,[E]){let _=l;l=m(k),l===_?c[l].p(k,E):(Y(),g(c[_],1,1,()=>{c[_]=null}),x(),t=c[l],t?t.p(k,E):(t=c[l]=$[l](k),t.c()),d(t,1),t.m(e,null)),k[3]!=="none"?u?(u.p(k,E),E&8&&d(u,1)):(u=_t(k),u.c(),d(u,1),u.m(s.parentNode,s)):u&&(Y(),g(u,1,1,()=>{u=null}),x())},i(k){r||(d(t),d(u),r=!0)},o(k){g(t),g(u),r=!1},d(k){k&&(b(e),b(n),b(s)),c[l].d(),u&&u.d(k),i=!1,a()}}}function Vl(o,e,l){let t,n;X(o,we,h=>l(4,t=h)),X(o,Me,h=>l(5,n=h));let{pageId:s}=e,{datasetItemsIds:r}=e,i,a,$,c="none",m="none";const u="/[dataset]/dataset/[itemId]";Pe.subscribe(h=>$=h.canSave),jt.subscribe(h=>{l(2,a=h)});const k=()=>`${r.indexOf(i)+1} of ${r.length}`,E=async h=>{const B=Dl(r,h,i);if(B){const W=`/${t.id}/dataset/${B}`;if($)return m=B,l(3,c=W);l(1,i=B),await Le(W)}},_=()=>{Pe.update(h=>({...h,shouldSave:!0}))},f=async()=>{_(),await p()},p=async()=>{m!=="none"&&(l(1,i=m),m="none"),await Le(c),l(3,c="none"),Pe.set({canSave:!1,shouldSave:!1})},v=async()=>{i?(Ae.update(h=>(h.currentPage=El(r,i),h)),await N(`/${t.id}/dataset`)):await N("/")},N=async h=>{if($)return l(3,c=h);await Le(h)};function U(h){function B(W){$&&W.preventDefault()}return window.addEventListener("beforeunload",B),{destroy(){window.removeEventListener("beforeunload",B)}}}const z=()=>N("/"),M=h=>N(`/${t.id}/${h.toLocaleLowerCase()}`),P=()=>l(3,c="none");return o.$$set=h=>{"pageId"in h&&l(0,s=h.pageId),"datasetItemsIds"in h&&l(15,r=h.datasetItemsIds)},Me.subscribe(h=>{l(1,i=h.params.itemId)}),[s,i,a,c,t,n,u,k,E,_,f,p,v,N,U,r,z,M,P]}class Al extends Z{constructor(e){super(),J(this,e,Vl,Ll,y,{pageId:0,datasetItemsIds:15})}}const Hl=""+new URL("../assets/pixano_white.BVKPSmmP.png",import.meta.url).href;function pt(o){var be,Oe;let e,l,t=((be=o[0])==null?void 0:be.length)+"",n,s,r,i,a=((Oe=o[0])==null?void 0:Oe.length)>1?"s":"",$,c,m,u,k=o[0].reduce(ht,0)+"",E,_,f,p,v=o[0].reduce(bt,0)>1?"s":"",N,U,z,M,P,h,B,W,fe,$e,he;return{c(){e=R("div"),l=R("span"),n=oe(t),s=A(),r=R("span"),i=oe("dataset"),$=oe(a),c=A(),m=R("div"),u=R("span"),E=oe(k),_=A(),f=R("span"),p=oe("item"),N=oe(v),U=A(),z=R("div"),M=R("div"),P=R("div"),h=R("input"),B=A(),W=ye("svg"),fe=ye("path"),this.h()},l(G){e=H(G,"DIV",{class:!0});var Q=j(e);l=H(Q,"SPAN",{class:!0});var ve=j(l);n=se(ve,t),ve.forEach(b),s=V(Q),r=H(Q,"SPAN",{class:!0});var de=j(r);i=se(de,"dataset"),$=se(de,a),de.forEach(b),Q.forEach(b),c=V(G),m=H(G,"DIV",{class:!0});var Ie=j(m);u=H(Ie,"SPAN",{class:!0});var ze=j(u);E=se(ze,k),ze.forEach(b),_=V(Ie),f=H(Ie,"SPAN",{class:!0});var Ce=j(f);p=se(Ce,"item"),N=se(Ce,v),Ce.forEach(b),Ie.forEach(b),U=V(G),z=H(G,"DIV",{class:!0});var Be=j(z);M=H(Be,"DIV",{class:!0});var qe=j(M);P=H(qe,"DIV",{class:!0});var Te=j(P);h=H(Te,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),B=V(Te),W=Ge(Te,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var We=j(W);fe=Ge(We,"path",{d:!0,fill:!0}),j(fe).forEach(b),We.forEach(b),Te.forEach(b),qe.forEach(b),Be.forEach(b),this.h()},h(){D(l,"class","mr-2 text-4xl font-medium"),D(r,"class","text-xl font-medium"),D(e,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),D(u,"class","mr-2 text-4xl font-medium"),D(f,"class","text-xl font-medium"),D(m,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),D(h,"id","search-input"),D(h,"type","text"),D(h,"placeholder","Search datasets"),D(h,"class","h-10 pl-10 pr-4 rounded border border-primary-foreground bg-primary-foreground text-white placeholder-white font-medium focus:outline-none"),D(fe,"d",Xt),D(fe,"fill","white"),D(W,"xmlns","http://www.w3.org/2000/svg"),D(W,"height","48"),D(W,"viewBox","0 -960 960 960"),D(W,"width","48"),D(W,"class","absolute left-3 h-5 w-5 pointer-events-none"),D(P,"class","h-20 relative flex items-center"),D(M,"class","flex items-center space-x-2"),D(z,"class","grow self-end flex flex-row justify-end items-end")},m(G,Q){L(G,e,Q),C(e,l),C(l,n),C(e,s),C(e,r),C(r,i),C(r,$),L(G,c,Q),L(G,m,Q),C(m,u),C(u,E),C(m,_),C(m,f),C(f,p),C(f,N),L(G,U,Q),L(G,z,Q),C(z,M),C(M,P),C(P,h),C(P,B),C(P,W),C(W,fe),$e||(he=je(h,"input",o[1]),$e=!0)},p(G,Q){var ve,de;Q&1&&t!==(t=((ve=G[0])==null?void 0:ve.length)+"")&&me(n,t),Q&1&&a!==(a=((de=G[0])==null?void 0:de.length)>1?"s":"")&&me($,a),Q&1&&k!==(k=G[0].reduce(ht,0)+"")&&me(E,k),Q&1&&v!==(v=G[0].reduce(bt,0)>1?"s":"")&&me(N,v)},d(G){G&&(b(e),b(c),b(m),b(U),b(z)),$e=!1,he()}}}function Rl(o){let e,l,t=`<img src="${Hl}" alt="Logo Pixano" class="w-7 h-7"/> <span class="text-2xl font-semibold text-slate-50 uppercase">Pixano</span>`,n,s,r=o[0]&&pt(o);return{c(){e=R("header"),l=R("div"),l.innerHTML=t,n=A(),s=R("div"),r&&r.c(),this.h()},l(i){e=H(i,"HEADER",{class:!0});var a=j(e);l=H(a,"DIV",{class:!0,"data-svelte-h":!0}),Vt(l)!=="svelte-1gjs2pg"&&(l.innerHTML=t),n=V(a),s=H(a,"DIV",{class:!0});var $=j(s);r&&r.l($),$.forEach(b),a.forEach(b),this.h()},h(){D(l,"class","flex gap-4 items-center"),D(s,"class","flex pt-4 h-36 w-full items-center flex-wrap text-slate-50"),D(e,"class","p-4 w-full h-fit pt-8 px-20 xl:px-60 flex flex-col justify-evenly bg-primary font-Montserrat z-10")},m(i,a){L(i,e,a),C(e,l),C(e,n),C(e,s),r&&r.m(s,null)},p(i,[a]){i[0]?r?r.p(i,a):(r=pt(i),r.c(),r.m(s,null)):r&&(r.d(1),r=null)},i:ce,o:ce,d(i){i&&b(e),r&&r.d()}}}const ht=(o,e)=>o+e.num_items,bt=(o,e)=>o+e.num_items;function Fl(o,e,l){let{datasets:t}=e;const n=s=>{const r=s.currentTarget;He.update((i=[])=>i.map(a=>({...a,isFiltered:!a.name.toLocaleLowerCase().includes(r.value.toLocaleLowerCase())})))};return o.$$set=s=>{"datasets"in s&&l(0,t=s.datasets)},[t,n]}class jl extends Z{constructor(e){super(),J(this,e,Fl,Rl,y,{datasets:0})}}function Kl(o){let e,l;return e=new Al({props:{pageId:o[2].route.id,datasetItemsIds:o[1]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p(t,n){const s={};n&4&&(s.pageId=t[2].route.id),n&2&&(s.datasetItemsIds=t[1]),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ul(o){let e,l;return e=new jl({props:{datasets:o[0]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.datasets=t[0]),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ol(o){let e,l,t,n,s,r,i,a,$,c;const m=[Ul,Kl],u=[];function k(f,p){return f[2].route.id===Ve?0:1}s=k(o),r=u[s]=m[s](o);const E=o[6].default,_=ee(E,o,o[5],null);return{c(){e=R("link"),l=R("meta"),t=A(),n=R("div"),r.c(),i=A(),a=R("main"),_&&_.c(),this.h()},l(f){const p=At("svelte-8x3pw",document.head);e=H(p,"LINK",{rel:!0,type:!0,href:!0}),l=H(p,"META",{name:!0,content:!0}),p.forEach(b),t=V(f),n=H(f,"DIV",{class:!0});var v=j(n);r.l(v),i=V(v),a=H(v,"MAIN",{class:!0});var N=j(a);_&&_.l(N),N.forEach(b),v.forEach(b),this.h()},h(){D(e,"rel","icon"),D(e,"type","image/svg"),D(e,"href",Wn),document.title="Pixano",D(l,"name","description"),D(l,"content","Pixano app"),D(a,"class",$=ue("bg-slate-50 flex flex-col h-screen",o[2].route.id!==Ve&&"pt-20")),D(n,"class","app")},m(f,p){C(document.head,e),C(document.head,l),L(f,t,p),L(f,n,p),u[s].m(n,null),C(n,i),C(n,a),_&&_.m(a,null),c=!0},p(f,[p]){let v=s;s=k(f),s===v?u[s].p(f,p):(Y(),g(u[v],1,1,()=>{u[v]=null}),x(),r=u[s],r?r.p(f,p):(r=u[s]=m[s](f),r.c()),d(r,1),r.m(n,i)),_&&_.p&&(!c||p&32)&&te(_,E,f,f[5],c?le(E,f[5],p,null):ne(f[5]),null),(!c||p&4&&$!==($=ue("bg-slate-50 flex flex-col h-screen",f[2].route.id!==Ve&&"pt-20")))&&D(a,"class",$)},i(f){c||(d(r),d(_,f),c=!0)},o(f){g(r),g(_,f),c=!1},d(f){f&&(b(t),b(n)),b(e),b(l),u[s].d(),_&&_.d(f)}}}const Ve="/";function zl(o,e,l){let t,n,s;X(o,He,m=>l(0,t=m)),X(o,we,m=>l(4,n=m)),X(o,Me,m=>l(2,s=m));let{$$slots:r={},$$scope:i}=e,a,$;vt(()=>{tn().then(m=>Je.set(m)).catch(()=>Je.set([])),en().then(m=>{He.set(m)}).catch(m=>{console.error(m)})}),Ae.subscribe(async m=>{m.where!=null&&(l(1,$=await tt(a,m.where)),Qe.set($.length))});const c=async m=>{m!==void 0&&(l(1,$=await tt(m)),Qe.set($.length))};return o.$$set=m=>{"$$scope"in m&&l(5,i=m.$$scope)},o.$$.update=()=>{o.$$.dirty&25&&Me.subscribe(m=>{if(l(3,a=m.params.dataset),a&&n==null){const u=t==null?void 0:t.find(k=>k.id===a);u&&we.set(u)}}),o.$$.dirty&8&&c(a)},we.subscribe(m=>{m&&Ae.set(Kt)}),[t,$,s,a,n,i,r]}class ts extends Z{constructor(e){super(),J(this,e,zl,Ol,y,{})}}export{ts as component,es as universal};
