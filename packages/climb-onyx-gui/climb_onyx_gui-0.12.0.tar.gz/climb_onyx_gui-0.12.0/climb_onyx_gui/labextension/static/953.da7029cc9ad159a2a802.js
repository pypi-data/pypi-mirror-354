"use strict";(self.webpackChunkclimb_onyx_gui_extension=self.webpackChunkclimb_onyx_gui_extension||[]).push([[953],{953:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(9560),a=n(2424),i=n(4966),c=n(8607),r=n(186),s=n(1689);async function l(e="",t={},n=["",""],o=["",""]){const a=r.ServerConnection.makeSettings(),i=s.URLExt.join(a.baseUrl,"climb-onyx-gui",e),c=new URL(i);let l;""!==n[0]&&c.searchParams.append(n[0],n[1]),""!==o[0]&&c.searchParams.append(o[0],o[1]);try{l=await r.ServerConnection.makeRequest(c.toString(),t,a)}catch(e){throw new r.ServerConnection.NetworkError(e)}let d=await l.text();if(d.length>0)try{d=JSON.parse(d)}catch(e){console.log("Not a JSON response body.",l)}if(!l.ok)throw new r.ServerConnection.ResponseError(l,d.message||d);return d}var d=n(3345),h=n.n(d),m=n(9161),g=n.n(m);class u extends o.ReactWidget{constructor(e,t,n,o){super(),this.httpPathHandler=e,this.s3PathHandler=t,this.fileWriter=n,this.version=o}render(){return h().createElement(g(),{httpPathHandler:this.httpPathHandler,s3PathHandler:this.s3PathHandler,fileWriter:this.fileWriter,extVersion:this.version})}}var p=n(484);const x=new p.LabIcon({name:"climb-onyx-gui:dna",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#d63384"><path d="M200-40v-40q0-139 58-225.5T418-480q-102-88-160-174.5T200-880v-40h80v40q0 11 .5 20.5T282-840h396q1-10 1.5-19.5t.5-20.5v-40h80v40q0 139-58 225.5T542-480q102 88 160 174.5T760-80v40h-80v-40q0-11-.5-20.5T678-120H282q-1 10-1.5 19.5T280-80v40h-80Zm138-640h284q13-19 22.5-38t17.5-42H298q8 22 17.5 41.5T338-680Zm142 148q20-17 39-34t36-34H405q17 17 36 34t39 34Zm-75 172h150q-17-17-36-34t-39-34q-20 17-39 34t-36 34ZM298-200h364q-8-22-17.5-41.5T622-280H338q-13 19-22.5 38T298-200Z"/></svg>'}),v=new p.LabIcon({name:"climb-onyx-gui:inner-join",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#d63384"><g><rect fill="none" height="24" width="24"/></g><g><ellipse cx="12" cy="12" rx="3" ry="5.74"/><g><path d="M9.04,16.87C8.71,16.95,8.36,17,8,17c-2.76,0-5-2.24-5-5s2.24-5,5-5c0.36,0,0.71,0.05,1.04,0.13 c0.39-0.56,0.88-1.12,1.49-1.63C9.75,5.19,8.9,5,8,5c-3.86,0-7,3.14-7,7s3.14,7,7,7c0.9,0,1.75-0.19,2.53-0.5 C9.92,17.99,9.43,17.43,9.04,16.87z"/></g><path d="M16,5c-0.9,0-1.75,0.19-2.53,0.5c0.61,0.51,1.1,1.07,1.49,1.63C15.29,7.05,15.64,7,16,7c2.76,0,5,2.24,5,5s-2.24,5-5,5 c-0.36,0-0.71-0.05-1.04-0.13c-0.39,0.56-0.88,1.12-1.49,1.63C14.25,18.81,15.1,19,16,19c3.86,0,7-3.14,7-7S19.86,5,16,5z"/></g></svg>'}),w=new p.LabIcon({name:"climb-onyx-gui:open-file",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#d63384"><g><rect fill="none" height="24" width="24"/></g><g><path d="M14,2H6C4.9,2,4,2.9,4,4v16c0,1.1,0.89,2,1.99,2H15v-8h5V8L14,2z M13,9V3.5L18.5,9H13z M17,21.66V16h5.66v2h-2.24 l2.95,2.95l-1.41,1.41L19,19.41l0,2.24H17z"/></g></svg>'});var y=n(5256);class b extends y.Widget{constructor(){const e=document.createElement("div"),t=document.createElement("label");t.textContent="S3 file name:";const n=document.createElement("input");n.value="",n.placeholder="s3://example-bucket/example-file.html",e.appendChild(t),e.appendChild(n),super({node:e})}get inputNode(){return this.node.getElementsByTagName("input")[0]}getValue(){return this.inputNode.value}}const f={id:"climb-onyx-gui-extension:plugin",description:"JupyterLab extension for the Onyx Graphical User Interface",autoStart:!0,optional:[c.ILauncher,i.IHTMLViewerTracker],requires:[o.ICommandPalette,a.IDocumentManager],activate:(e,t,n,a,i)=>{console.log("JupyterLab extension @climb-onyx-gui is activated!");const c="docs_extension",d="onyx_extension",h="s3_onyx_extension",m="CLIMB-TRE";let g="";l("version").then((e=>{g=e.version,console.log(`JupyterLab extension @climb-onyx-gui version: ${g}`)})).catch((e=>{}));const p=async e=>async function(e="",t={},n=["",""]){const o=r.ServerConnection.makeSettings(),a=s.URLExt.join(o.baseUrl,"climb-onyx-gui",e),i=new URL(a);let c;""!==n[0]&&i.searchParams.append(n[0],n[1]);try{c=await r.ServerConnection.makeRequest(i.toString(),t,o)}catch(e){throw new r.ServerConnection.NetworkError(e)}return c}("reroute",{},["route",e]),y=async e=>l("s3",{},["uri",e]).then((e=>{n.open(e.path)})),f=async(e,t)=>l("file-write",{body:JSON.stringify({content:t}),method:"POST"},["path",e]).then((e=>{n.open(e.path)}));let S;e.commands.addCommand(c,{label:"CLIMB-TRE Documentation",caption:"CLIMB-TRE Documentation",icon:x,execute:()=>{window.open("https://climb-tre.github.io/")}}),e.commands.addCommand(d,{label:"Onyx",caption:"Onyx | API for Pathogen Metadata",icon:v,execute:()=>{if(!S||S.disposed){const e=new u(p,y,f,g);e.addClass("onyx-Widget"),S=new o.MainAreaWidget({content:e}),S.title.label="Onyx",S.title.icon=v,S.title.closable=!0}C.has(S)||C.add(S),S.isAttached||e.shell.add(S,"main"),e.shell.activateById(S.id)}}),e.commands.addCommand(h,{label:"Open S3 Document",caption:"Open S3 Document",icon:w,execute:()=>{(0,o.showDialog)({body:new b,buttons:[o.Dialog.cancelButton(),o.Dialog.okButton({label:"Open"})],focusNodeSelector:"input",title:"Open S3 Document"}).then((e=>{if("Cancel"===e.button.label)return;if(!e.value)return;const t=e.value;y(t).catch((e=>console.error(e)))})).catch((e=>console.error(e)))}}),t.addItem({command:c,category:m}),t.addItem({command:d,category:m}),t.addItem({command:h,category:m}),a&&(a.add({command:c,category:m}),a.add({command:d,category:m}),a.add({command:h,category:m})),i&&i.widgetAdded.connect(((e,t)=>{t.trusted=!0}))}},C=new o.WidgetTracker({namespace:"climb-onyx-gui"}),S=f}}]);