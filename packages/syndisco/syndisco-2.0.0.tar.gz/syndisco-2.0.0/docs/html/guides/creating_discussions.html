
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Creating a Discussion &#8212; SynDisco 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css?v=5283bb3d" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
    
    <script src="../_static/documentation_options.js?v=8d563738"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SynDisco 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Creating a Discussion</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="Creating-a-Discussion">
<h1>Creating a Discussion<a class="headerlink" href="#Creating-a-Discussion" title="Link to this heading">¶</a></h1>
<p>The simplest task you can accomplish with this library is to create a small discussion between LLMs.</p>
<p>This guide will teach you the basic setup of the library. You will understand how to setup models, user-agents and how to coordinate them in a discussion. By the end of htis guide, you will be able to run a small discussion with a moderator and save it to the disk for persistence.</p>
<section id="Basics">
<h2>Basics<a class="headerlink" href="#Basics" title="Link to this heading">¶</a></h2>
<section id="The-Model">
<h3>The Model<a class="headerlink" href="#The-Model" title="Link to this heading">¶</a></h3>
<p>SynDisco can theoretically support any LLM, as long as it is wrapped in a <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> wrapper. The <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> class is a very simple interface with one method. This method gives the underlying LLM input, and returns its output to the library.</p>
<p>There already exists a <code class="docutils literal notranslate"><span class="pre">TransformersModel</span></code> class which handles models from the <code class="docutils literal notranslate"><span class="pre">transformers</span></code> python library. In 90% of your applications, this will be enough. We can load a TransformersModel using the following code:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">TransformersModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">TransformersModel</span><span class="p">(</span>
    <span class="n">model_path</span><span class="o">=</span><span class="s2">&quot;unsloth/Llama-3.2-3B-Instruct-bnb-4bit&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_model&quot;</span><span class="p">,</span>
    <span class="n">max_out_tokens</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/dimits/miniconda3/envs/syndiscooooo/lib/python3.13/site-packages/requests/__init__.py:86: RequestsDependencyWarning: Unable to find acceptable character detection dependency (chardet or charset_normalizer).
  warnings.warn(
Device set to use cuda:0
</pre></div></div>
</div>
<p>This will download a small LLM from huggingface. You can substitute the model_path for any similar model in <a class="reference external" href="https://huggingface.co/">HuggingFace</a> supporting the Transformers library.</p>
</section>
<section id="Creating-personas">
<h3>Creating personas<a class="headerlink" href="#Creating-personas" title="Link to this heading">¶</a></h3>
<p>All <code class="docutils literal notranslate"><span class="pre">actors</span></code> can be defined by a <code class="docutils literal notranslate"><span class="pre">persona</span></code>, aka a set of attributes that define them. These attributes can be age, ethnicity, and even include special instructions on how they should behave.</p>
<p>Creating a persona programmatically is simple:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.actors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Persona</span>

<span class="n">persona_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Emma35&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span>
        <span class="s2">&quot;education_level&quot;</span><span class="p">:</span> <span class="s2">&quot;Bachelor&#39;s&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sexual_orientation&quot;</span><span class="p">:</span> <span class="s2">&quot;Heterosexual&quot;</span><span class="p">,</span>
        <span class="s2">&quot;demographic_group&quot;</span><span class="p">:</span> <span class="s2">&quot;Latino&quot;</span><span class="p">,</span>
        <span class="s2">&quot;current_employment&quot;</span><span class="p">:</span> <span class="s2">&quot;Registered Nurse&quot;</span><span class="p">,</span>
        <span class="s2">&quot;special_instructions&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;personality_characteristics&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;compassionate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;patient&quot;</span><span class="p">,</span>
            <span class="s2">&quot;diligent&quot;</span><span class="p">,</span>
            <span class="s2">&quot;overwhelmed&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Giannis&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;male&quot;</span><span class="p">,</span>
        <span class="s2">&quot;education_level&quot;</span><span class="p">:</span> <span class="s2">&quot;College&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sexual_orientation&quot;</span><span class="p">:</span> <span class="s2">&quot;Pansexual&quot;</span><span class="p">,</span>
        <span class="s2">&quot;demographic_group&quot;</span><span class="p">:</span> <span class="s2">&quot;White&quot;</span><span class="p">,</span>
        <span class="s2">&quot;current_employment&quot;</span><span class="p">:</span> <span class="s2">&quot;Game Developer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;special_instructions&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;personality_characteristics&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;strategic&quot;</span><span class="p">,</span>
            <span class="s2">&quot;meticulous&quot;</span><span class="p">,</span>
            <span class="s2">&quot;nerdy&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hyper-focused&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="n">personas</span> <span class="o">=</span> <span class="p">[</span><span class="n">Persona</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">persona_data</span><span class="p">]</span>

<span class="k">for</span> <span class="n">persona</span> <span class="ow">in</span> <span class="n">personas</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">persona</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#34;username&#34;: &#34;Emma35&#34;, &#34;age&#34;: 38, &#34;sex&#34;: &#34;female&#34;, &#34;sexual_orientation&#34;: &#34;Heterosexual&#34;, &#34;demographic_group&#34;: &#34;Latino&#34;, &#34;current_employment&#34;: &#34;Registered Nurse&#34;, &#34;education_level&#34;: &#34;Bachelor&#39;s&#34;, &#34;special_instructions&#34;: &#34;&#34;, &#34;personality_characteristics&#34;: [&#34;compassionate&#34;, &#34;patient&#34;, &#34;diligent&#34;, &#34;overwhelmed&#34;]}
{&#34;username&#34;: &#34;Giannis&#34;, &#34;age&#34;: 21, &#34;sex&#34;: &#34;male&#34;, &#34;sexual_orientation&#34;: &#34;Pansexual&#34;, &#34;demographic_group&#34;: &#34;White&#34;, &#34;current_employment&#34;: &#34;Game Developer&#34;, &#34;education_level&#34;: &#34;College&#34;, &#34;special_instructions&#34;: &#34;&#34;, &#34;personality_characteristics&#34;: [&#34;strategic&#34;, &#34;meticulous&#34;, &#34;nerdy&#34;, &#34;hyper-focused&#34;]}
</pre></div></div>
</div>
<p>Since creating a lot of distinct users is essential in running large-scale experiments, users are usually defined in JSON format. That way, you can change anything without touching your code!</p>
<p><a class="reference external" href="https://github.com/dimits-ts/synthetic_moderation_experiments/blob/master/data/discussions_input/personas/personas.json">Here</a> is an applied example of how to mass-define user personas through JSON files.</p>
</section>
<section id="Creating-the-user-agents">
<h3>Creating the user-agents<a class="headerlink" href="#Creating-the-user-agents" title="Link to this heading">¶</a></h3>
<p>Having a <code class="docutils literal notranslate"><span class="pre">persona</span></code> and a <code class="docutils literal notranslate"><span class="pre">model</span></code> we can finally create an <code class="docutils literal notranslate"><span class="pre">actor</span></code>. The actor will personify the selected persona using the model to talk.</p>
<p>Besides a persona and a model, the actors will also need instructions and a context. By convention, all actors share the same context, and all user-agents share the same instructions. Personalized instructions are defined in the actor’s persona.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.actors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Actor</span><span class="p">,</span> <span class="n">ActorType</span>


<span class="n">CONTEXT</span> <span class="o">=</span> <span class="s2">&quot;You are taking part in an online conversation&quot;</span>
<span class="n">INSTRUCTIONS</span> <span class="o">=</span> <span class="s2">&quot;Act like a human would&quot;</span>

<span class="n">actors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Actor</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
        <span class="n">persona</span><span class="o">=</span><span class="n">p</span><span class="p">,</span>
        <span class="n">actor_type</span><span class="o">=</span><span class="n">ActorType</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="n">CONTEXT</span><span class="p">,</span>
        <span class="n">instructions</span><span class="o">=</span><span class="n">INSTRUCTIONS</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">personas</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</section>
<section id="Managing-turn-taking">
<h3>Managing turn-taking<a class="headerlink" href="#Managing-turn-taking" title="Link to this heading">¶</a></h3>
<p>In real-life discussions, who gets to speak at each point in time is determined by complex social dynamics, which are difficult to realistically model. However, there are ways with which we can simulate these dynamics.</p>
<p>SynDisco uses the <code class="docutils literal notranslate"><span class="pre">TurnManager</span></code> class to model turn taking. Two implementations are available by default: Round Robin, and Random Weighted</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Round</span> <span class="pre">Robin</span></code> is the simplest, most intuitive way to model turn-taking; everyone gets to talk once per round. Once everyone talks once, they get to talk again in the same sequence</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.turn_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">RoundRobin</span>


<span class="n">rrobin_turn_manager</span> <span class="o">=</span> <span class="n">RoundRobin</span><span class="p">([</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">,</span> <span class="s2">&quot;Howard&quot;</span><span class="p">,</span> <span class="s2">&quot;Todd&quot;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">rrobin_turn_manager</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
John
Mary
Howard
Todd
John
Mary
Howard
Todd
John
Mary
</pre></div></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RandomWeighted</span></code> on the other hand throws a weighted coin on each round. If the coin flip succedes, the previous user gets to respond. If not, another user is selected at random</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.turn_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomWeighted</span>


<span class="n">rweighted_turn_manager</span> <span class="o">=</span> <span class="n">RandomWeighted</span><span class="p">(</span>
    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">,</span> <span class="s2">&quot;Howard&quot;</span><span class="p">,</span> <span class="s2">&quot;Todd&quot;</span><span class="p">],</span> <span class="n">p_respond</span><span class="o">=</span><span class="mf">0.5</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">rweighted_turn_manager</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Todd
Mary
Howard
John
Todd
Mary
Todd
Howard
Mary
Howard
</pre></div></div>
</div>
</section>
</section>
<section id="Generating-a-discussion">
<h2>Generating a discussion<a class="headerlink" href="#Generating-a-discussion" title="Link to this heading">¶</a></h2>
<p>Let’s start with the most basic task; a single discussion between two user-agents.</p>
<p>Since we only have two users, a RoundRobin approach where each user takes a turn sequentially is sufficient.</p>
<p>Now we can run a simple discussion</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.jobs</span><span class="w"> </span><span class="kn">import</span> <span class="n">Discussion</span>


<span class="n">turn_manager</span> <span class="o">=</span> <span class="n">RoundRobin</span><span class="p">([</span><span class="n">actor</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="n">actors</span><span class="p">])</span>
<span class="n">conv</span> <span class="o">=</span> <span class="n">Discussion</span><span class="p">(</span><span class="n">next_turn_manager</span><span class="o">=</span><span class="n">turn_manager</span><span class="p">,</span> <span class="n">users</span><span class="o">=</span><span class="n">actors</span><span class="p">)</span>
<span class="n">conv</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Emma35 posted:
I&#39;m so glad I finally got a moment to myself. I&#39;ve been running around
nonstop since the morning shift at the hospital. How about you, how&#39;s
your day going?

User Giannis posted:
&#34;Hey Emma, I feel you. I&#39;ve been in coding mode nonstop since morning
too. Just trying to meet a tight deadline for a project I&#39;m working
on. But I did manage to squeeze in a quick lunch break and catch up on
some gaming. How was your shift? Anything exciting happen?&#34;

User Emma35 posted:
&#34;Ah, I&#39;m glad I could finally take a breather too! My shift was pretty
crazy, as usual. We had a code blue in the ER and I had to help
stabilize the patient, but thankfully everything turned out okay. It
was a bit overwhelming, to be honest, but it was a great feeling
knowing I was able to help. I&#39;m just ready to unwind now and maybe
catch up on some sleep. How was your coding marathon? Did you manage
to meet that deadline?&#34;

User Giannis posted:
&#34;Ah, nice to hear that everything turned out okay at the hospital,
Emma! Sorry to hear that it was chaotic, though. As for my coding
marathon, I think I made it, just barely. I had to make some last-
minute adjustments to the game mechanics, but I&#39;m happy to say that
it&#39;s looking good. I&#39;m actually pretty proud of how it turned out. The
team is going to be happy when they see the final product. Now, I&#39;m
just trying to keep

User Emma35 posted:
&#34;Haha, I&#39;m glad to hear you made it, Giannis! I&#39;m sure it was a lot of
work, but it sounds like it was worth it. I&#39;m a bit jealous, actually
- I wish I could be as productive as you are. As for me, I&#39;m just
trying to relax now and recharge. I did manage to sneak in a cup of
coffee and a quick power nap, so that was a win, right? I&#39;m also
looking forward to getting home and

</pre></div></div>
</div>
<p>Let’s add a moderator to oversee the discussion.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MODERATOR_INSTRUCTIONS</span> <span class="o">=</span> <span class="s2">&quot;You are a moderator. Oversee the discussion&quot;</span>

<span class="n">moderator_persona</span> <span class="o">=</span> <span class="n">Persona</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Moderator&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">41</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;male&quot;</span><span class="p">,</span>
        <span class="s2">&quot;education_level&quot;</span><span class="p">:</span> <span class="s2">&quot;PhD&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sexual_orientation&quot;</span><span class="p">:</span> <span class="s2">&quot;Pansexual&quot;</span><span class="p">,</span>
        <span class="s2">&quot;demographic_group&quot;</span><span class="p">:</span> <span class="s2">&quot;White&quot;</span><span class="p">,</span>
        <span class="s2">&quot;current_employment&quot;</span><span class="p">:</span> <span class="s2">&quot;Moderator&quot;</span><span class="p">,</span>
        <span class="s2">&quot;special_instructions&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;personality_characteristics&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;strict&quot;</span><span class="p">,</span>
            <span class="s2">&quot;neutral&quot;</span><span class="p">,</span>
            <span class="s2">&quot;just&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">moderator</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
    <span class="n">persona</span><span class="o">=</span><span class="n">moderator_persona</span><span class="p">,</span>
    <span class="n">actor_type</span><span class="o">=</span><span class="n">ActorType</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="n">CONTEXT</span><span class="p">,</span>
    <span class="n">instructions</span><span class="o">=</span><span class="n">MODERATOR_INSTRUCTIONS</span>
<span class="p">)</span>

<span class="c1"># remember to update this!</span>
<span class="n">turn_manager</span> <span class="o">=</span> <span class="n">RoundRobin</span><span class="p">(</span>
    <span class="p">[</span><span class="n">actor</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="n">actors</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">moderator</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span>
<span class="p">)</span>
<span class="n">conv</span> <span class="o">=</span> <span class="n">Discussion</span><span class="p">(</span>
    <span class="n">next_turn_manager</span><span class="o">=</span><span class="n">turn_manager</span><span class="p">,</span>
    <span class="n">users</span><span class="o">=</span><span class="n">actors</span> <span class="o">+</span> <span class="p">[</span><span class="n">moderator</span><span class="p">],</span>
    <span class="n">moderator</span><span class="o">=</span><span class="n">moderator</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">conv</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Emma35 posted:
I&#39;m happy to chat with you, but I don&#39;t see what Emma35 posted. Could
you please share the text or topic you&#39;d like to discuss? I&#39;m all
ears!

User Moderator posted:
User Moderator posted: Hello Emma35, I&#39;m glad you&#39;re excited to chat.
Unfortunately, this is the beginning of our conversation, and there is
no previous post from you to refer to. Would you like to start fresh
and introduce a topic you&#39;d like to discuss, or would you like me to
suggest some conversation starters?

User Giannis posted:
Thanks for the warm welcome, Moderator! I&#39;m excited to start fresh. I
think I&#39;d love to discuss something that&#39;s been on my mind lately -
have you guys ever heard of the latest advancements in artificial
intelligence in game development? I&#39;ve been working on a project that
incorporates some pretty cutting-edge AI techniques, and I&#39;m curious
to hear what others think about the possibilities and challenges that
come with it. What are your thoughts?

User Moderator posted:
User Emma35 posted: That sounds fascinating, Giannis! I&#39;m not familiar
with the specifics of artificial intelligence in game development, but
I&#39;m eager to learn. Can you tell me more about what you&#39;re working on?
What kind of game are you creating, and what kind of AI techniques are
you incorporating? I&#39;d love to hear more about your project and see if
I can offer any insights or suggestions.

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Moderator posted:
User Giannis posted: I&#39;m glad you&#39;re interested, Emma! I&#39;m actually
working on a new game that incorporates machine learning algorithms to
create a more immersive experience for players. One of the key
features I&#39;m experimenting with is procedural generation, which uses
AI to create unique levels and game worlds on the fly. I&#39;m also
looking into using natural language processing to enable more
realistic NPC interactions. I&#39;d love to hear your thoughts on the
potential benefits and challenges of using

User Moderator posted:
User Giannis posted:   I&#39;m glad to hear that you&#39;re interested, Emma!
Procedural generation is a game-changer for game development. The
ability to generate unique levels and game worlds on the fly can
create an almost endless variety of experiences for players. However,
it also presents some challenges, such as ensuring that the generated
content is coherent and fun to play through. Have you come across any
notable examples of procedural generation in games that you think are
particularly effective?   User Emma35

User Emma35 posted:
I&#39;ve always been impressed by games like No Man&#39;s Sky, where the
procedural generation creates an almost endless variety of planets and
biomes to explore. The ability to generate unique and diverse
environments on the fly really enhances the sense of discovery and
wonder. However, I can understand the challenges that come with it, as
you mentioned. Ensuring that the generated content is coherent and fun
to play through can be a delicate balance. I&#39;d love to hear more about
how you&#39;re tackling this challenge in your

User Moderator posted:
User Giannis posted: That&#39;s a great example, Emma! No Man&#39;s Sky is a
fantastic example of procedural generation in action. I&#39;m actually
drawing inspiration from their approach to my own game. One of the key
differences, though, is that my game is focused on a more narrative-
driven experience, so I&#39;m experimenting with different techniques to
create a sense of continuity and coherence in the generated content.
For instance, I&#39;m using a combination of machine learning algorithms
and hand-crafted rules to create

User Giannis posted:
User Giannis posted: Exactly, Emma, that&#39;s a great point. I think one
of the biggest challenges of procedural generation is creating a sense
of continuity and coherence in the generated content. For my game, I&#39;m
using a combination of machine learning algorithms and hand-crafted
rules to create a sense of familiarity and structure, while still
allowing for a high degree of variability and unpredictability.  One
technique I&#39;m experimenting with is using a form of narrative-driven
procedural generation, where the player&#39;s actions and

User Moderator posted:
User Giannis posted:  That&#39;s a great approach, Giannis! I think it&#39;s
interesting that you&#39;re exploring the intersection of machine learning
and hand-crafted rules to create a sense of continuity and coherence
in the generated content. Narrative-driven procedural generation can
be a powerful tool for creating a sense of immersion and engagement in
a game. One technique I&#39;d like to see you explore further is using
environmental storytelling to create a sense of narrative flow and co

</pre></div></div>
</div>
<section id="Saving-a-discussion-to-the-disk">
<h3>Saving a discussion to the disk<a class="headerlink" href="#Saving-a-discussion-to-the-disk" title="Link to this heading">¶</a></h3>
<p>It’s best practice to save the results of each discussion after it has concluded. This way, no matter what happens to the program executing the discussions, progress will be checkpointed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Discussion</span></code> class provides a method for saving its logs and related metadata to a JSON file:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="n">tp</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">conv</span><span class="o">.</span><span class="n">to_json_file</span><span class="p">(</span><span class="n">tp</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># if you are running this on Windows, uncomment this line</span>
<span class="c1"># tp.close()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
  &#34;id&#34;: &#34;98f03c72-b8e6-49aa-9c92-f6383d575ab4&#34;,
  &#34;timestamp&#34;: &#34;25-06-12-15-20&#34;,
  &#34;users&#34;: [
    &#34;Emma35&#34;,
    &#34;Giannis&#34;,
    &#34;Moderator&#34;
  ],
  &#34;moderator&#34;: &#34;Moderator&#34;,
  &#34;user_prompts&#34;: [
    {
      &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
      &#34;instructions&#34;: &#34;Act like a human would&#34;,
      &#34;type&#34;: &#34;1&#34;,
      &#34;persona&#34;: {
        &#34;username&#34;: &#34;Emma35&#34;,
        &#34;age&#34;: 38,
        &#34;sex&#34;: &#34;female&#34;,
        &#34;sexual_orientation&#34;: &#34;Heterosexual&#34;,
        &#34;demographic_group&#34;: &#34;Latino&#34;,
        &#34;current_employment&#34;: &#34;Registered Nurse&#34;,
        &#34;education_level&#34;: &#34;Bachelor&#39;s&#34;,
        &#34;special_instructions&#34;: &#34;&#34;,
        &#34;personality_characteristics&#34;: [
          &#34;compassionate&#34;,
          &#34;patient&#34;,
          &#34;diligent&#34;,
          &#34;overwhelmed&#34;
        ]
      }
    },
    {
      &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
      &#34;instructions&#34;: &#34;Act like a human would&#34;,
      &#34;type&#34;: &#34;1&#34;,
      &#34;persona&#34;: {
        &#34;username&#34;: &#34;Giannis&#34;,
        &#34;age&#34;: 21,
        &#34;sex&#34;: &#34;male&#34;,
        &#34;sexual_orientation&#34;: &#34;Pansexual&#34;,
        &#34;demographic_group&#34;: &#34;White&#34;,
        &#34;current_employment&#34;: &#34;Game Developer&#34;,
        &#34;education_level&#34;: &#34;College&#34;,
        &#34;special_instructions&#34;: &#34;&#34;,
        &#34;personality_characteristics&#34;: [
          &#34;strategic&#34;,
          &#34;meticulous&#34;,
          &#34;nerdy&#34;,
          &#34;hyper-focused&#34;
        ]
      }
    },
    {
      &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
      &#34;instructions&#34;: &#34;You are a moderator. Oversee the discussion&#34;,
      &#34;type&#34;: &#34;1&#34;,
      &#34;persona&#34;: {
        &#34;username&#34;: &#34;Moderator&#34;,
        &#34;age&#34;: 41,
        &#34;sex&#34;: &#34;male&#34;,
        &#34;sexual_orientation&#34;: &#34;Pansexual&#34;,
        &#34;demographic_group&#34;: &#34;White&#34;,
        &#34;current_employment&#34;: &#34;Moderator&#34;,
        &#34;education_level&#34;: &#34;PhD&#34;,
        &#34;special_instructions&#34;: &#34;&#34;,
        &#34;personality_characteristics&#34;: [
          &#34;strict&#34;,
          &#34;neutral&#34;,
          &#34;just&#34;
        ]
      }
    }
  ],
  &#34;moderator_prompt&#34;: {
    &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
    &#34;instructions&#34;: &#34;You are a moderator. Oversee the discussion&#34;,
    &#34;type&#34;: &#34;1&#34;,
    &#34;persona&#34;: {
      &#34;username&#34;: &#34;Moderator&#34;,
      &#34;age&#34;: 41,
      &#34;sex&#34;: &#34;male&#34;,
      &#34;sexual_orientation&#34;: &#34;Pansexual&#34;,
      &#34;demographic_group&#34;: &#34;White&#34;,
      &#34;current_employment&#34;: &#34;Moderator&#34;,
      &#34;education_level&#34;: &#34;PhD&#34;,
      &#34;special_instructions&#34;: &#34;&#34;,
      &#34;personality_characteristics&#34;: [
        &#34;strict&#34;,
        &#34;neutral&#34;,
        &#34;just&#34;
      ]
    }
  },
  &#34;ctx_length&#34;: 5,
  &#34;logs&#34;: [
    {
      &#34;name&#34;: &#34;Emma35&#34;,
      &#34;text&#34;: &#34;I&#39;m happy to chat with you, but I don&#39;t see what Emma35 posted. Could you please share the text or topic you&#39;d like to discuss? I&#39;m all ears!&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Moderator posted: Hello Emma35, I&#39;m glad you&#39;re excited to chat. Unfortunately, this is the beginning of our conversation, and there is no previous post from you to refer to. Would you like to start fresh and introduce a topic you&#39;d like to discuss, or would you like me to suggest some conversation starters?&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Giannis&#34;,
      &#34;text&#34;: &#34;Thanks for the warm welcome, Moderator! I&#39;m excited to start fresh. I think I&#39;d love to discuss something that&#39;s been on my mind lately - have you guys ever heard of the latest advancements in artificial intelligence in game development? I&#39;ve been working on a project that incorporates some pretty cutting-edge AI techniques, and I&#39;m curious to hear what others think about the possibilities and challenges that come with it. What are your thoughts?&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Emma35 posted:\nThat sounds fascinating, Giannis! I&#39;m not familiar with the specifics\nof artificial intelligence in game development, but I&#39;m eager to learn.\nCan you tell me more about what you&#39;re working on? What kind of game\nare you creating, and what kind of AI techniques are you incorporating?\nI&#39;d love to hear more about your project and see if I can offer any\ninsights or suggestions.&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis posted:\nI&#39;m glad you&#39;re interested, Emma! I&#39;m actually working on a new game\nthat incorporates machine learning algorithms to create a more immersive\nexperience for players. One of the key features I&#39;m experimenting with\nis procedural generation, which uses AI to create unique levels and\ngame worlds on the fly. I&#39;m also looking into using natural language\nprocessing to enable more realistic NPC interactions. I&#39;d love to hear\nyour thoughts on the potential benefits and challenges of using&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis posted: \n\nI&#39;m glad to hear that you&#39;re interested, Emma! Procedural generation is a game-changer for game development. The ability to generate unique levels and game worlds on the fly can create an almost endless variety of experiences for players. However, it also presents some challenges, such as ensuring that the generated content is coherent and fun to play through. Have you come across any notable examples of procedural generation in games that you think are particularly effective? \n\nUser Emma35&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Emma35&#34;,
      &#34;text&#34;: &#34;I&#39;ve always been impressed by games like No Man&#39;s Sky, where the procedural generation creates an almost endless variety of planets and biomes to explore. The ability to generate unique and diverse environments on the fly really enhances the sense of discovery and wonder. However, I can understand the challenges that come with it, as you mentioned. Ensuring that the generated content is coherent and fun to play through can be a delicate balance. I&#39;d love to hear more about how you&#39;re tackling this challenge in your&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis posted: That&#39;s a great example, Emma! No Man&#39;s Sky is a fantastic example of procedural generation in action. I&#39;m actually drawing inspiration from their approach to my own game. One of the key differences, though, is that my game is focused on a more narrative-driven experience, so I&#39;m experimenting with different techniques to create a sense of continuity and coherence in the generated content. For instance, I&#39;m using a combination of machine learning algorithms and hand-crafted rules to create&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Giannis&#34;,
      &#34;text&#34;: &#34;User Giannis posted: Exactly, Emma, that&#39;s a great point. I think one of the biggest challenges of procedural generation is creating a sense of continuity and coherence in the generated content. For my game, I&#39;m using a combination of machine learning algorithms and hand-crafted rules to create a sense of familiarity and structure, while still allowing for a high degree of variability and unpredictability.\n\nOne technique I&#39;m experimenting with is using a form of narrative-driven procedural generation, where the player&#39;s actions and&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis posted:  That&#39;s a great approach, Giannis! I think it&#39;s\ninteresting that you&#39;re exploring the intersection of machine learning and\nhand-crafted rules to create a sense of continuity and coherence in\nthe generated content. Narrative-driven procedural generation can be a\npowerful tool for creating a sense of immersion and engagement in a\ngame. One technique I&#39;d like to see you explore further is using\nenvironmental storytelling to create a sense of narrative flow and\nco&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    }
  ]
}
</pre></div></div>
</div>
<p>Congratulations, you can now run fully synthetic discussions! You may want to experiment with adding more than 2 users or testing more realistic turn taking procedures (for example, check out the <code class="docutils literal notranslate"><span class="pre">RandomWeighted</span></code> turn manager).</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Creating a Discussion</a><ul>
<li><a class="reference internal" href="#Basics">Basics</a><ul>
<li><a class="reference internal" href="#The-Model">The Model</a></li>
<li><a class="reference internal" href="#Creating-personas">Creating personas</a></li>
<li><a class="reference internal" href="#Creating-the-user-agents">Creating the user-agents</a></li>
<li><a class="reference internal" href="#Managing-turn-taking">Managing turn-taking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Generating-a-discussion">Generating a discussion</a><ul>
<li><a class="reference internal" href="#Saving-a-discussion-to-the-disk">Saving a discussion to the disk</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/guides/creating_discussions.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SynDisco 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Creating a Discussion</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Dimitris Tsirmpas.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>