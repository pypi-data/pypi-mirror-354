Metadata-Version: 2.4
Name: dom-heal
Version: 1.0.0
Summary: Auto-recuperaÃ§Ã£o de seletores DOM para testes web
Home-page: https://github.com/jonnaschristian/dom-heal
Author: Jonnas Christian Sousa de Paiva
Author-email: jonnaschristian@gmail.com
Classifier: Programming Language :: Python :: 3
Classifier: Operating System :: OS Independent
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Information Technology
Classifier: Topic :: Software Development :: Testing
Classifier: License :: OSI Approved :: MIT License
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: rapidfuzz>=3.13.0
Requires-Dist: selenium>=4.29.0
Requires-Dist: webdriver-manager>=4.0.2
Requires-Dist: typer[all]>=0.9.0
Requires-Dist: lxml>=4.9.0
Requires-Dist: requests>=2.25.0
Provides-Extra: dev
Requires-Dist: pytest>=8.0.0; extra == "dev"
Requires-Dist: python-dotenv>=1.0.0; extra == "dev"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license-file
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary


# DOM-Heal

**Auto-recuperaÃ§Ã£o de seletores DOM para testes web automatizados**

![PyPI - Python Version](https://img.shields.io/badge/python-3.7%2B-blue)
![License](https://img.shields.io/badge/license-MIT-green)
![Status](https://img.shields.io/badge/status-Experimental-yellow)

DOM-Heal Ã© uma biblioteca de _self-healing_ para automaÃ§Ã£o de testes web. Ela identifica seletores quebrados no DOM, faz o ajuste inteligente e atualiza automaticamente seu arquivo de elementos, minimizando falhas causadas por mudanÃ§as no front-end. CompatÃ­vel com qualquer framework de teste (Cypress, Selenium, Robot Framework, Playwright, etc).

---

## âœ¨ Principais Funcionalidades

- **Self-healing de seletores:** Ajusta e recupera seletores (`id`, `name`, `class`, `xpath`) automaticamente usando algoritmos fuzzy.
- **Matching inteligente:** Aplica boosts e estratÃ©gias avanÃ§adas para encontrar o elemento mais parecido possÃ­vel.
- **Log detalhado:** Gera um arquivo extra (`ElementosAlterados.json`) mostrando todas as alteraÃ§Ãµes feitas.
- **AtualizaÃ§Ã£o automÃ¡tica:** O JSON original de seletores Ã© atualizado de acordo com o DOM atual da pÃ¡gina.
- **Independente de framework:** Funciona para qualquer ferramenta de automaÃ§Ã£o que utilize JSON para armazenamento de elementos.
- **Uso por pÃ¡gina:** Cada execuÃ§Ã£o Ã© feita para uma pÃ¡gina especÃ­fica, garantindo mÃ¡xima precisÃ£o.

---

## ğŸš€ InstalaÃ§Ã£o

> **PrÃ©-requisitos:** Python 3.7+ e [Google Chrome](https://www.google.com/chrome/)

```bash
pip install dom-heal
```

---

## âš¡ Como Usar

### 1. Crie seu arquivo de seletores (um JSON por pÃ¡gina!)

Recomenda-se criar um arquivo JSON para cada pÃ¡gina que deseja validar/atualizar.  
**Exemplo (`formulario.json`):**

```json
{
  "inputEmail": "#email",
  "btnEnviar": "#enviar",
  "menuContato": "#menu-contato"
}
```

---

### 2. Execute o self-healing para a pÃ¡gina desejada

```bash
dom-heal rodar --json ./formulario.json --url https://seusite.com/formulario
```

- **Importante:**  
  - O arquivo JSON passado serÃ¡ **atualizado** automaticamente com os novos seletores encontrados.
  - SerÃ¡ gerado, na mesma pasta, um arquivo `ElementosAlterados.json` com um relatÃ³rio detalhado das alteraÃ§Ãµes.

#### Exemplo de saÃ­da:

```
âœ… Self-healing executado com sucesso!
ğŸ“„ Log de alteraÃ§Ãµes: ./ElementosAlterados.json
ğŸ—ƒï¸ JSON atualizado: ./home_selectors.json
```

---

### 3. Consulte o log de alteraÃ§Ãµes

O arquivo `ElementosAlterados.json` mostra detalhadamente:
- Qual elemento foi alterado
- Seletor antigo vs novo seletor sugerido
- PontuaÃ§Ã£o de similaridade
- Motivo
- boost (se houve boost)

**Exemplo:**
```json
{
  "alterados": [
    {
      "nome": "inputEmail",
      "selector_antigo": "#email",
      "novo_seletor": "#input-email",
      "score": 0.88,
      "motivo": "id",
      "boost": true
    }
  ]
}
```

---

### 4. IntegraÃ§Ã£o com qualquer framework de teste

O arquivo de seletores (JSON) pode ser consumido diretamente pelos seus testes automatizados.  
Basta garantir que cada framework (Cypress, Selenium, Robot, Playwright etc.) leia os seletores do JSON atualizado pelo DOM-Heal.

**Exemplo prÃ¡tico:**  
Seu teste carrega o JSON e usa os seletores para interagir com a pÃ¡gina â€” apÃ³s o self-healing, nÃ£o precisa alterar o teste, apenas garantir que os seletores estejam sempre atualizados.

---

## ğŸ› ï¸ Fluxo Completo

1. **Execute o self-healing para a pÃ¡gina desejada.**
2. **Valide o JSON atualizado nos seus testes.**
3. **Verifique o log `ElementosAlterados.json` para saber o que mudou.**
4. **Se necessÃ¡rio, ajuste manualmente seletores muito especÃ­ficos (casos raros).**
5. **Repita o processo para cada pÃ¡gina relevante do seu sistema.**

---

## ğŸ’¡ Dicas e Boas PrÃ¡ticas

- Sempre utilize **um JSON por pÃ¡gina** para facilitar a manutenÃ§Ã£o.
- Versione seus arquivos de seletores (use Git).
- Valide os seletores apÃ³s rodar o self-healing, principalmente se seu front-end sofreu grandes mudanÃ§as estruturais.
- O log detalhado pode ser usado como documentaÃ§Ã£o da evoluÃ§Ã£o dos seletores do seu sistema.
- O mecanismo nÃ£o depende do framework de teste: funciona com qualquer soluÃ§Ã£o que use arquivos/dicionÃ¡rios de seletores.
- Chrome deve estar instalado localmente para o funcionamento correto do Selenium headless.
- O processo nÃ£o interfere no cÃ³digo dos seus testes â€” apenas atualiza o arquivo de seletores consumido por eles.

---

## ğŸ§‘â€ğŸ’» Estrutura do Projeto

```
dom_heal/
â”œâ”€â”€ cli.py         # Interface de linha de comando
â”œâ”€â”€ engine.py      # Orquestra o ciclo completo de self-healing
â”œâ”€â”€ extractor.py   # Extrai todos os elementos do DOM usando Selenium
â”œâ”€â”€ comparator.py  # Matching fuzzy e seleÃ§Ã£o do melhor elemento
â”œâ”€â”€ healing.py     # Atualiza o JSON de seletores
â””â”€â”€ utils.py       # FunÃ§Ãµes utilitÃ¡rias e normalizaÃ§Ã£o
```

---


## ğŸ‘¨â€ğŸ« Autor

Projeto desenvolvido por **Jonnas Christian Sousa de Paiva**  
Contato: [jonnaschristian@gmail.com](mailto:jonnaschristian@gmail.com)

---

## ğŸ“„ LicenÃ§a

MIT â€” sinta-se livre para usar, estudar e contribuir!

---

**Contribua, reporte bugs e mande sugestÃµes no [GitHub](https://github.com/jonnaschristian/dom-heal)**

---
