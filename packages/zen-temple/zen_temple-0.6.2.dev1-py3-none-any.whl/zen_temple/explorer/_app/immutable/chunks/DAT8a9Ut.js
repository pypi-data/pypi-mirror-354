import{ar as Be,ac as rt,aH as it,o as nt,Q as Je,E as st,aI as at,aJ as ot,e as lt,aK as ut,aL as ft,v as ct,n as de,am as Ge,an as Ze,ao as dt,aM as ht,aN as _t,j as ie,r as V,b as Ae,l as me,p as pt,a as Oe,s as Ce,h as ne,g as E,d as Ne,f as vt,c as gt}from"./BUw4_zXp.js";import{b as mt,s as xe}from"./CaQtvwPl.js";import{l as yt,w as bt,d as wt}from"./VbkfzCbL.js";import"./CWj6FrbW.js";import{o as kt}from"./CTIMrZMQ.js";import{p as ye,i as Ye}from"./DZ2ir7Ph.js";import{a as Ee,g as De,u as Et,e as Me,i as Pe}from"./CGkOqb8s.js";import{p as $e,f as he,a as ce}from"./CSp5jfsq.js";import{s as be}from"./b0kE6qlU.js";import{s as Ke}from"./CfnHqHXQ.js";function et(i,n,l){if(i.multiple){if(n==null)return;if(!rt(n))return it();for(var a of i.options)a.selected=n.includes(Le(a));return}for(a of i.options){var c=Le(a);if(nt(c,n)){a.selected=!0;return}}(!l||n!==void 0)&&(i.selectedIndex=-1)}function Rt(i,n){Be(()=>{var l=new MutationObserver(()=>{var a=i.__value;et(i,a)});return l.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function Ue(i,n,l=n){var a=!0;yt(i,"change",c=>{var y=c?"[selected]":":checked",_;if(i.multiple)_=[].map.call(i.querySelectorAll(y),Le);else{var p=i.querySelector(y)??i.querySelector("option:not([disabled])");_=p&&Le(p)}l(_)}),Be(()=>{var c=n();if(et(i,c,a),a&&c===void 0){var y=i.querySelector(":checked");y!==null&&(c=Le(y),l(c))}i.__value=c,a=!1}),Rt(i)}function Le(i){return"__value"in i?i.__value:i.value}const St=()=>performance.now(),ve={tick:i=>requestAnimationFrame(i),now:()=>St(),tasks:new Set};function tt(){const i=ve.now();ve.tasks.forEach(n=>{n.c(i)||(ve.tasks.delete(n),n.f())}),ve.tasks.size!==0&&ve.tick(tt)}function Ot(i){let n;return ve.tasks.size===0&&ve.tick(tt),{promise:new Promise(l=>{ve.tasks.add(n={c:i,f:l})}),abort(){ve.tasks.delete(n)}}}function Ie(i,n){bt(()=>{i.dispatchEvent(new CustomEvent(n))})}function Ct(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const n=i.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(l=>l[0].toUpperCase()+l.slice(1)).join("")}function Ve(i){const n={},l=i.split(";");for(const a of l){const[c,y]=a.split(":");if(!c||y===void 0)break;const _=Ct(c.trim());n[_]=y.trim()}return n}const xt=i=>i;function nr(i,n,l,a){var c=(i&ht)!==0,y=(i&_t)!==0,_=c&&y,p=(i&ut)!==0,O=_?"both":c?"in":"out",s,h=n.inert,v=n.style.overflow,g,m;function K(){var W=dt,oe=Je;Ge(null),Ze(null);try{return s??(s=l()(n,(a==null?void 0:a())??{},{direction:O}))}finally{Ge(W),Ze(oe)}}var I={is_global:p,in(){var W;if(n.inert=h,!c){m==null||m.abort(),(W=m==null?void 0:m.reset)==null||W.call(m);return}y||g==null||g.abort(),Ie(n,"introstart"),g=ze(n,K(),m,1,()=>{Ie(n,"introend"),g==null||g.abort(),g=s=void 0,n.style.overflow=v})},out(W){if(!y){W==null||W(),s=void 0;return}n.inert=!0,Ie(n,"outrostart"),m=ze(n,K(),g,0,()=>{Ie(n,"outroend"),W==null||W()})},stop:()=>{g==null||g.abort(),m==null||m.abort()}},U=Je;if((U.transitions??(U.transitions=[])).push(I),c&&mt){var ee=p;if(!ee){for(var G=U.parent;G&&(G.f&st)!==0;)for(;(G=G.parent)&&(G.f&at)===0;);ee=!G||(G.f&ot)!==0}ee&&Be(()=>{lt(()=>I.in())})}}function ze(i,n,l,a,c){var y=a===1;if(ft(n)){var _,p=!1;return ct(()=>{if(!p){var U=n({direction:y?"in":"out"});_=ze(i,U,l,a,c)}}),{abort:()=>{p=!0,_==null||_.abort()},deactivate:()=>_.deactivate(),reset:()=>_.reset(),t:()=>_.t()}}if(l==null||l.deactivate(),!(n!=null&&n.duration))return c(),{abort:de,deactivate:de,reset:de,t:()=>a};const{delay:O=0,css:s,tick:h,easing:v=xt}=n;var g=[];if(y&&l===void 0&&(h&&h(0,1),s)){var m=Ve(s(0,1));g.push(m,m)}var K=()=>1-a,I=i.animate(g,{duration:O,fill:"forwards"});return I.onfinish=()=>{I.cancel();var U=(l==null?void 0:l.t())??1-a;l==null||l.abort();var ee=a-U,G=n.duration*Math.abs(ee),W=[];if(G>0){var oe=!1;if(s)for(var _e=Math.ceil(G/16.666666666666668),te=0;te<=_e;te+=1){var A=U+ee*v(te/_e),t=Ve(s(A,1-A));W.push(t),oe||(oe=t.overflow==="hidden")}oe&&(i.style.overflow="hidden"),K=()=>{var e=I.currentTime;return U+ee*v(e/G)},h&&Ot(()=>{if(I.playState!=="running")return!1;var e=K();return h(e,1-e),!0})}I=i.animate(W,{duration:G,fill:"forwards"}),I.onfinish=()=>{K=()=>a,h==null||h(a,1-a),c()}},{abort:()=>{I&&(I.cancel(),I.effect=null,I.onfinish=de)},deactivate:()=>{c=de},reset:()=>{a===0&&(h==null||h(1,0))},t:()=>K()}}function Lt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Te={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var It=Te.exports,Xe;function Tt(){return Xe||(Xe=1,function(i,n){((l,a)=>{i.exports=a()})(It,function l(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},c,y=!a.document&&!!a.postMessage,_=a.IS_PAPA_WORKER||!1,p={},O=0,s={};function h(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var r=_e(e);r.chunkSize=parseInt(r.chunkSize),e.step||e.chunk||(r.chunkSize=null),this._handle=new I(r),(this._handle.streamer=this)._config=r}).call(this,t),this.parseChunk=function(e,r){var u=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<u){let f=this._config.newline;f||(o=this._config.quoteChar||'"',f=this._handle.guessLineEndings(e,o)),e=[...e.split(f).slice(u)].join(f)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(e))!==void 0&&(e=o),this.isFirstChunk=!1,this._halted=!1;var u=this._partialLine+e,o=(this._partialLine="",this._handle.parse(u,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=o.meta.cursor,u=(this._finished||(this._partialLine=u.substring(e-this._baseIndex),this._baseIndex=e),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),_)a.postMessage({results:o,workerId:s.WORKER_ID,finished:u});else if(A(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!u||!A(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){A(this._config.error)?this._config.error(e):_&&this._config.error&&a.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function v(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),h.call(this,t),this._nextChunk=y?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),y||(e.onload=te(this._chunkLoaded,this),e.onerror=te(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!y),this._config.downloadRequestHeaders){var r,u=this._config.downloadRequestHeaders;for(r in u)e.setRequestHeader(r,u[r])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+o));try{e.send(this._config.downloadRequestBody)}catch(f){this._chunkError(f.message)}y&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(r){r=e.statusText||r,this._sendError(new Error(r))}}function g(t){(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),h.call(this,t);var e,r,u=typeof FileReader<"u";this.stream=function(o){this._input=o,r=o.slice||o.webkitSlice||o.mozSlice,u?((e=new FileReader).onload=te(this._chunkLoaded,this),e.onerror=te(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,f=(this._config.chunkSize&&(f=Math.min(this._start+this._config.chunkSize,this._input.size),o=r.call(o,this._start,f)),e.readAsText(o,this._config.encoding));u||this._chunkLoaded({target:{result:f}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(e.error)}}function m(t){var e;h.call(this,t=t||{}),this.stream=function(r){return e=r,this._nextChunk()},this._nextChunk=function(){var r,u;if(!this._finished)return r=this._config.chunkSize,e=r?(u=e.substring(0,r),e.substring(r)):(u=e,""),this._finished=!e,this.parseChunk(u)}}function K(t){h.call(this,t=t||{});var e=[],r=!0,u=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){u&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):r=!0},this._streamData=te(function(o){try{e.push(typeof o=="string"?o:o.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(f){this._streamError(f)}},this),this._streamError=te(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=te(function(){this._streamCleanUp(),u=!0,this._streamData("")},this),this._streamCleanUp=te(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function I(t){var e,r,u,o,f=Math.pow(2,53),T=-f,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,M=0,w=0,X=!1,R=!1,C=[],d={data:[],errors:[],meta:{}};function Q(x){return t.skipEmptyLines==="greedy"?x.join("").trim()==="":x.length===1&&x[0].length===0}function H(){if(d&&u&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),u=!1),t.skipEmptyLines&&(d.data=d.data.filter(function(k){return!Q(k)})),Y()){let k=function(B,J){A(t.transformHeader)&&(B=t.transformHeader(B,J)),C.push(B)};if(d)if(Array.isArray(d.data[0])){for(var x=0;Y()&&x<d.data.length;x++)d.data[x].forEach(k);d.data.splice(0,1)}else d.data.forEach(k)}function j(k,B){for(var J=t.header?{}:[],N=0;N<k.length;N++){var P=N,L=k[N],L=((ae,S)=>(q=>(t.dynamicTypingFunction&&t.dynamicTyping[q]===void 0&&(t.dynamicTyping[q]=t.dynamicTypingFunction(q)),(t.dynamicTyping[q]||t.dynamicTyping)===!0))(ae)?S==="true"||S==="TRUE"||S!=="false"&&S!=="FALSE"&&((q=>{if(D.test(q)&&(q=parseFloat(q),T<q&&q<f))return 1})(S)?parseFloat(S):F.test(S)?new Date(S):S===""?null:S):S)(P=t.header?N>=C.length?"__parsed_extra":C[N]:P,L=t.transform?t.transform(L,P):L);P==="__parsed_extra"?(J[P]=J[P]||[],J[P].push(L)):J[P]=L}return t.header&&(N>C.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+C.length+" fields but parsed "+N,w+B):N<C.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+C.length+" fields but parsed "+N,w+B)),J}var z;d&&(t.header||t.dynamicTyping||t.transform)&&(z=1,!d.data.length||Array.isArray(d.data[0])?(d.data=d.data.map(j),z=d.data.length):d.data=j(d.data,0),t.header&&d.meta&&(d.meta.fields=C),w+=z)}function Y(){return t.header&&C.length===0}function se(x,j,z,k){x={type:x,code:j,message:z},k!==void 0&&(x.row=k),d.errors.push(x)}A(t.step)&&(o=t.step,t.step=function(x){d=x,Y()?H():(H(),d.data.length!==0&&(M+=x.data.length,t.preview&&M>t.preview?r.abort():(d.data=d.data[0],o(d,b))))}),this.parse=function(x,j,z){var k=t.quoteChar||'"',k=(t.newline||(t.newline=this.guessLineEndings(x,k)),u=!1,t.delimiter?A(t.delimiter)&&(t.delimiter=t.delimiter(x),d.meta.delimiter=t.delimiter):((k=((B,J,N,P,L)=>{var ae,S,q,ge;L=L||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var we=0;we<L.length;we++){for(var le,Re=L[we],$=0,ue=0,Z=0,re=(q=void 0,new ee({comments:P,delimiter:Re,newline:J,preview:10}).parse(B)),pe=0;pe<re.data.length;pe++)N&&Q(re.data[pe])?Z++:(le=re.data[pe].length,ue+=le,q===void 0?q=le:0<le&&($+=Math.abs(le-q),q=le));0<re.data.length&&(ue/=re.data.length-Z),(S===void 0||$<=S)&&(ge===void 0||ge<ue)&&1.99<ue&&(S=$,ae=Re,ge=ue)}return{successful:!!(t.delimiter=ae),bestDelimiter:ae}})(x,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=k.bestDelimiter:(u=!0,t.delimiter=s.DefaultDelimiter),d.meta.delimiter=t.delimiter),_e(t));return t.preview&&t.header&&k.preview++,e=x,r=new ee(k),d=r.parse(e,j,z),H(),X?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,r.abort(),e=A(t.chunk)?"":e.substring(r.getCharIndex())},this.resume=function(){b.streamer._halted?(X=!1,b.streamer.parseChunk(e,!0)):setTimeout(b.resume,3)},this.aborted=function(){return R},this.abort=function(){R=!0,r.abort(),d.meta.aborted=!0,A(t.complete)&&t.complete(d),e=""},this.guessLineEndings=function(B,k){B=B.substring(0,1048576);var k=new RegExp(U(k)+"([^]*?)"+U(k),"gm"),z=(B=B.replace(k,"")).split("\r"),k=B.split(`
`),B=1<k.length&&k[0].length<z[0].length;if(z.length===1||B)return`
`;for(var J=0,N=0;N<z.length;N++)z[N][0]===`
`&&J++;return J>=z.length/2?`\r
`:"\r"}}function U(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(t){var e=(t=t||{}).delimiter,r=t.newline,u=t.comments,o=t.step,f=t.preview,T=t.fastMode,D=null,F=!1,b=t.quoteChar==null?'"':t.quoteChar,M=b;if(t.escapeChar!==void 0&&(M=t.escapeChar),(typeof e!="string"||-1<s.BAD_DELIMITERS.indexOf(e))&&(e=","),u===e)throw new Error("Comment character same as delimiter");u===!0?u="#":(typeof u!="string"||-1<s.BAD_DELIMITERS.indexOf(u))&&(u=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var w=0,X=!1;this.parse=function(R,C,d){if(typeof R!="string")throw new Error("Input must be a string");var Q=R.length,H=e.length,Y=r.length,se=u.length,x=A(o),j=[],z=[],k=[],B=w=0;if(!R)return $();if(T||T!==!1&&R.indexOf(b)===-1){for(var J=R.split(r),N=0;N<J.length;N++){if(k=J[N],w+=k.length,N!==J.length-1)w+=r.length;else if(d)return $();if(!u||k.substring(0,se)!==u){if(x){if(j=[],ge(k.split(e)),ue(),X)return $()}else ge(k.split(e));if(f&&f<=N)return j=j.slice(0,f),$(!0)}}return $()}for(var P=R.indexOf(e,w),L=R.indexOf(r,w),ae=new RegExp(U(M)+U(b),"g"),S=R.indexOf(b,w);;)if(R[w]===b)for(S=w,w++;;){if((S=R.indexOf(b,S+1))===-1)return d||z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:j.length,index:w}),le();if(S===Q-1)return le(R.substring(w,S).replace(ae,b));if(b===M&&R[S+1]===M)S++;else if(b===M||S===0||R[S-1]!==M){P!==-1&&P<S+1&&(P=R.indexOf(e,S+1));var q=we((L=L!==-1&&L<S+1?R.indexOf(r,S+1):L)===-1?P:Math.min(P,L));if(R.substr(S+1+q,H)===e){k.push(R.substring(w,S).replace(ae,b)),R[w=S+1+q+H]!==b&&(S=R.indexOf(b,w)),P=R.indexOf(e,w),L=R.indexOf(r,w);break}if(q=we(L),R.substring(S+1+q,S+1+q+Y)===r){if(k.push(R.substring(w,S).replace(ae,b)),Re(S+1+q+Y),P=R.indexOf(e,w),S=R.indexOf(b,w),x&&(ue(),X))return $();if(f&&j.length>=f)return $(!0);break}z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:j.length,index:w}),S++}}else if(u&&k.length===0&&R.substring(w,w+se)===u){if(L===-1)return $();w=L+Y,L=R.indexOf(r,w),P=R.indexOf(e,w)}else if(P!==-1&&(P<L||L===-1))k.push(R.substring(w,P)),w=P+H,P=R.indexOf(e,w);else{if(L===-1)break;if(k.push(R.substring(w,L)),Re(L+Y),x&&(ue(),X))return $();if(f&&j.length>=f)return $(!0)}return le();function ge(Z){j.push(Z),B=w}function we(Z){var re=0;return re=Z!==-1&&(Z=R.substring(S+1,Z))&&Z.trim()===""?Z.length:re}function le(Z){return d||(Z===void 0&&(Z=R.substring(w)),k.push(Z),w=Q,ge(k),x&&ue()),$()}function Re(Z){w=Z,ge(k),k=[],L=R.indexOf(r,w)}function $(Z){if(t.header&&!C&&j.length&&!F){var re=j[0],pe=Object.create(null),Fe=new Set(re);let He=!1;for(let ke=0;ke<re.length;ke++){let fe=re[ke];if(pe[fe=A(t.transformHeader)?t.transformHeader(fe,ke):fe]){let Se,Qe=pe[fe];for(;Se=fe+"_"+Qe,Qe++,Fe.has(Se););Fe.add(Se),re[ke]=Se,pe[fe]++,He=!0,(D=D===null?{}:D)[Se]=fe}else pe[fe]=1,re[ke]=fe;Fe.add(fe)}He&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:j,errors:z,meta:{delimiter:e,linebreak:r,aborted:X,truncated:!!Z,cursor:B+(C||0),renamedHeaders:D}}}function ue(){o($()),j=[],z=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return w}}function G(t){var e=t.data,r=p[e.workerId],u=!1;if(e.error)r.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){u=!0,W(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:oe,resume:oe};if(A(r.userStep)){for(var f=0;f<e.results.data.length&&(r.userStep({data:e.results.data[f],errors:e.results.errors,meta:e.results.meta},o),!u);f++);delete e.results}else A(r.userChunk)&&(r.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!u&&W(e.workerId,e.results)}function W(t,e){var r=p[t];A(r.userComplete)&&r.userComplete(e),r.terminate(),delete p[t]}function oe(){throw new Error("Not implemented.")}function _e(t){if(typeof t!="object"||t===null)return t;var e,r=Array.isArray(t)?[]:{};for(e in t)r[e]=_e(t[e]);return r}function te(t,e){return function(){t.apply(e,arguments)}}function A(t){return typeof t=="function"}return s.parse=function(t,e){var r=(e=e||{}).dynamicTyping||!1;if(A(r)&&(e.dynamicTypingFunction=r,r={}),e.dynamicTyping=r,e.transform=!!A(e.transform)&&e.transform,!e.worker||!s.WORKERS_SUPPORTED)return r=null,s.NODE_STREAM_INPUT,typeof t=="string"?(t=(u=>u.charCodeAt(0)!==65279?u:u.slice(1))(t),r=new(e.download?v:m)(e)):t.readable===!0&&A(t.read)&&A(t.on)?r=new K(e):(a.File&&t instanceof File||t instanceof Object)&&(r=new g(e)),r.stream(t);(r=(()=>{var u;return!!s.WORKERS_SUPPORTED&&(u=(()=>{var o=a.URL||a.webkitURL||null,f=l.toString();return s.BLOB_URL||(s.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",f,")();"],{type:"text/javascript"})))})(),(u=new a.Worker(u)).onmessage=G,u.id=O++,p[u.id]=u)})()).userStep=e.step,r.userChunk=e.chunk,r.userComplete=e.complete,r.userError=e.error,e.step=A(e.step),e.chunk=A(e.chunk),e.complete=A(e.complete),e.error=A(e.error),delete e.worker,r.postMessage({input:t,config:e,workerId:r.id})},s.unparse=function(t,e){var r=!1,u=!0,o=",",f=`\r
`,T='"',D=T+T,F=!1,b=null,M=!1,w=((()=>{if(typeof e=="object"){if(typeof e.delimiter!="string"||s.BAD_DELIMITERS.filter(function(C){return e.delimiter.indexOf(C)!==-1}).length||(o=e.delimiter),typeof e.quotes!="boolean"&&typeof e.quotes!="function"&&!Array.isArray(e.quotes)||(r=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(F=e.skipEmptyLines),typeof e.newline=="string"&&(f=e.newline),typeof e.quoteChar=="string"&&(T=e.quoteChar),typeof e.header=="boolean"&&(u=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");b=e.columns}e.escapeChar!==void 0&&(D=e.escapeChar+T),e.escapeFormulae instanceof RegExp?M=e.escapeFormulae:typeof e.escapeFormulae=="boolean"&&e.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(U(T),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return X(null,t,F);if(typeof t[0]=="object")return X(b||Object.keys(t[0]),t,F)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||b),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),X(t.fields||[],t.data||[],F);throw new Error("Unable to serialize unrecognized input");function X(C,d,Q){var H="",Y=(typeof C=="string"&&(C=JSON.parse(C)),typeof d=="string"&&(d=JSON.parse(d)),Array.isArray(C)&&0<C.length),se=!Array.isArray(d[0]);if(Y&&u){for(var x=0;x<C.length;x++)0<x&&(H+=o),H+=R(C[x],x);0<d.length&&(H+=f)}for(var j=0;j<d.length;j++){var z=(Y?C:d[j]).length,k=!1,B=Y?Object.keys(d[j]).length===0:d[j].length===0;if(Q&&!Y&&(k=Q==="greedy"?d[j].join("").trim()==="":d[j].length===1&&d[j][0].length===0),Q==="greedy"&&Y){for(var J=[],N=0;N<z;N++){var P=se?C[N]:N;J.push(d[j][P])}k=J.join("").trim()===""}if(!k){for(var L=0;L<z;L++){0<L&&!B&&(H+=o);var ae=Y&&se?C[L]:L;H+=R(d[j][ae],L)}j<d.length-1&&(!Q||0<z&&!B)&&(H+=f)}}return H}function R(C,d){var Q,H;return C==null?"":C.constructor===Date?JSON.stringify(C).slice(1,25):(H=!1,M&&typeof C=="string"&&M.test(C)&&(C="'"+C,H=!0),Q=C.toString().replace(w,D),(H=H||r===!0||typeof r=="function"&&r(C,d)||Array.isArray(r)&&r[d]||((Y,se)=>{for(var x=0;x<se.length;x++)if(-1<Y.indexOf(se[x]))return!0;return!1})(Q,s.BAD_DELIMITERS)||-1<Q.indexOf(o)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?T+Q+T:Q)}},s.RECORD_SEP="",s.UNIT_SEP="",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!y&&!!a.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=ee,s.ParserHandle=I,s.NetworkStreamer=v,s.FileStreamer=g,s.StringStreamer=m,s.ReadableStreamStreamer=K,a.jQuery&&((c=a.jQuery).fn.parse=function(t){var e=t.config||{},r=[];return this.each(function(f){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var T=0;T<this.files.length;T++)r.push({file:this.files[T],inputElem:this,instanceConfig:c.extend({},e)})}),u(),this;function u(){if(r.length===0)A(t.complete)&&t.complete();else{var f,T,D,F,b=r[0];if(A(t.before)){var M=t.before(b.file,b.inputElem);if(typeof M=="object"){if(M.action==="abort")return f="AbortError",T=b.file,D=b.inputElem,F=M.reason,void(A(t.error)&&t.error({name:f},T,D,F));if(M.action==="skip")return void o();typeof M.config=="object"&&(b.instanceConfig=c.extend(b.instanceConfig,M.config))}else if(M==="skip")return void o()}var w=b.instanceConfig.complete;b.instanceConfig.complete=function(X){A(w)&&w(X,b.file,b.inputElem),o()},s.parse(b.file,b.instanceConfig)}}function o(){r.splice(0,1),u()}}),_&&(a.onmessage=function(t){t=t.data,s.WORKER_ID===void 0&&t&&(s.WORKER_ID=t.workerId),typeof t.input=="string"?a.postMessage({workerId:s.WORKER_ID,results:s.parse(t.input,t.config),finished:!0}):(a.File&&t.input instanceof File||t.input instanceof Object)&&(t=s.parse(t.input,t.config))&&a.postMessage({workerId:s.WORKER_ID,results:t,finished:!0})}),(v.prototype=Object.create(h.prototype)).constructor=v,(g.prototype=Object.create(h.prototype)).constructor=g,(m.prototype=Object.create(m.prototype)).constructor=m,(K.prototype=Object.create(h.prototype)).constructor=K,s})}(Te)),Te.exports}var At=Tt();const je=Lt(At);async function jt(){let i=Ee.PUBLIC_TEMPLE_URL+"solutions/list",n=await fetch(i,{cache:"no-store"});if(!n.ok)return alert("could not fetch "+i),[];let l=await n.json();return l.sort((a,c)=>a.name<c.name?-1:a.name>c.name?1:0),l}async function Ft(i){const n=Ee.PUBLIC_TEMPLE_URL+`solutions/get_detail/${i}`;let l=await fetch(n,{cache:"no-store"});if(!l.ok)throw alert("Could not fetch "+n),new Error("Could not fetch "+n);return await l.json()}async function sr(i,n,l){let a=await(await fetch(Ee.PUBLIC_TEMPLE_URL+`solutions/get_unit/${i}/${n}?scenario=${l}`,{cache:"no-store"})).json();return a!=null&&(a=je.parse(a,{delimiter:",",header:!0,newline:`
`})),a}async function ar(i,n,l,a,c,y){const _=Ee.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${i}/${n}/${l}?scenario=${a}&year=${c}&rolling_average_size=${y}`;let p=await fetch(_,{cache:"no-store"});if(!p.ok)throw alert("Could not fetch "+_),new Error("Could not fetch "+_);let O=await p.json(),s=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output"],h={};for(const v of s)O[v]!==void 0&&(h[v]=We(O[v]));return h}function We(i,n=0,l=1){if(i.slice(0,i.indexOf(`
`)).split(",").length==2){let p=i.split(`
`),O="",s="";for(const h of p.slice(1,p.length)){if(h=="")continue;let v=h.split(",");O+=v[0]+",",s+=v[1]+","}i=O.substring(0,O.length-1)+`
`+s.substring(0,s.length-1)}i.slice(-1)==`
`&&(i=i.slice(0,-1));function y(p){let[O,...s]=p.split(`
`),h=O.split(",");return h=h.map(v=>isNaN(Number(v))?v:String(Number(v)*l+n)),[h.join(","),...s].join(`
`)}return je.parse(y(i),{delimiter:",",header:!0,newline:`
`})}async function or(i,n,l,a=0,c=1,y=0){const _=Ee.PUBLIC_TEMPLE_URL+`solutions/get_total/${i}/${n}?scenario=${l}&year=${y}`;let p=await fetch(_,{cache:"no-store"});if(!p.ok)throw alert("Error when fetching "+_),new Error("Error when fetching "+_);let O=await p.json(),s=We(O.data_csv,a,c),h=null;return O.unit!=null&&(O.unit.slice(-1)==`
`&&(O.unit=O.unit.slice(0,O.unit.length-1)),h=je.parse(O.unit,{delimiter:",",header:!0,newline:`
`})),s.data=s.data.filter(g=>{for(const m in g){let K=Number(m);if(!Number.isNaN(K)&&!Number.isNaN(g[m])&&Math.abs(g[m])>0)return!0}return!1}),{unit:h,data:s}}async function lr(i,n,l,a=0,c=1){const y=Ee.PUBLIC_TEMPLE_URL+`solutions/get_full_ts/${i}/${n}?scenario=${l}&year=${a}&rolling_average_size=${c}`;let _=await fetch(y,{cache:"no-store"});if(!_.ok)throw alert("Error when fetching "+y),new Error("Error when fetching "+y);let p=await _.json(),O=We(p.data_csv),s=null;return p.unit!=null&&(p.unit.slice(-1)==`
`&&(p.unit=p.unit.slice(0,p.unit.length-1)),s=je.parse(p.unit,{delimiter:",",header:!0,newline:`
`})),{unit:s,data:O}}function ur(i,n,l,a=[],c=!1,y="bar",_=""){if(i.length==0)return[];let p=Object.keys(i[0]).filter(v=>!isNaN(Number(v))&&!a.includes(Number(v))),O=Object.keys(n),s={};for(const v of i){let g=!1;for(let I in n)if(!n[I].includes(v[I])){g=!0;break}for(let I of Object.keys(l))if(!l[I].includes(v[I])){g=!0;break}if(g)continue;let m=[];for(let I of O)m.push(v[I]);let K=m.join("_")+_;K in s||(s[K]=Object.fromEntries(p.map(I=>[I,0])));for(let I of p){let U=Number(v[I]);v[I]=="inf"&&(U=1/0),s[K][I]+=U}}if(c){let v=Object.fromEntries(p.map(g=>[g,0]));for(let g of p)for(let m in s)v[g]+=s[m][g];for(let g of p)for(let m in s)v[g]==0?s[m][g]=0:s[m][g]*=1/v[g]}let h=[];for(let v in s)Object.values(s[v]).includes(NaN)||h.push({label:v,data:s[v],type:y});return h}function Nt(i){return Array.from(new Set(i))}function fr(i){return i.map(n=>({value:n,label:n}))}var Dt=he('<div class="row mb-2"><div class="col-sm-3"><label class="fw-medium fs-4"> </label></div> <div class="col-sm-9"><!></div></div>');function qe(i,n){const l=$e();var a=Dt(),c=ie(a),y=ie(c),_=ie(y,!0);V(y),V(c);var p=Ae(c,2),O=ie(p);Ke(O,()=>n.content,()=>l),V(p),V(a),me(()=>{be(y,"for",l),xe(_,n.label)}),ce(i,a)}function Mt(i,n,l,a,c){ne(n,""),ne(l,""),ne(a,null),c()}function Pt(i,n,l){ne(n,""),l()}var Ut=he("<option> </option>"),qt=he('<select class="form-select"></select>'),zt=he("<option> </option>"),Bt=he('<select class="form-select"></select>'),Kt=he("<option> </option>"),Wt=he('<select class="form-select"></select>'),Ht=he("<!> <!> <!>",1);function cr(i,n){pt(n,!0);let l=ye(n,"carriers",31,()=>Oe([])),a=ye(n,"nodes",31,()=>Oe([])),c=ye(n,"edges",31,()=>Oe([])),y=ye(n,"years",31,()=>Oe([])),_=ye(n,"selected_solution",15),p=ye(n,"loading",15,!1),O=ye(n,"disabled",3,!0),s=Ce(Oe([])),h=Ce(null),v=Ce(""),g=Ce(""),m=Ce(""),K=Ne(()=>Nt(E(s).map(e=>e.name.split(".")[0]))),I=Ne(()=>E(s).filter(e=>e.name.startsWith(E(v))).map(e=>e.name.split(".")[1]||null).filter(e=>e!=null)),U=Ne(()=>E(I).length==0?E(v)||null:E(g)?E(v)+"."+E(g):null);kt(async function(){var e,r;ne(s,await jt(),!0),ne(v,((e=De("solution"))==null?void 0:e.split(".")[0])||"",!0),ne(g,((r=De("solution"))==null?void 0:r.split(".")[1])||"",!0),ne(m,De("scenario")||"",!0),ee()});async function ee(){if(E(U)==null){_(null);return}p(!0),ne(h,await Ft(E(U)),!0),Object.keys(E(h).scenarios).length==1?(ne(m,Object.keys(E(h).scenarios)[0],!0),G()):E(m)!=""&&E(m)in E(h).scenarios?G():_(null),p(!1)}function G(){var e;E(h)==null||E(U)==null||(_({solution_name:E(U),scenario_name:E(m),detail:E(h).scenarios[E(m)],components:E(h).components,version:E(h).version}),Et({solution:_().solution_name,scenario:Object.keys(E(h).scenarios).length>1?_().scenario_name:null}),l(_().detail.system.set_carriers.slice()),a(_().detail.system.set_nodes),c(Object.keys(_().detail.edges)),y([...Array(_().detail.system.optimized_years).keys()].map(r=>r*_().detail.system.interval_between_years+_().detail.system.reference_year)),(e=n.solution_selected)==null||e.call(n,_()))}var W=Ht(),oe=vt(W);qe(oe,{label:"Solution",content:(r,u=de)=>{var o=qt();o.__change=[Mt,g,m,h,ee],Me(o,21,()=>E(K),Pe,(f,T)=>{var D=Ut(),F={},b=ie(D,!0);V(D),me(()=>{F!==(F=E(T))&&(D.value=(D.__value=E(T))??""),xe(b,E(T))}),ce(f,D)}),V(o),me(()=>{be(o,"id",u()),o.disabled=O()}),Ue(o,()=>E(v),f=>ne(v,f)),ce(r,o)}});var _e=Ae(oe,2);{var te=e=>{qe(e,{label:"Subsolution",content:(u,o=de)=>{var f=Bt();f.__change=[Pt,m,ee],Me(f,21,()=>E(I),Pe,(T,D)=>{var F=zt(),b={},M=ie(F,!0);V(F),me(()=>{b!==(b=E(D))&&(F.value=(F.__value=E(D))??""),xe(M,E(D))}),ce(T,F)}),V(f),me(()=>{be(f,"id",o()),f.disabled=O()}),Ue(f,()=>E(g),T=>ne(g,T)),ce(u,f)}})};Ye(_e,e=>{E(I).length>0&&e(te)})}var A=Ae(_e,2);{var t=e=>{qe(e,{label:"Secnario",content:(u,o=de)=>{var f=Wt();f.__change=G,Me(f,21,()=>{var T;return Object.keys(((T=E(h))==null?void 0:T.scenarios)||[])},Pe,(T,D)=>{var F=Kt(),b={},M=ie(F,!0);V(F),me(()=>{b!==(b=E(D))&&(F.value=(F.__value=E(D))??""),xe(M,E(D))}),ce(T,F)}),V(f),me(()=>{be(f,"id",o()),f.disabled=O()}),Ue(f,()=>E(m),T=>ne(m,T)),ce(u,f)}})};Ye(A,e=>{E(h)&&Object.keys(E(h).scenarios).length>1&&e(t)})}ce(i,W),gt()}wt(["change"]);var Qt=he('<div class="z-1 position-relative"><div class="accordion" id="accordionFilters"><!></div></div>');function dr(i,n){var l=Qt(),a=ie(l),c=ie(a);Ke(c,()=>n.children??de),V(a),V(l),ce(i,l)}var Jt=he('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="true"> </button></h2> <div class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div>');function hr(i,n){const l=$e();var a=Jt(),c=ie(a),y=ie(c),_=ie(y,!0);V(y),V(c);var p=Ae(c,2),O=ie(p),s=ie(O);Ke(s,()=>n.children??de),V(O),V(p),V(a),me(()=>{be(y,"data-bs-target","#collapse"+l),be(y,"aria-controls","collapse"+l),xe(_,n.title),be(p,"id","collapse"+l)}),ce(i,a)}export{dr as F,cr as S,hr as a,qe as b,or as c,Ue as d,ar as e,ur as f,lr as g,sr as h,Lt as i,nr as j,Nt as r,fr as t};
