import{k as t,e as w,m as b,o as C,q as g,v as _}from"./BUw4_zXp.js";import{l as n}from"./VbkfzCbL.js";const o=new Set;function S(r,d,e,l,f=l){var s=e.getAttribute("type")==="checkbox",c=r;let k=!1;if(d!==null)for(var h of d)c=c[h]??(c[h]=[]);c.push(e),n(e,"change",()=>{var a=e.__value;s&&(a=m(c,a,e.checked)),f(a)},()=>f(s?[]:null)),b(()=>{var a=l();if(t&&e.defaultChecked!==e.checked){k=!0;return}s?(a=a||[],e.checked=a.includes(e.__value)):e.checked=C(e.__value,a)}),g(()=>{var a=c.indexOf(e);a!==-1&&c.splice(a,1)}),o.has(c)||(o.add(c),_(()=>{c.sort((a,v)=>a.compareDocumentPosition(v)===4?-1:1),o.delete(c)})),_(()=>{if(k){var a;if(s)a=m(c,a,e.checked);else{var v=c.find(u=>u.checked);a=v==null?void 0:v.__value}f(a)}})}function B(r,d,e=d){n(r,"change",l=>{var f=l?r.defaultChecked:r.checked;e(f)}),(t&&r.defaultChecked!==r.checked||w(d)==null)&&e(r.checked),b(()=>{var l=d();r.checked=!!l})}function m(r,d,e){for(var l=new Set,f=0;f<r.length;f+=1)r[f].checked&&l.add(r[f].__value);return e||l.delete(d),Array.from(l)}export{B as a,S as b};
