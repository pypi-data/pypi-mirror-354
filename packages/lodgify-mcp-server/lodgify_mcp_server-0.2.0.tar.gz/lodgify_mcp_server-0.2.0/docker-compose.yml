services:
  server:
    build: .
    # Or use: image: ghcr.io/fast-transients/lodgify-mcp-server:latest
    environment:
      - LODGIFY_API_KEY=${LODGIFY_API_KEY}
    command: ["--mode", "server"]
    stdin_open: true
    tty: false
    restart: unless-stopped
    
  test:
    build: .
    # Or use: image: ghcr.io/fast-transients/lodgify-mcp-server:latest
    environment:
      - LODGIFY_API_KEY=${LODGIFY_API_KEY}
    command: ["--mode", "test"]
    profiles: ["test"]  # Only run when explicitly requested
