Metadata-Version: 2.4
Name: asyncframe
Version: 0.1.2
Summary: ç°ä»£å¼‚æ­¥Python Webæ¡†æ¶ï¼Œæ”¯æŒFBVå’ŒCBVä¸¤ç§ç¼–ç¨‹é£æ ¼ï¼Œä»¥åŠå®Œæ•´çš„å¼‚æ­¥ORMç³»ç»Ÿ
Home-page: https://github.com/0716gzs/asyncframe
Author: 0716gzs
Author-email: AsyncFrame Team <team@asyncframe.org>
License: MIT
Project-URL: Homepage, https://github.com/0716gzs/asyncframe
Project-URL: Documentation, https://github.com/0716gzs/asyncframe/blob/main/README.md
Project-URL: Repository, https://github.com/0716gzs/asyncframe.git
Project-URL: Bug Tracker, https://github.com/0716gzs/asyncframe/issues
Keywords: web,framework,async,asyncio,orm,database
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Internet :: WWW/HTTP :: HTTP Servers
Classifier: Topic :: Internet :: WWW/HTTP :: Dynamic Content
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Framework :: AsyncIO
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: uvicorn>=0.18.0
Requires-Dist: python-multipart>=0.0.5
Requires-Dist: jinja2>=3.1.0
Requires-Dist: aiofiles>=0.8.0
Requires-Dist: asyncpg>=0.28.0
Requires-Dist: aiomysql>=0.1.1
Requires-Dist: aiosqlite>=0.19.0
Requires-Dist: databases>=0.7.0
Requires-Dist: python-dotenv>=0.19.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: flake8>=4.0.0; extra == "dev"
Requires-Dist: mypy>=0.991; extra == "dev"
Provides-Extra: mysql
Requires-Dist: aiomysql>=0.1.1; extra == "mysql"
Provides-Extra: postgresql
Requires-Dist: asyncpg>=0.28.0; extra == "postgresql"
Provides-Extra: all
Requires-Dist: aiomysql>=0.1.1; extra == "all"
Requires-Dist: asyncpg>=0.28.0; extra == "all"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# AsyncFrame

ä¸€ä¸ªç°ä»£åŒ–çš„åŸºäºåç¨‹çš„å¼‚æ­¥Python Webæ¡†æ¶ï¼ŒåŸºäºASGIæ ‡å‡†æ„å»ºï¼Œæä¾›é«˜æ€§èƒ½çš„å¼‚æ­¥ç¼–ç¨‹ä½“éªŒã€‚

## ğŸŒŸ ä¸»è¦ç‰¹æ€§

### æ ¸å¿ƒæ¶æ„
- **åŸºäºASGIæ ‡å‡†**ï¼šå®Œå…¨å…¼å®¹ASGIè§„èŒƒï¼Œæ”¯æŒHTTP/1.1å’ŒHTTP/2
- **åŸç”Ÿasync/await**ï¼šå…¨é¢æ”¯æŒPythonåŸç”Ÿåç¨‹
- **é«˜æ€§èƒ½å¼‚æ­¥å¤„ç†**ï¼šåŸºäºäº‹ä»¶å¾ªç¯çš„å¼‚æ­¥I/O
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„ç»„ä»¶åˆ†ç¦»å’Œæ‰©å±•ç‚¹

### æ ¸å¿ƒåŠŸèƒ½
- **å¼‚æ­¥è·¯ç”±ç³»ç»Ÿ**ï¼šæ”¯æŒè·¯å¾„å‚æ•°ã€ç±»å‹è½¬æ¢ã€å¤šHTTPæ–¹æ³•
- **è¯·æ±‚/å“åº”ç®¡é“**ï¼šå®Œæ•´çš„HTTPè¯·æ±‚å“åº”å¤„ç†
- **ä¸­é—´ä»¶æ”¯æŒ**ï¼šå¯æ‰©å±•çš„ä¸­é—´ä»¶ç³»ç»Ÿ
- **WebSocketæ”¯æŒ**ï¼šåŸç”ŸWebSocketè¿æ¥å¤„ç†
- **åå°ä»»åŠ¡ç®¡ç†**ï¼šå¼‚æ­¥åå°ä»»åŠ¡æ‰§è¡Œ

### å†…ç½®ä¸­é—´ä»¶
- **CORSä¸­é—´ä»¶**ï¼šè·¨æºèµ„æºå…±äº«æ”¯æŒ
- **æ—¥å¿—ä¸­é—´ä»¶**ï¼šè¯·æ±‚æ—¥å¿—è®°å½•
- **å®‰å…¨ä¸­é—´ä»¶**ï¼šHTTPå®‰å…¨å¤´è®¾ç½®
- **é€Ÿç‡é™åˆ¶**ï¼šç®€å•çš„APIé€Ÿç‡é™åˆ¶
- **å“åº”å‹ç¼©**ï¼šGzipå‹ç¼©æ”¯æŒ

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### åˆ›å»ºåŸºæœ¬åº”ç”¨

```python
from asyncframe import AsyncFrame, JSONResponse

app = AsyncFrame(debug=True)

@app.get("/")
async def hello(request):
    return JSONResponse({"message": "Hello, AsyncFrame!"})

@app.get("/users/{user_id:int}")
async def get_user(request):
    user_id = request.path_params["user_id"]
    return JSONResponse({"user_id": user_id, "name": f"ç”¨æˆ·{user_id}"})

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

### è¿è¡Œç¤ºä¾‹åº”ç”¨

```bash
python example_app.py
```

è®¿é—® http://localhost:8000 æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹ã€‚

## ğŸš€ æ ¸å¿ƒæ¦‚å¿µ

### è·¯ç”±ç³»ç»Ÿ

```python
# åŸºæœ¬è·¯ç”±
@app.get("/api/hello")
async def hello_api(request):
    return JSONResponse({"message": "Hello"})

# è·¯å¾„å‚æ•°
@app.get("/users/{user_id:int}")
async def get_user(request):
    user_id = request.path_params["user_id"]
    return JSONResponse({"user_id": user_id})

# å¤šç§HTTPæ–¹æ³•
@app.route("/api/data", methods=["GET", "POST", "PUT"])
async def handle_data(request):
    if request.method == "GET":
        return JSONResponse({"data": "get_data"})
    elif request.method == "POST":
        data = await request.json()
        return JSONResponse({"received": data})
```

### è¯·æ±‚å¤„ç†

```python
@app.post("/api/submit")
async def submit_data(request):
    # JSONæ•°æ®
    json_data = await request.json()
    
    # è¡¨å•æ•°æ®
    form_data = await request.form()
    
    # åŸå§‹æ–‡æœ¬
    text_data = await request.text()
    
    # æŸ¥è¯¢å‚æ•°
    param = request.get_query_param("param", "default")
    
    # è¯·æ±‚å¤´
    user_agent = request.get_header("user-agent")
    
    return JSONResponse({"status": "success"})
```

### å“åº”ç±»å‹

```python
from asyncframe import JSONResponse, HTMLResponse, RedirectResponse, FileResponse

@app.get("/json")
async def json_response(request):
    return JSONResponse({"data": "value"})

@app.get("/html")
async def html_response(request):
    return HTMLResponse("<h1>Hello HTML</h1>")

@app.get("/redirect")
async def redirect_response(request):
    return RedirectResponse("/")

@app.get("/file")
async def file_response(request):
    return FileResponse("static/file.pdf")
```

### ä¸­é—´ä»¶ä½¿ç”¨

```python
from asyncframe.middleware import LoggingMiddleware, CORSMiddleware

# æ·»åŠ ä¸­é—´ä»¶
app.add_middleware(LoggingMiddleware)
app.add_middleware(CORSMiddleware, allow_origins=["*"])

# è‡ªå®šä¹‰ä¸­é—´ä»¶
class CustomMiddleware:
    async def before_request(self, request):
        print(f"è¯·æ±‚å¼€å§‹: {request.url}")
        return request
    
    async def after_request(self, request, response):
        print(f"è¯·æ±‚ç»“æŸ: {response.status_code}")
        return response

app.add_middleware(CustomMiddleware)
```

### WebSocketæ”¯æŒ

```python
@app.websocket("/ws")
async def websocket_endpoint(websocket):
    await websocket.accept()
    
    try:
        async for message in websocket.iter_json():
            # å¤„ç†æ¶ˆæ¯
            await websocket.send_json({"echo": message})
    except Exception as e:
        print(f"WebSocketé”™è¯¯: {e}")
```

### åå°ä»»åŠ¡

```python
async def send_email(email, subject):
    # æ¨¡æ‹Ÿå‘é€é‚®ä»¶
    print(f"å‘é€é‚®ä»¶åˆ° {email}")

@app.post("/send-email")
async def create_email_task(request):
    data = await request.json()
    
    # æ·»åŠ åå°ä»»åŠ¡
    task_id = app.add_background_task(
        send_email, 
        data["email"], 
        data["subject"]
    )
    
    return JSONResponse({"task_id": task_id})
```

### å¼‚å¸¸å¤„ç†

```python
from asyncframe.exceptions import HTTPException

@app.get("/error")
async def trigger_error(request):
    raise HTTPException(400, "è¿™æ˜¯ä¸€ä¸ªé”™è¯¯")

@app.exception_handler(404)
async def not_found_handler(exc):
    return JSONResponse({"error": "æœªæ‰¾åˆ°"}, status_code=404)
```

### ç”Ÿå‘½å‘¨æœŸäº‹ä»¶

```python
@app.on_startup
async def startup_event():
    print("åº”ç”¨å¯åŠ¨")
    # åˆå§‹åŒ–æ•°æ®åº“è¿æ¥ã€ç¼“å­˜ç­‰

@app.on_shutdown  
async def shutdown_event():
    print("åº”ç”¨å…³é—­")
    # æ¸…ç†èµ„æº
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
asyncframe/
â”œâ”€â”€ __init__.py          # æ¡†æ¶å…¥å£
â”œâ”€â”€ application.py       # æ ¸å¿ƒåº”ç”¨ç±»
â”œâ”€â”€ routing.py          # è·¯ç”±ç³»ç»Ÿ
â”œâ”€â”€ request.py          # è¯·æ±‚å¤„ç†
â”œâ”€â”€ response.py         # å“åº”å¤„ç†
â”œâ”€â”€ middleware.py       # ä¸­é—´ä»¶ç³»ç»Ÿ
â”œâ”€â”€ websocket.py        # WebSocketæ”¯æŒ
â”œâ”€â”€ background.py       # åå°ä»»åŠ¡
â”œâ”€â”€ exceptions.py       # å¼‚å¸¸å®šä¹‰
â””â”€â”€ url.py             # URLå¤„ç†

example_app.py          # ä½¿ç”¨ç¤ºä¾‹
requirements.txt        # ä¾èµ–æ–‡ä»¶
README.md              # è¯´æ˜æ–‡æ¡£
```

## ğŸ”§ é…ç½®å’Œæ‰©å±•

### è‡ªå®šä¹‰é…ç½®

```python
app = AsyncFrame(
    debug=True,           # è°ƒè¯•æ¨¡å¼
)

# æ·»åŠ è‡ªå®šä¹‰é…ç½®
app.config = {
    "DATABASE_URL": "sqlite:///app.db",
    "SECRET_KEY": "your-secret-key"
}
```

### è·¯ç”±åˆ†ç»„

```python
from asyncframe.routing import Router

# åˆ›å»ºå­è·¯ç”±å™¨
api_router = Router()

@api_router.get("/users")
async def list_users(request):
    return JSONResponse({"users": []})

@api_router.get("/users/{user_id}")
async def get_user(request):
    return JSONResponse({"user": "data"})

# åŒ…å«åˆ°ä¸»åº”ç”¨
app.router.include_router(api_router, prefix="/api/v1")
```

## ğŸš€ æ€§èƒ½ç‰¹æ€§

- **å¼‚æ­¥I/O**ï¼šåŸºäºasyncioçš„é«˜å¹¶å‘å¤„ç†
- **é›¶æ‹·è´å“åº”**ï¼šæµå¼å“åº”å’Œæ–‡ä»¶ä¼ è¾“
- **è¿æ¥æ± æ”¯æŒ**ï¼šå¯é…åˆaiohttpã€asyncpgç­‰ä½¿ç”¨
- **å†…å­˜ä¼˜åŒ–**ï¼šæœ€å°åŒ–å†…å­˜å ç”¨å’Œåƒåœ¾å›æ”¶

## ğŸ“‹ TODO

- [ ] æ¨¡æ¿å¼•æ“é›†æˆ (Jinja2)
- [ ] æ•°æ®åº“ORMæ”¯æŒ
- [ ] èº«ä»½éªŒè¯å’Œæˆæƒ
- [ ] é™æ€æ–‡ä»¶æœåŠ¡
- [ ] APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ
- [ ] æµ‹è¯•å®¢æˆ·ç«¯
- [ ] æ€§èƒ½ç›‘æ§

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·ç¡®ä¿ï¼š

1. éµå¾ªç°æœ‰ä»£ç é£æ ¼
2. æ·»åŠ é€‚å½“çš„æµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. æäº¤å‰è¿è¡Œæ‰€æœ‰æµ‹è¯•

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶ã€‚

---

**AsyncFrame** - ä¸ºç°ä»£Pythonå¼‚æ­¥åº”ç”¨è€Œç”Ÿçš„Webæ¡†æ¶ ğŸš€ 
