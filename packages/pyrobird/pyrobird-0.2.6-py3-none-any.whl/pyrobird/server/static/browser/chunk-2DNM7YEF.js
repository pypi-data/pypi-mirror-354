import{a as r}from"./chunk-J5ATPEI3.js";import{b as d}from"./chunk-Z4ZYSIRC.js";import"./chunk-3L3RRFVB.js";import"./chunk-FVXVO67X.js";import"./chunk-KYOHYQWH.js";import{k as n}from"./chunk-KYPE3LET.js";var o=class l extends r{rotate(t,i,s){let e=this.wsize*Math.cos(t),h=this.wsize*Math.sin(t),a="";return i!==void 0&&s!==void 0?a=`M${Math.round(i-e)},${Math.round(s-h)}`:(e=-e,h=-h),a+=`l${Math.round(e)},${Math.round(h)}`,i&&s===void 0&&(a+="z"),a}createPath(){let t=Math.atan2(this.y2-this.y1,this.x2-this.x1),i=this.wsize*Math.cos(this.angle2),s=i*Math.cos(t),e=i*Math.sin(t),h="";return this.beg&&(h+=this.rotate(t-Math.PI-this.angle2,this.x1,this.y1)+this.rotate(t-Math.PI+this.angle2,this.beg>10)),this.mid%10===2&&(h+=this.rotate(t-Math.PI-this.angle2,(this.x1+this.x2-s)/2,(this.y1+this.y2-e)/2)+this.rotate(t-Math.PI+this.angle2,this.mid>10)),this.mid%10===1&&(h+=this.rotate(t-this.angle2,(this.x1+this.x2+s)/2,(this.y1+this.y2+e)/2)+this.rotate(t+this.angle2,this.mid>10)),this.end&&(h+=this.rotate(t-this.angle2,this.x2,this.y2)+this.rotate(t+this.angle2,this.end>10)),`M${Math.round(this.x1+(this.beg>10?s:0))},${Math.round(this.y1+(this.beg>10?e:0))}L${Math.round(this.x2-(this.end>10?s:0))},${Math.round(this.y2-(this.end>10?e:0))}`+h}prepareDraw(){super.prepareDraw();let t=this.getObject(),i=t.fOption,s=this.getPadPainter().getPadRect();this.wsize=Math.max(3,Math.round(Math.max(s.width,s.height)*t.fArrowSize*.8)),this.angle2=t.fAngle/2/180*Math.PI,this.beg=this.mid=this.end=0,i.indexOf("<")===0&&(this.beg=i.indexOf("<|")===0?12:2),i.indexOf("->-")>=0?this.mid=1:i.indexOf("-|>-")>=0?this.mid=11:i.indexOf("-<-")>=0?this.mid=2:i.indexOf("-<|-")>=0&&(this.mid=12);let e=i.lastIndexOf(">"),h=i.lastIndexOf("|>"),a=i.length;e>=0&&e===a-1&&(this.end=h>=0&&h===a-2?11:1),this.createAttFill({attr:t,enable:this.beg>10||this.end>10})}addExtras(t){t.call(this.fillatt.func)}static draw(t,i,s){return n(this,null,function*(){let e=new l(t,i,s);return d(e,!1).then(()=>e.redraw())})}};export{o as TArrowPainter};
