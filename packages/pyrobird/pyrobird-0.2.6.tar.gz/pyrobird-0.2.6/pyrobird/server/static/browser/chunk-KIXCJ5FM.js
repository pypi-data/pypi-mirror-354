import"./chunk-KYPE3LET.js";var b=[0,0],W=[1,0];function d(e){let o=[];return o[e-1]=void 0,o}function S(e,o){return k(e[0]+o[0],e[1]+o[1])}function C(e,o){if(e[0]===o[0]&&e[1]===o[1])return 0;let r=e[1]<0,n=o[1]<0;return r&&!n?-1:!r&&n?1:z(e,o)[1]<0?-1:1}function k(e,o){o%=18446744073709552e3,e%=18446744073709552e3;let r=o%4294967296,n=Math.floor(e/4294967296)*4294967296;for(o=o-r+n,e=e-n+r;e<0;)e+=4294967296,o-=4294967296;for(;e>4294967295;)e-=4294967296,o+=4294967296;for(o=o%18446744073709552e3;o>9223372032559809e3;)o-=18446744073709552e3;for(;o<-9223372036854776e3;)o+=18446744073709552e3;return[e,o]}function g(e){return e>=0?[e,0]:[e+4294967296,-4294967296]}function M(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-4294967296,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function z(e,o){return k(e[0]-o[0],e[1]-o[1])}function E(e,o,r){return e.buf=o,e.pos=r??0,e.count=o.length,e}function D(e){return e.pos>=e.count?-1:e.buf[e.pos++]}function G(e,o){return e.buf=o,e.count=0,e}function A(e,o,r,n){Z(o,r,e.buf,e.count,n),e.count+=n}function Z(e,o,r,n,_){for(let m=0;m<_;++m)r[n+m]=e[o+m]}function T(e,o,r,n){let _=v({});if(!c(_,D(o)))throw new Error("corrupted input");e.length_0=[n,0],e.chunker=X(_,o,r,e.length_0)}function F(e,o,r,n,_){return e.output=G({},_),T(e,E({},o,r),e.output,n),e}function U(e,o,r){let n=e._pos-o-1;for(n<0&&(n+=e._windowSize);r!==0;--r)n>=e._windowSize&&(n=0),e._buffer[e._pos++]=e._buffer[n++],e._pos>=e._windowSize&&w(e)}function j(e,o){(!e._buffer||e._windowSize!==o)&&(e._buffer=d(o)),e._windowSize=o,e._pos=0,e._streamPos=0}function w(e){let o=e._pos-e._streamPos;o&&(A(e._stream,e._buffer,e._streamPos,o),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function B(e,o){let r=e._pos-o-1;return r<0&&(r+=e._windowSize),e._buffer[r]}function q(e,o){e._buffer[e._pos++]=o,e._pos>=e._windowSize&&w(e)}function O(e){w(e),e._stream=null}function x(e){return e-=2,e<4?e:3}function J(e){return e<4?0:e<10?e-3:e-6}function K(e,o){return e.decoder=o,e.encoder=null,e.alive=1,e}function Q(e){if(!e.alive)throw new Error("bad state");if(e.encoder)throw new Error("No encoding");return V(e),e.alive}function V(e){let o=Y(e.decoder);if(o===-1)throw new Error("corrupted input");(o||C(e.decoder.outSize,b)>=0)&&C(e.decoder.nowPos64,e.decoder.outSize)>=0&&(w(e.decoder.m_OutWindow),O(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}function X(e,o,r,n){return e.m_RangeDecoder.Stream=o,O(e.m_OutWindow),e.m_OutWindow._stream=r,H(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=n,e.nowPos64=b,e.prevByte=0,K({},e)}function Y(e){let o,r,n,_,m,p=M(e.nowPos64)&e.m_PosStateMask;if(!f(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+p))o=s(e.m_LiteralDecoder,M(e.nowPos64),e.prevByte),e.state<7?e.prevByte=t(o,e.m_RangeDecoder):e.prevByte=ee(o,e.m_RangeDecoder,B(e.m_OutWindow,e.rep0)),q(e.m_OutWindow,e.prevByte),e.state=J(e.state),e.nowPos64=S(e.nowPos64,W);else{if(f(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))n=0,f(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(f(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(f(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(r=e.rep3,e.rep3=e.rep2):r=e.rep2,e.rep2=e.rep1):r=e.rep1,e.rep1=e.rep0,e.rep0=r):f(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+p)||(e.state=e.state<7?9:11,n=1),n||(n=y(e.m_RepLenDecoder,e.m_RangeDecoder,p)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,n=2+y(e.m_LenDecoder,e.m_RangeDecoder,p),e.state=e.state<7?7:10,m=R(e.m_PosSlotDecoder[x(n)],e.m_RangeDecoder),m>=4){if(_=(m>>1)-1,e.rep0=(2|m&1)<<_,m<14)e.rep0+=ne(e.m_PosDecoders,e.rep0-m-1,e.m_RangeDecoder,_);else if(e.rep0+=_e(e.m_RangeDecoder,_-4)<<4,e.rep0+=re(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return e.rep0===-1?1:-1}else e.rep0=m;if(C(g(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;U(e.m_OutWindow,e.rep0,n),e.nowPos64=S(e.nowPos64,g(n)),e.prevByte=B(e.m_OutWindow,0)}return 0}function v(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=d(192),e.m_IsRepDecoders=d(12),e.m_IsRepG0Decoders=d(12),e.m_IsRepG1Decoders=d(12),e.m_IsRepG2Decoders=d(12),e.m_IsRep0LongDecoders=d(192),e.m_PosSlotDecoder=d(4),e.m_PosDecoders=d(114),e.m_PosAlignDecoder=l({},4),e.m_LenDecoder=L({}),e.m_RepLenDecoder=L({}),e.m_LiteralDecoder={};for(let o=0;o<4;++o)e.m_PosSlotDecoder[o]=l({},6);return e}function H(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,u(e.m_IsMatchDecoders),u(e.m_IsRep0LongDecoders),u(e.m_IsRepDecoders),u(e.m_IsRepG0Decoders),u(e.m_IsRepG1Decoders),u(e.m_IsRepG2Decoders),u(e.m_PosDecoders),i(e.m_LiteralDecoder);for(let o=0;o<4;++o)u(e.m_PosSlotDecoder[o].Models);N(e.m_LenDecoder),N(e.m_RepLenDecoder),u(e.m_PosAlignDecoder.Models),me(e.m_RangeDecoder)}function c(e,o){if(o===-1)return!1;let r=o%9,n=~~(o/9),_=n%5,m=~~(n/5);return $(e,r,_,m)?a(e,8388608):!1}function a(e,o){return o<0?0:(e.m_DictionarySize!==o&&(e.m_DictionarySize=o,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),j(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096))),1)}function $(e,o,r,n){if(o>8||r>4||n>4)return 0;h(e.m_LiteralDecoder,r,o);let _=1<<n;return I(e.m_LenDecoder,_),I(e.m_RepLenDecoder,_),e.m_PosStateMask=_-1,1}function I(e,o){for(;e.m_NumPosStates<o;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=l({},3),e.m_MidCoder[e.m_NumPosStates]=l({},3)}function y(e,o,r){if(!f(o,e.m_Choice,0))return R(e.m_LowCoder[r],o);let n=8;return f(o,e.m_Choice,1)?n+=8+R(e.m_HighCoder,o):n+=R(e.m_MidCoder[r],o),n}function L(e){return e.m_Choice=d(2),e.m_LowCoder=d(16),e.m_MidCoder=d(16),e.m_HighCoder=l({},8),e.m_NumPosStates=0,e}function N(e){u(e.m_Choice);for(let o=0;o<e.m_NumPosStates;++o)u(e.m_LowCoder[o].Models),u(e.m_MidCoder[o].Models);u(e.m_HighCoder.Models)}function h(e,o,r){if(e.m_Coders!=null&&e.m_NumPrevBits===r&&e.m_NumPosBits===o)return;e.m_NumPosBits=o,e.m_PosMask=(1<<o)-1,e.m_NumPrevBits=r;let n=1<<e.m_NumPrevBits+e.m_NumPosBits;e.m_Coders=d(n);for(let _=0;_<n;++_)e.m_Coders[_]=oe({})}function s(e,o,r){return e.m_Coders[((o&e.m_PosMask)<<e.m_NumPrevBits)+((r&255)>>>8-e.m_NumPrevBits)]}function i(e){let o=1<<e.m_NumPrevBits+e.m_NumPosBits;for(let r=0;r<o;++r)u(e.m_Coders[r].m_Decoders)}function t(e,o){let r=1;do r=r<<1|f(o,e.m_Decoders,r);while(r<256);return r<<24>>24}function ee(e,o,r){let n,_,m=1;do if(_=r>>7&1,r<<=1,n=f(o,e.m_Decoders,(1+_<<8)+m),m=m<<1|n,_!==n){for(;m<256;)m=m<<1|f(o,e.m_Decoders,m);break}while(m<256);return m<<24>>24}function oe(e){return e.m_Decoders=d(768),e}function l(e,o){return e.NumBitLevels=o,e.Models=d(1<<o),e}function R(e,o){let r=1;for(let n=e.NumBitLevels;n!==0;--n)r=(r<<1)+f(o,e.Models,r);return r-(1<<e.NumBitLevels)}function re(e,o){let r,n,_=1,m=0;for(n=0;n<e.NumBitLevels;++n)r=f(o,e.Models,_),_<<=1,_+=r,m|=r<<n;return m}function ne(e,o,r,n){let _,m,p=1,P=0;for(m=0;m<n;++m)_=f(r,e,o+p),p<<=1,p+=_,P|=_<<m;return P}function f(e,o,r){let n=o[r],_=(e.Range>>>11)*n;return(e.Code^-2147483648)<(_^-2147483648)?(e.Range=_,o[r]=n+(2048-n>>>5)<<16>>16,e.Range&-16777216||(e.Code=e.Code<<8|D(e.Stream),e.Range<<=8),0):(e.Range-=_,e.Code-=_,o[r]=n-(n>>>5)<<16>>16,e.Range&-16777216||(e.Code=e.Code<<8|D(e.Stream),e.Range<<=8),1)}function _e(e,o){let r,n,_=0;for(r=o;r!==0;--r)e.Range>>>=1,n=e.Code-e.Range>>>31,e.Code-=e.Range&n-1,_=_<<1|1-n,e.Range&-16777216||(e.Code=e.Code<<8|D(e.Stream),e.Range<<=8);return _}function me(e){e.Code=0,e.Range=-1;for(let o=0;o<5;++o)e.Code=e.Code<<8|D(e.Stream)}function u(e){for(let o=e.length-1;o>=0;--o)e[o]=1024}function de(e,o,r){let n=F({},e,29,r,o),_=0;for(;Q(n.chunker)&&_<=r;)_++;if(_>r)throw Error("Endless loop in LZMA decompress");let m=n.output.count;if(m!==r)throw Error(`LZMA: mismatch unpacked buffer size ${m} != ${r}}`);return m}export{de as decompress};
